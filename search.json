[
  {
    "objectID": "notes/results.html",
    "href": "notes/results.html",
    "title": "Test and Verification Results",
    "section": "",
    "text": "This technical note presents the results from the modelling work specified in technical note “Technical Note D2 - Algorithm Design and Theoretical Basis Description” for both the morphometric and AI models. The first section “Morphometric classification” focuses on the morphometric prediction pipeline, its results accuracies and examples and introduces two extensions to the experiment design - an additional dataset and two new models that are evaluated. Similarly, the second section “Test and Verification Results: AI Model” describes the extensions and changes from the design specification and the results of the space-time modelling. This note ends with a conclusion section that brings together the two sets of results and discusses the limitations of the project. In summary, we are able to achieve high accuracy at multiple resolutions - at the building level for the morphometric model, and at the 250 metre grid cell resolution for the AI model. And that these results show that it is possible to use alternative data sources to characterize urban fort at scale, while preserving detail that is currently not captured by other large urban descriptors."
  },
  {
    "objectID": "notes/results.html#results",
    "href": "notes/results.html#results",
    "title": "Test and Verification Results",
    "section": "Results",
    "text": "Results\n\n\n\nTable 2: Distribution of test classes across the different models. The reported values are in the thousands.\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nAligned Winding Streets\n1,308\n1,312\n474\n406\n5,219\n245\n195\n\n\nCompact Development\n1,067\n1,083\n160\n75\n5,041\n33\n23\n\n\nCul-de-Sac Layout\n1,023\n1,027\n358\n400\n3,798\n344\n212\n\n\nDense Connected Developments\n735\n750\n92\n268\n2,971\n138\n207\n\n\nDense Standalone Buildings\n818\n785\n273\n1,224\n1,899\n358\n338\n\n\nDispersed Linear Development\n136\n133\n36\n613\n31\n0\n2\n\n\nExtensive Wide-Spaced Developments\n113\n104\n26\n329\n130\n20\n61\n\n\nLarge Interconnected Blocks\n36\n33\n3\n8\n138\n21\n11\n\n\nLarge Utilitarian Development\n133\n131\n11\n134\n429\n43\n46\n\n\nLinear Development\n391\n396\n139\n1,526\n254\n11\n27\n\n\nSparse Open Layout\n1,626\n1,621\n59\n3,744\n1,486\n1,319\n1,521\n\n\nSparse Road-Linked Development\n1,095\n1,065\n428\n1,697\n3,005\n177\n169\n\n\nSparse Rural Development\n562\n540\n30\n2,483\n65\n132\n101\n\n\nTotal\n9,049\n8,987\n2,095\n12,913\n24,473\n2,846\n2,919\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nAligned Winding Streets\n1,906\n1,911\n602\n593\n7,681\n334\n320\n\n\nCompact Development\n1,632\n1,646\n201\n127\n7,708\n75\n48\n\n\nCul-de-Sac Layout\n1,354\n1,362\n446\n484\n5,152\n429\n260\n\n\nDense Connected Developments\n1,850\n1,843\n157\n662\n7,494\n262\n676\n\n\nDense Standalone Buildings\n1,062\n1,073\n324\n1,540\n2,524\n465\n454\n\n\nDispersed Linear Development\n163\n167\n40\n740\n35\n0\n3\n\n\nExtensive Wide-Spaced Developments\n175\n186\n63\n468\n215\n35\n94\n\n\nLarge Interconnected Blocks\n216\n218\n11\n45\n872\n82\n70\n\n\nLarge Utilitarian Development\n184\n178\n15\n163\n632\n55\n57\n\n\nLinear Development\n468\n464\n173\n1,797\n320\n11\n41\n\n\nSparse Open Layout\n1,924\n1,901\n65\n4,353\n1,927\n1,498\n1,777\n\n\nSparse Road-Linked Development\n1,387\n1,377\n531\n2,045\n3,921\n226\n213\n\n\nSparse Rural Development\n639\n643\n42\n2,811\n82\n150\n108\n\n\nTotal\n12,966\n12,974\n2,675\n15,832\n38,570\n3,627\n4,127\n\n\n\n\n\n\n\n\n\n\n\nSince the different test cases are derived from different underlying data, the results are interpreted with that in mind. The test data distribution and source in the MS models is different than the test data in Overture models - less volumnous, much less detailed and overall different in character. Table Table 2 shows the differences in distribution per Level 4 cluster with the table values reporting the thousands of instances of a particular class. The distribution will be similar for level 3 clusters, as they are aggregates of Level 4.\nThe differences in Large Interconnected Blocks and Dense Connected Developments between Table 2 (b) and Table 2 (a) highlight that there are a lot less instances of buildings in dense central urban areas, since the extraction method in the MS case groups many of them together or completely discards them. However, in all cases, apart from Germany, as a percentage of the total test cases, these classes are low and therefore even high improvements in predicting these specific classes affect the overall reported accuracy relatively little. The weighted macro F1 score reported in the results in subsequent sections somewhat addresses the issue, but it accounts better for poor performance, rather than highlighting improvements. If the models perform poorly on a class that appears few times in the test data, then the weighted F1 score weights its specific score less than other classes that appear more frequently. The macro F1 score weights the classes equally, so better performance in a class that does not appear often increases the overall score relatively more. However, poorer performance for another class due to the test case distribution or problems with the Microsoft Buildings extraction algorithm counters this. For these reasons we extend our analysis to the individual classes and do not just look at the aggregate F1 scores.\nNevertheless, the attached target labels come from the same source for both types of models and reflects a ground truth independent of these data issues. The detailed class by class F1 scores highlight what is possible to detect with a specific datasets. Therefore, a high score means that a correct classification is more likely given all of the issues with the underlying data.\n\nLevel 3\n\nAggregate scores\n\n\n\nTable 3: Overall F1 scores at level 3\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.74\n0.66\n0.59\n0.54\n0.60\n0.59\n0.63\n0.56\n\n\nMicro F1\n0.74\n0.65\n0.57\n0.53\n0.61\n0.58\n0.62\n0.53\n\n\nMacro F1\n0.73\n0.63\n0.48\n0.45\n0.54\n0.47\n0.49\n0.45\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.74\n0.66\n0.59\n0.51\n0.61\n0.62\n0.65\n0.59\n\n\nMicro F1\n0.74\n0.66\n0.58\n0.50\n0.61\n0.61\n0.63\n0.56\n\n\nMacro F1\n0.74\n0.64\n0.50\n0.46\n0.57\n0.49\n0.53\n0.47\n\n\n\n\n\n\n\n\n\n\n\nTable 3 shows the aggregate F1 scores for the level 3 models trained on the Microsoft Building footprint and Overture Maps building footprints data. The Random, column shows the F1 scores for the model tested on randomly selected stratified data; Spatial - on the spatially aware split; OoS - stands for “Out of Sample” and is the average of the models, tested on each individual country and trained on the rest; the other columns are the specific F1 scores for each country, that make up the OoS. There are three main patterns present in the reported results.\nFirst, overall the aggregate scores between the models trained on the two datasets are almost equal. with the Overture Maps models being very slightly higher. This suggests that at this level of disaggregation of urban form, detailed characteristics of building footprints and their interactions with each other and the street network matter less. For example, the Overture data has more accurate information of building corners, adjacency, orientation and others but that does not significantly improve the overall F1 scores.\nSecond, more complex and reflective of the underlying phenomena testing splits result in more realistic model evaluations for both sub-tables. The Random split has the highest score, the spatial split is always lower and the OoS average lower still. OoS is the closest score to a realistic real-world application of the model - using it to predict unseen urban fabric types. The fact that the Spatial score is closer to it, shows that randomly splitting your modelling data leads to spatial leakage and spatially aware-splits result in more realistic evaluations. Nevertheless, the Out of Sample score is lower still, which suggests that even testing the model accuracy on spatially split data overestimates model performance.\nThird, even at this high level of aggregation urban form shows signs of heterogeneity. The F1 scores for the individual countries vary both Overture and Microsoft trained models, but especially in Table 3 (a). The scores for Slovakia are especially lower suggesting that it represents a more distinct type of morphology, whereas the scores for Austria are the highest suggesting that it is more similar on average to Central Europe as a whole.\n\n\nClass scores\n\n\n\nTable 4: Individual F1 scores for level 3 clusters\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nCentral Urban Developments\n0.62\n0.56\n0.46\n0.37\n0.45\n0.51\n0.50\n0.47\n\n\nDense Urban Developments\n0.73\n0.67\n0.65\n0.64\n0.70\n0.64\n0.66\n0.62\n\n\nLarge Scale Developments\n0.54\n0.46\n0.42\n0.34\n0.55\n0.37\n0.39\n0.42\n\n\nLinear Road Network Developments\n0.87\n0.67\n0.36\n0.45\n0.59\n0.36\n0.20\n0.20\n\n\nSparse Road Network Developments\n0.79\n0.71\n0.64\n0.52\n0.70\n0.61\n0.73\n0.64\n\n\nSparse Rural Development\n0.87\n0.71\n0.38\n0.31\n0.46\n0.18\n0.47\n0.47\n\n\nStreet-aligned Developments\n0.70\n0.63\n0.46\n0.56\n0.33\n0.59\n0.49\n0.32\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nCentral Urban Developments\n0.74\n0.69\n0.59\n0.41\n0.62\n0.67\n0.65\n0.62\n\n\nDense Urban Developments\n0.72\n0.67\n0.65\n0.64\n0.69\n0.64\n0.66\n0.63\n\n\nLarge Scale Developments\n0.54\n0.45\n0.40\n0.36\n0.55\n0.36\n0.38\n0.34\n\n\nLinear Road Network Developments\n0.86\n0.66\n0.38\n0.46\n0.60\n0.36\n0.26\n0.23\n\n\nSparse Road Network Developments\n0.78\n0.70\n0.64\n0.49\n0.69\n0.60\n0.73\n0.67\n\n\nSparse Rural Development\n0.85\n0.71\n0.39\n0.36\n0.47\n0.16\n0.51\n0.47\n\n\nStreet-aligned Developments\n0.69\n0.62\n0.46\n0.49\n0.35\n0.60\n0.51\n0.35\n\n\n\n\n\n\n\n\n\n\n\nTable 4 shows the F1 scores broken down by prediction class for the level 3 models. The sub-tables and columns have the same interpretation as Table 3.\nThe differences in F1 scores across classes shows that some types of urban form is easier to predict that others. Dense Urban Developments has the highest score, whereas Sparse Rural Development the lowest.\nThe patterns in the individual classes between sub-tables Table 4 (a) and Table 4 (b) are mostly identical to patterns in the aggregated results. The scores for individual classes are similar, with the overture data performing very slightly better. The exception is the Central Urban Developments class, which is reflective of the higher quality in the Overture dataset. The higher prediction accuracy for this cluster does not significantly impact the overall F1 scores in Table 3 (b), since it is relatively sparse compared to the rest of the classes. Furthermore, the same patterns in f1 scores hold across the train / test schemes : Random is the highest; Spatial is lower, OoS lowest. Lastly, the heterogeneity of urban form between countries and across detailed classes is even more pronounced , as evidenced by the even larger differences in F1 scores between the country specific models countries.\n\n\n\nLevel 4\n\nAggregate scores\n\n\n\nTable 5: Overall F1 scores at Level 4\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.59\n0.52\n0.38\n0.38\n0.42\n0.36\n0.44\n0.29\n\n\nMicro F1\n0.59\n0.52\n0.37\n0.38\n0.42\n0.37\n0.40\n0.28\n\n\nMacro F1\n0.59\n0.49\n0.30\n0.30\n0.35\n0.31\n0.30\n0.26\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.70\n0.55\n0.41\n0.35\n0.43\n0.41\n0.49\n0.39\n\n\nMicro F1\n0.70\n0.54\n0.40\n0.34\n0.43\n0.41\n0.46\n0.36\n\n\nMacro F1\n0.71\n0.54\n0.34\n0.30\n0.38\n0.35\n0.36\n0.32\n\n\n\n\n\n\n\n\n\n\n\nTable 5 shows the overall F1 scores for the Level 4 prediction models.\nFirst, overall the scores in Table 5 are lower than the scores in Table 3 across all models. This shows that the prediction task becomes more difficult as we move down the ground truth taxonomy.\nSecond, Table 5 (b) mostly has higher values than Table 5 (a) across all models, suggesting that as the detail of the target clusters increases, so does the importance of the building footprints quality.\nThird, heterogeneity of urban form is more prominent as evidenced by the relatively larger differences in f1 scores between the country specific models.\nFourth, the same pattern of spatial leakage is present as in Table 3. As the complexity of the spatial splitting schemes increase to match the underlying phenomena, the f1 scores decrease.\n\n\nClass scores\n\n\n\nTable 6: Individual F1 scores for level 4 clusters\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nAligned Winding Streets\n0.51\n0.45\n0.28\n0.35\n0.21\n0.36\n0.28\n0.18\n\n\nCompact Development\n0.59\n0.55\n0.13\n0.15\n0.09\n0.24\n0.09\n0.08\n\n\nCul-de-Sac Layout\n0.57\n0.52\n0.43\n0.52\n0.31\n0.52\n0.47\n0.32\n\n\nDense Connected Developments\n0.50\n0.46\n0.33\n0.29\n0.29\n0.45\n0.33\n0.29\n\n\nDense Standalone Buildings\n0.63\n0.56\n0.54\n0.53\n0.65\n0.38\n0.55\n0.57\n\n\nDispersed Linear Development\n0.91\n0.64\n0.19\n0.17\n0.34\n0.18\n0.06\n0.18\n\n\nExtensive Wide-Spaced Developments\n0.41\n0.31\n0.25\n0.25\n0.46\n0.13\n0.19\n0.25\n\n\nLarge Interconnected Blocks\n0.36\n0.28\n0.24\n0.22\n0.17\n0.37\n0.30\n0.15\n\n\nLarge Utilitarian Development\n0.49\n0.40\n0.32\n0.23\n0.34\n0.36\n0.34\n0.34\n\n\nLinear Development\n0.73\n0.50\n0.28\n0.37\n0.43\n0.29\n0.13\n0.16\n\n\nSparse Open Layout\n0.62\n0.56\n0.31\n0.14\n0.36\n0.32\n0.50\n0.24\n\n\nSparse Road-Linked Development\n0.57\n0.46\n0.27\n0.40\n0.32\n0.29\n0.17\n0.19\n\n\nSparse Rural Development\n0.79\n0.69\n0.39\n0.29\n0.54\n0.17\n0.49\n0.47\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nAligned Winding Streets\n0.61\n0.46\n0.29\n0.28\n0.27\n0.37\n0.31\n0.25\n\n\nCompact Development\n0.66\n0.55\n0.16\n0.09\n0.12\n0.30\n0.18\n0.11\n\n\nCul-de-Sac Layout\n0.65\n0.51\n0.42\n0.48\n0.31\n0.50\n0.47\n0.32\n\n\nDense Connected Developments\n0.67\n0.58\n0.43\n0.30\n0.44\n0.58\n0.39\n0.44\n\n\nDense Standalone Buildings\n0.69\n0.57\n0.53\n0.53\n0.63\n0.36\n0.53\n0.61\n\n\nDispersed Linear Development\n0.96\n0.65\n0.16\n0.09\n0.31\n0.16\n0.07\n0.19\n\n\nExtensive Wide-Spaced Developments\n0.52\n0.36\n0.27\n0.30\n0.47\n0.13\n0.23\n0.22\n\n\nLarge Interconnected Blocks\n0.69\n0.60\n0.46\n0.41\n0.35\n0.57\n0.57\n0.42\n\n\nLarge Utilitarian Development\n0.60\n0.44\n0.37\n0.28\n0.37\n0.42\n0.38\n0.41\n\n\nLinear Development\n0.88\n0.53\n0.30\n0.37\n0.44\n0.29\n0.21\n0.18\n\n\nSparse Open Layout\n0.74\n0.61\n0.36\n0.07\n0.38\n0.34\n0.61\n0.38\n\n\nSparse Road-Linked Development\n0.72\n0.49\n0.29\n0.37\n0.34\n0.32\n0.21\n0.21\n\n\nSparse Rural Development\n0.88\n0.71\n0.41\n0.35\n0.55\n0.15\n0.50\n0.47\n\n\n\n\n\n\n\n\n\n\n\nTable 6 shows the breakdown of f1 scores across Level 4 individual clusters and models. The same patterns with regard to spatial leakage and urban heterogeneity hold as in Table 5, Table 3 and Table 3. However, there is a more pronounced difference in the data sources.\nTable 6 (b) has consistently higher values than Table 6 (a), in contrast to the pattern at Level 3, reported in Table 4, where only the Central Urban Developments class showed a significant difference. Table 6 (b) has higher values of al teast .05 for Dense Connected Developments , Large Interconnected Blocks, Large Utilitarian Development, Sparse Open Layout. The one exception to the overall pattern is Slovakia, where the Table 6 (a) is higher.\n\n\n\nOverture Spatial model\nWe provide the confusion matrix and example predictions for the Level 4 model, trained using a spatial split on Overture data. We picked this model to provide example predictions across multiple counties and urban areas of different sizes.\n\nConfusion matrix\n\n\n\n\n\n\nFigure 3: Confusion matrix for the Spatial model Level 4 predictions. Normalised by the True Label (row-wise)\n\n\n\nFigure 3 shows the confusion matrix for the model. The Classes are ordered to reflect the hierarchical relationships. The first row, Dense Connected Developments and the second, Large Interconnected Blocks, form one branch, Central Urban Developments,one level up in the taxonomy. Similarly the \\(n\\) and \\(n+1\\) row form one branch. The first four classes form one branch two levels up, and so on.\nThe results show that misclassified classes are generally misclassified within one or two cophenetic distances in the taxonomy. In other words, if an ETC is misclassified there is a high chance, it will be labeled as a related class in the full taxonomy.\n\n\nLevel 4 model example predictions\n\n\n\n\n\n\nFigure 4: Example Level 4 predictions for the areas around Vienna (Austria), Munich (Germany), Wroclaw (Poland) and Brno (Czechia)"
  },
  {
    "objectID": "notes/results.html#discussion",
    "href": "notes/results.html#discussion",
    "title": "Test and Verification Results",
    "section": "Discussion",
    "text": "Discussion\nThe results from the study pertain to three areas – urban morphology, spatial modelling, and data quality.\n\nUrban morphology\nWith regard to urban morphology, the results show that modelling urban morphology is possible. However, morphological types are heterogeneous, and the characteristics and factors that are important vary across scales of dissimilarity.\nThe modelling results show that a lot of useful information can be learned morphologically from one country and transferred to new contexts. Table 3 shows that at Level 3, the out-of-sample (OoS) averages are close to the spatial split F1 score of approximately 0.6. This is comparable to other land use prediction models, with two caveats. First, we are making predictions at a much higher level of detail—the individual building level—than typical land use models. Second, we test the models in a more difficult but more realistic scenario and report the possible out-of-sample scores. Furthermore, the higher scores in Table 3, as well as the confusion matrix in Figure 3, also suggest that we make reasonable misclassifications—one class at Level 4 is often misclassified as another Level 4 class within the same Level 3 category, i.e., part of the same branch in the ground truth taxonomy. If this were not the case, the Table 3 F1 scores would be equal to or lower than the Table 5 scores.\nNevertheless, in spite of these results, urban morphology remains highly heterogeneous. The differences between the country-specific models reflect the ability to use information from the analysed urban forms of several countries to infer the urban form type in an unseen country. If the results across these models were similar, it would imply that urban form is similar across countries. The large differences suggest that underlying national phenomena affect morphology. While this in itself is not a new finding, it has not been quantitatively demonstrated before, especially based on tens of morphological characteristics calculated using tens of millions of urban geometries across several countries.\nThis heterogeneity, however, varies. Austria has, on average, the most similar morphology to the other four Central European countries, whereas Czechia and Slovakia are the most different. The level of morphological detail at which the analysis is carried out also has an effect. At Level 3 of the morphological taxonomic tree the results across countries are relatively more similar than at Level 4. Furthermore, Dense Standalone Buildings , Large Interconnected Blocks , Large Utilitarian Development, are more predictable across all the country models than other classes.\nIdentifying different types of urban form also requires specific types of characteristics and data quality. The relative overall similarity between the scores in Table 3 (a) and Table 3 (b) suggests that, except in the case of Central Urban Developments, building polygon quality is not that important. Conversely, since the street network is shared, the results show the importance of the street network and how it can compensate for poor-quality building footprint data. As the required level of detail increases, however (see Table 5 (a) and Table 5 (b)), data quality and aspects of building morphology such as adjacency, configuration, and shape become more important.\n\n\nMorphological data\nThe results also suggest that heterogeneous but more detailed data is preferable to homogeneous but coarser data for urban morphological analysis. Furthermore, the morphological pipeline developed for cadastre data can be run without modification on both the Microsoft (homogeneous, generally more detailed) and Overture maps data (heterogeneous, generally more detailed).\nThe overall higher or equivalent performance of Overture maps data shows that this data should be used when possible to identify urban morphological types for countries not in the training data. Overture maps’ schema and easy access to the OpenStreetMap street networks are additional benefits. Taken together, the results show that, overall, when cadastre data is not available, Overture maps data should be used in place of satellite-derived footprints.\nThe consistently higher performance of the spatial models also suggests using as much data as possible in model training, from any source, since it provides some local context.\n\n\nSpatial modelling in general\nThe results from the comparisons highlight the need for complex train/testing dataset splits when training models in the presence of spatial autocorrelation. When reporting accuracy scores, many land use prediction models do not take into account spatial autocorrelation. As consistently shown in the F1 score tables in this work, this results in artificially higher scores. Even worse, in the case of more complex models, they may not be learning the weights necessary to perform inference, but rather overfitting and memorising the training data. This work further shows that, for urban morphological predictions and analysis specifically, spatial leakage is ubiquitous.\nThere are other works and papers that have highlighted the need for spatially stratified training of models. They suggest various schemes to split the data spatially - predefined grids or locally derived boundaries or other approaches all together. What this paper further highlights is the need to consider not just the specific type of spatial stratification, but the scale of stratification as well. The consistently lower scores for the spatial split and the individual countries models highlight the fact that there is spatial autocorrelation of morphological features at multiple scales - local, as defined in this work based on h3 level 7 grid cells, and national as defined by national boundaries.\nIn the specific case of urban morphology, there are also other possible scales to consider, such as regional or city-level, which could also affect predictions. We focused specifically on the national scale, since data quality from OpenStreetMap varies widely at that level. Furthermore, the most common use case for the model would be to predict morphological classes for an entire country that is not part of the training data. Nevertheless, the implications of our results are that when modelling spatial phenomena using machine learning models, train/test splits should account for the specific properties of the phenomenon under analysis. Works that do not explicitly do this risk reporting artificially high accuracies that do not reflect real model use cases."
  },
  {
    "objectID": "notes/results.html#data",
    "href": "notes/results.html#data",
    "title": "Test and Verification Results",
    "section": "Data",
    "text": "Data\n\nSatellite Imagery (Input)\nSatellite image data used to train the XGBoost classifier was sourced from the GHS-composite-S2 R2020A dataset1, as detailed in the Reference Data Selection. This dataset is a global, cloud-free image composite derived from Sentinel-2 L1C data, covering January 2017 through December 2018. We utilised RGB bands at 10 metres per pixel resolution.\n\nTemporal Change Prediction\nSentinel-2 satellite imagery covering 2016 to 2021 was acquired using the Google Earth Engine API through automated Python scripts (as described in GEE pipeline. Images were selected for low cloud coverage, resulting in composite summary products for each year.\n\n\n\nUrban Fabric Classes (Outcome)\nWe employed labels from the Spatial Signatures Framework2, a typology classifying British urban environments based on form (physical appearance) and function (usage). Although our project specifically targets urban fabric classification based primarily on visible form — which might be simpler to predict — the form-specific classification scheme remains under development (as detailed in the Sections on Morphometric Classification). Consequently, the comprehensive Spatial Signatures Framework currently serves as a proxy aligning closely with our project’s urban characterisation objectives.\nWe used two versions of this dataset: one with 12 classes and another simplified version with 7 classes. The 12-class scheme combines the various urbanity categories into a single class, maintaining all other Spatial Signatures classes:\nclass_labels = {\n    'Accessible suburbia': 0,\n    'Connected residential neighbourhoods': 1,\n    'Countryside agriculture': 2,\n    'Dense residential neighbourhoods': 3,\n    'Dense urban neighbourhoods': 4,\n    'Disconnected suburbia': 5,\n    'Gridded residential quarters': 6,\n    'Open sprawl': 7,\n    'Urban buffer': 8,\n    'Urbanity': 9,\n    'Warehouse/Park land': 10,\n    'Wild countryside': 11\n}\nFor the simplified 7-class version, we reclustered underlying data from the Spatial Signatures Framework using K-means clustering (K=7). The resulting classes are:\nclass_labels_k7 = {\n    'Countryside agriculture': 0,\n    'Open sprawl': 1,\n    'Compact suburbia': 2,\n    'Urban': 3,\n    'Urban buffer': 4,\n    'Warehouse/Park land': 5,\n    'Wild countryside': 6\n}"
  },
  {
    "objectID": "notes/results.html#data-preprocessing",
    "href": "notes/results.html#data-preprocessing",
    "title": "Test and Verification Results",
    "section": "Data Preprocessing",
    "text": "Data Preprocessing\n\nScale\nBased on earlier experiments documented in the technical notes (Algorithm Design), we adopted a final analytical scale of 250×250 metres across Great Britain (GB).\nA significant issue in our dataset is class imbalance, with specific urban fabric classes being substantially underrepresented. This imbalance informed our decisions on model architecture and loss function selection, motivating exploration of specialised methods to handle imbalanced data. Yet, common modelling approaches were not sufficient, which means we had to resort to data augmentation methods, as described below.\n\n\n\nSampling Strategy\n\n\n\n\nHandling Imbalanced Dataset with Image Augmentation\nDue to the significant class imbalance, particularly the underrepresentation of urban classes, we implemented a sliding-window augmentation strategy for classes comprising less than 10% of the dataset (all classes except Countryside agriculture and Wild countryside).\nThis sliding-window approach systematically shifted the sampling window horizontally and vertically by increments of 50, 100, 150, and 200 metres, significantly increasing the volume of available training data for underrepresented classes.\n\n\n\nSliding Window Augmentation\n\n\nThe images below shows class distributions before (left) and after (right) augmentation:\n \nThe following table summarises augmentation results, highlighting the substantial increase in training samples for previously underrepresented classes:\n\n\n\n\n\n\n\n\nClass\nBefore Augmentation\nAfter Augmentation\n\n\n\n\nAccessible suburbia\n15,054\n129,620\n\n\nConnected residential neighbourhoods\n2,567\n21,021\n\n\nCountryside agriculture\n1,367,999\n1,367,999\n\n\nDense residential neighbourhoods\n4,299\n34,507\n\n\nDense urban neighbourhoods\n3,636\n31,657\n\n\nDisconnected suburbia\n2,644\n20,113\n\n\nGridded residential quarters\n1,518\n12,849\n\n\nOpen sprawl\n33,910\n292,884\n\n\nUrban buffer\n381,283\n381,283\n\n\nUrbanity\n2,495\n21,929\n\n\nWarehouse/Park land\n21,282\n195,105\n\n\nWild countryside\n1,395,048\n1,395,048"
  },
  {
    "objectID": "notes/results.html#changes-over-time-temporal-analysis",
    "href": "notes/results.html#changes-over-time-temporal-analysis",
    "title": "Test and Verification Results",
    "section": "Changes Over Time / Temporal Analysis",
    "text": "Changes Over Time / Temporal Analysis\nWe use the trained XGBoost classifier to make predictions across the years 2016 to 2021. The overall overlap between the initial year (2016) and final year (2021) remained high at 88%. This confirms that Spatial Signatures classes remained relatively stable across the study period. However, minor variations may indicate either genuine change or model uncertainty.\nWe measured urban fabric diversity using the Shannon Index across each year studied. The index showed limited variability over time, typically around 1.86–1.87, except for a noticeable spike in diversity in 2019 (2.007):\n\n2016 → 2017: 88%\n2017 → 2018: 88%\n2018 → 2019: 86%\n2019 → 2020: 86%\n2020 → 2021: 88%\n\n\nDiversity Analysis (Shannon Index)\nWe assessed changes in urban fabric diversity using the Shannon Index across the studied years. The results are summarised in the table below, indicating slight fluctuations, with the most notable increase in diversity occurring in 2019:\n\n\n\nYear\nShannon Index\n\n\n\n\n2016\n1.868\n\n\n2017\n1.863\n\n\n2018\n1.868\n\n\n2019\n2.007\n\n\n2020\n1.873\n\n\n2021\n1.872\n\n\n\nThe marked increase in the Shannon Index in 2019 suggests an increase in class diversity during that year, followed by a subsequent return to previous levels. This could point out some differences in the image as caused by weather or sensor in the year 2019.\n\n\nSpatial Patterns of Change\nSpatial analysis identified areas across England with frequent class transitions (map below), particularly around major urban centres and suburban zones. These frequent transitions may either represent genuine urban transformations or result from classifier uncertainty, especially in ambiguous zones between visually similar Spatial signatures classes.\n\n\n\nFrequency Map\n\n\nClass-specific analysis further highlighted particular Spatial signatures types prone to transitions. The figure below shows which classes experienced frequent transitions:\n\n\n\nClass Transitions\n\n\nTo better interpret these transitions, we calculated transition probabilities and organised them into a structured confusion matrix. This matrix clearly shows the urban fabric classes most likely to interchange over the studied period:\n\n\n\n‘Reasonable’ confusion matrix\n\n\nLastly, we analysed the inverse-probability-based distances of urban fabric classes over time. Shorter distances represent a higher likelihood of transitioning or changing classes from year to year, whereas longer distances indicate greater stability:\n\n\n\nProbability of change across classes\n\n\nThis analysis shows urban fabric classes such as Urbanity, Warehouse/Park land, Dense urban neighbourhoods, and Connected residential neighbourhoods have shorter inverse distances, indicating higher levels of dynamic change or redevelopment. Conversely, classes such as Wild countryside and Countryside agriculture have longer distances, suggesting greater temporal stability. Although these results align with expectations about urban and rural dynamics, they may also reflect the classifier’s varying uncertainty across these visually distinct environments."
  },
  {
    "objectID": "notes/results.html#limitations",
    "href": "notes/results.html#limitations",
    "title": "Test and Verification Results",
    "section": "Limitations",
    "text": "Limitations\nWhile the presented methods demonstrate strong potential for scalable urban classification, several limitations should be acknowledged:\n\nDependence on ground truth and input data quality While alternative datasets such as Overture or satellite-derived imagery allow broad geographic coverage, they cannot fully substitute for cadastral or on-the-ground verification data. The quality and consistency of input data - particularly building footprints - remain critical to model accuracy, especially at higher classification detail. Differences in data completeness or geometric fidelity can significantly impact performance across regions and classes.\nUncertainty in temporal and spatial predictions Evaluating the accuracy of predictions over time is inherently challenging due to the absence of ground truth data for intermediate years. Although the classifier identifies plausible transitions, particularly in suburban areas, it is difficult to distinguish genuine urban change from model uncertainty or noise introduced by seasonal imagery variation, cloud cover, or sensor differences.\nTransferability across geographic and morphological contexts The models demonstrate strong generalization within Great Britain and across several Central European countries. However, their performance varies in regions with distinct urban morphologies, socio-economic conditions, or planning traditions not well represented in the training data. Expanding the training set to include more diverse examples of urban fabric will likely improve transferability and robustness across broader European or global contexts."
  },
  {
    "objectID": "notes/results.html#footnotes",
    "href": "notes/results.html#footnotes",
    "title": "Test and Verification Results",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nCorbane, C. et al., 2020. A global cloud-free pixel-based image composite from Sentinel-2 data. Data in Brief, 31, p.105737.↩︎\nFleischmann, M. & Arribas-Bel, D., 2022. Geographical characterisation of British urban form using the spatial signatures framework. Scientific Data, 9(1), p.546.↩︎\nFleischmann and Arribas-Bel, 2024. Decoding (urban) form and function using spatially explicit deep learning. Computers, Environment and Urban Systems, 31, p.105737.↩︎"
  },
  {
    "objectID": "notes/impact_and_utility.html",
    "href": "notes/impact_and_utility.html",
    "title": "Stakeholder Impact and Utility Assessment",
    "section": "",
    "text": "Stakeholder Impact and Utility Assessment\nWe have presented the EuroFab project and related products at various events and sessions. At Urbis 24, the project sparked interest in fulfilling unmet data requirements for energy and climate applications, leading to a potential engagement with Covenant of Mayors members via interviews or surveys. The World Urban Forum facilitated the establishment of new stakeholder relationships, including productive sessions with the SSVA (Construction Sector Development Agency of the Ministry of Environment, Lithuania). Furthermore, we held numerous sessions with the Prague Institute of Planning and Development (IPR) and 4ct.\nWe have gathered multiple insights from the sessions, related to these areas: - Data Integration - Taxonomy Description and Naming - Comparative Urban Analysis: - Expanding Data Coverage - Reducing Manual Effort in Land Use Analysis - Geographical Scale of Results - Taxonomic Tree & Evaluation - Input data quality\nA significant finding from the stakeholder engagements is the strong interest in integrating the EuroFab data with land use, geodemographic, land value and other spatial datasets. However, stakeholders differed in their technical ability to make such a merger themselves. This led to discussions about multiple potential derived data products such as classifications that incorporate both morphological and land use or other functional information.\nThe stakeholders showed significant interest in the taxonomic tree, discussing both its advantages and disadvantages. Potential use cases included, identifying the relationships between different urban forms, as well as comparisons at different scales between regions and cities. SSVA, in particular, conducted a detailed evaluation of the hierarchy within the Lithuanian context and proposed several modifications so it fits better the local context.\nSignificant time was spend discussing the issues of how to describe and name the taxonomic tree and the clusters. Different applications required different names, and even the same application (for example, for land use planning), but in different countries required different names and descriptions. One discussed approach to this was to give clusters and the taxonomy abstract names that focus only on the morphology. This would later make it easier for users to adapt and refine the classification names and descriptions according to their specific needs and application contexts.\nA key application identified through discussions with 4ct, IPR, and SSVA is the use of EuroFab data for comparative urban analysis - stakeholders expressed a strong interest in leveraging the data to compare cities, regions, and even cross-border areas. This capability is seen as valuable for guiding planning decisions, facilitating knowledge transfer between local planning authorities and land developers, and understanding the factors that shape urban development patterns. This emphases on comparisons also underscored the need to expand the geographic coverage of the data.\nWe have already taken steps to address this requirement. Due to the new stakeholders from Lithuania, we had to process the urban fabric of the whole country. This required adjustments to the processing pipeline, which improved its scalability and performance and currently, its easier to include new countries in the analysis. We also note that even though Lithuania is excluded from the final modeling results with Microsoft and Overture Maps data, it is present in the interactive web application.\nThere were also multiple discussions with stakeholders about the geographical scale of the results. IPR expressed interest in both fine-grained units, such as morphotopes (local contiguous areas of similar urban morphology), and coarser aggregations, such as the hexagon-based aggregation featured in the web application. Conversely, 4ct and SSVA indicated a need for building-level information, as well as access to the raw data.\nRelated discussions covered input data quality and additional morphological variables to be included in the classification. The issues with the quality and inconsistencies of building footprints was raised multiple times, as well as problems with the street network. This was especially relevant for building height, which is a characteristic all stakeholders expressed interest in. However, we also discussed the unavailability of this data and the accuracy problems of existing building height data products.\nLastly, The Prague Institute of Planning and Development (IPR) highlighted the potential of EuroFab outputs to help with generating the official land use plan for the city. Furthermore, they expressed interest in potentially integrating the EuroFab data into their urban analytics products for Prague.\n\nNext steps\nCurrently, we are developing a formal survey, to gather and categorise this information so that it can guide future iterations of the Eurofab project."
  },
  {
    "objectID": "notes/data-selection.html",
    "href": "notes/data-selection.html",
    "title": "Reference Data Selection",
    "section": "",
    "text": "This technical notes offers an overview of the data used within the EuroFab project and the reasoning behind its selection. The project requires data falling into two categories - morphological data and AI data.\nThe data in the morphological category consists of two layers - one, reflecting raw urban fabric in suboptimal quality, but available for large parts of the globe; and two, a layer capturing the target classification the models developed in the project should predict based on the suboptimal data input. Therefore, we rely on Microsoft Open Buildings project for building footprints and Overture Maps Transportation layer for street networks, capturing the raw morphological elements, and the upcoming morphotope-based hierarchical classification of urban fabric developed at the Charles University, reflecting the target for the prediction (Fleischmann and Samardzhiev Forthcoming). Both of these layers cover Central Europe - Poland, Austria, Czechia, Slovakia and Germany.\nThe second category of data consists of openly available satellite imagery based on the GHS-composite-S2 R2020A dataset (Corbane et al. 2020) providing a cloud-free mosaic of visible RGB bands coming from the Sentinel 2 mission at 10m per pixel resolution. The satellite imagery will be used to predict another classification of urban fabric, paving the way for development of time-based classification in the future. The classification that is used as an input is using the open data product of British spatial signatures, covering the extent of Great Britain (Fleischmann and Arribas-Bel 2022).\nWe use different input classifications for the morphological and the AI components of the project to not block the development of the AI model. This is due to the limited duration of the project, and since the the morphotope-based classification became available only in Q4 2024. The expectation is that the two classifications are conceptually close enough and the model architecture developed for signatures can be later used to build equally or more precise predictive model for the morphotope-based classification."
  },
  {
    "objectID": "notes/data-selection.html#ground-truth-classification",
    "href": "notes/data-selection.html#ground-truth-classification",
    "title": "Reference Data Selection",
    "section": "Ground truth classification",
    "text": "Ground truth classification\nThe main aim of this project is to create a predictive model that is capable of classifying urban fabric. To achieve this we need to use existing urban fabric classifications as ground truth data for model training. We have chosen the (Fleischmann and Samardzhiev Forthcoming) classification to act as the ground truth, since it a classification that is detailed (using the resolution of individual buildings), consistent and scalable, while being fully data-driven, meaning there is no set of conceptual classes involved, providing closer representation of the nature of urban fabric in various diverse places around Central Europe. At the same time, it is based on the highest quality data available - building cadastre data from official sources. Since Fleischmann and Samardzhiev (Forthcoming) is upcoming work we describe its methodology and results in detail in this and in the Technical Note D2: Algorithm Design and Theoretical Basis Description.\nThe new classification (Fleischmann and Samardzhiev Forthcoming) extends the work of (Fleischmann et al. 2022), which has been used in numerous subsequent studies and official planning documents (Calafiore et al. 2023; Arribas-Bel and Fleischmann 2022; K. Samardzhiev et al. 2022) . It uses a combination of buildings and streets to generate Enclosed Tessellation Cells (ETCs), which are spatial units that are centred around buildings, and encapsulate the surrounding space that is nearest to them, rather than other buildings. ETCs boundaries are also limited by streets or a preset buffer distance from the centre of the building, which acts as the centre of the ETC. It is from this combination of buildings, streets and space, that the ETC can combine morphological characteristics of both streets, street intersections, buildings and blocks. The next step in Fleischmann and Samardzhiev (Forthcoming) is to measure different characteristics of the ETCs. A literature review carried out by Fleischmann, Romice, and Porta (2021) outlines a large number of possible variable that can be measured, of which Fleischmann et al. (2022) empirically suggests that there are around 74 unique ones that take into account the two dimensional nature of the data. (Fleischmann et al. 2022) use the full array of characters since they don’t know a priori which will be the important variables. (Fleischmann and Samardzhiev Forthcoming) uses a subset of 54 and the detailed list of characters is presented in the Algorithm design technical note, since both our method and (Fleischmann and Samardzhiev Forthcoming) share the same characters. Similar to (Fleischmann et al. 2022) the new clustering approach is split into two parts - defining fixed clusters and generating their taxonomy of based on their similarity, where the new approach uses regionalisation to capture the concept of a morphotope.\nConzen (1988), as reported in Larkham and Jones (1991), defines morphotopes as the ‘smallest urban localities obtaining distinctive character among their neighbours from their particular combination of characteristics of plan type, building type and land use’.The classification follows this defining and operationalises a morphotope as a set of spatially contiguous ETCs with a minimum of 75 elements, where the internal distance calculated based on the morphological characters is on average lower within the set, than to other sets. The morphotopes for every region are calculated in isolation and in parallel. The definition of the subregions guarantees that all elements that are spatially contiguous, or have any spatial leakage effects, i.e. adjacency or being part of the same street segment, are processed together in the same region. Once the morphotopes are delineated, the mean of the characters of their constituent ETCs are assigned them. Therefore, every morphotope has the same dimensionality as the ETCs that form it.\nThe second step is the creation of a taxonomy of morphotopes for the whole of Central Europe. This is achieved through the application of non-spatially restrained ward clustering at two stages - one regional and one global. The resulting hierarchy can be cut at different levels depending on the application. For example at low values, there is some regional information still preserved in the hierarchy - morphotopes from one city are merged to identical morphotopes from the same city. Whereas at higher levels, different types of urban fabric, emerge across countries.\nThe figure below shows a specific cutoff value, which separates different types of houses; from heterogenous historical urbanised areas; from recent modern urban developments such as apartment blocks and commercial areas; from large industrial areas.\n\n\n\nHigh-level urban fabrics\n\n\nMore detailed information about the methodology is available in the Technical Note D2, as we aim to follow it as closely as possible in this project.\n\nLimitations\nEven though all the data comes from official cadastre sources there is regional heterogeneity.\nOne limitation of the classification’s underlying data is that building unit boundaries are not recorded in a consistent manner. For example, a modernist housing block is sometimes represented as a single polygon, other times as multiple adjacent polygons, each of which representing a physical entrance to the unified building. This discrepancy adverse affects the calculation of some morphotopes related to adjacency, shape and size. In many cases this means that modernist housing estates are split based on these polygon boundaries delineations. In other cases, some modernist housing estates are treated by the algorithm as industrial areas, due to the sheer size of its units and the layout of the street network. To account for this, two preprocessing steps are carried out in the classification. First, auxiliary data is used in Czechia to combine all adjacent units into single, unified polygons for consistency. Second, an extra variable - indicating elongation and a low area to perimeter ratio is added to the hierarchy calculations. The motivation behind this variable is that non-industrial buildings are typically thin and elongated, laid out in complex patterns to maximise sunlight exposure. No extra information was used to calculate this indicator, only the morphometric characteristics already available.\nAnother limitation is that the definition of buildings is different in different regions in Central Europe. Hamburg and Berlin include train and tram lines, parking lots and parts of motorways as buildings in their official cadastre data. To limit the adverse effects of these additions, we drop any buildings that intersect overture streets in these two regions."
  },
  {
    "objectID": "notes/data-selection.html#building-footprints",
    "href": "notes/data-selection.html#building-footprints",
    "title": "Reference Data Selection",
    "section": "Building footprints",
    "text": "Building footprints\nBuilding footprints are one of the two core elements needed to generate morphometric classifications. Measurements of aspects of buildings provide the bulk of the information about the morphological character of a place. Many characters in the literature (Fleischmann, Romice, and Porta 2021), for example the ratio of perimeter shared with other connected buildings, require very high quality building footprints to accurately reflect the reality of the underlying topology. There are numerous available source of building footprints - official cadastre polygons; volunteer made OpenStreetMap data; Satellite-derived building footprints; or combinations of all of these such as Overture Maps or EUBUCCO. Each of these data sources come with their own drawbacks and advantages.\n\nAvailable sources\nThe highest quality available data is from official cadastre building footprints. These provide the ground truth information for official planning and administrative applications in many countries. However, the data is not always readily available and even when it is, it may require a high degree of preprocessing. For example, there is no readily available cadastre data to download for EU countries such as Hungary and Bulgaria. Even though data for Germany is available, it is split across 16 states, each of which has its own interface and data format. Furthermore, the data is not always comparable between countries reflective of the physical reality - for example in Czechia the official cadastre reflects ownership situation in some modernist apartment blocks, rather than the physical structure of the buildings, leading to the morphological inconsistency within the same data source, not mentioning the issue across the sources.\nAnother common source is OpenStreetMap (OSM) map, which is free and open geographical database generated by volunteers. In many cases the cadastre data is processed and put into OpenStreetMap, alongside volunteer contributions where official data is missing. The issues with OSM data are similar to cadastre data where the cadastre data is used as the basis and is even harder to process since the schema used for buildings is more generic. Furthermore, the quality is unequal - for example the data in Germany is very high quality, but in not in other countries like Italy or Bulgaria. The similar heterogeneity can be observed not only between countries but often within individual cities, with some districts being of a very high quality, others being more generalised and other completely missing.\nAnother available data source is satellite-derived building footprints, which are becoming more widely adopted due to advances in satellite technology and computer vision algorithms. They have successfully been used in applications for city boundary delineation, desegregating population and others (K. P. Samardzhiev 2023). There are multiple sources of global building footprints available - Google building footprints, Microsoft building footprints, ESRI community data, Overture maps, as well as other proprietary data. The advantage of satellite-derived building footprints data is that it is all derived in a consistent manner and covers large geographical areas. However, the quality is generally worse than other sources and the geometric topology capturing adjacent buildings is typically broken.\nThe newest available data, such as EUBUCCO (Milojevic-Dupont et al. 2023) or Overture Maps combine different types of other sources. Overture is based off of OSM, but adds a hierarchical structure of sources on top of it. The buildings from OSM are considered the ground truth and buildings from additional sources such as satellite data are added where there is no OSM data. This means that in general it has the highest number of available buildings. However, it comes with the same issues that OpenStreetMap data has, and it even further exasperates the data heterogeneity issues - in different places different data sources with different characteristics are merged. Thus, working with the data requires more preprocessing than other resources.\nSimilarly, the EUBUCCO is another data source that combines multiple datasets - official cadastre data and OpenStreetMap. Therefore it has the same advantages and disadvantages of its core sources. Furthermore, it has missing data issues that stem from the specific fusion approach of these sources. For example, there is a whole missing neighbourhood in central Prague and, in general, it has less buildings than the official cadastre data for the Central European study area.\n\n\n\nMissing data in central Prague\n\n\n\n\nMicrosoft building footprints\nIn this project, we use the Microsoft building footprints since they fully cover our study area - Poland, Czechia, Germany, Austria, Slovakia (i.e Central Europe). The dataset also has good worldwide coverage - they contain around 1.5 billion building polygons - and the footprints are derived in a consistent way, which ensures scalability of our method to different countries. It should be noted that our approach can also work for other consistently derived building polygons, Google Footprints for example, so long as all the data is generated from the same source.\nHowever, the data does not come without issues. For example, in dense urban centres entire blocks can be delineated as individual buildings. Given that morphology calculations rely on precise local topological relations between neighbours, such as two buildings touching, this problem renders a whole number of possible measurements described in (Fleischmann, Romice, and Porta 2021) meaningless. Furthermore, this issue affects even simpler calculations such as counting the number of buildings within a radius or topological neighbourhood. Other issues are that computer vision techniques sometimes miss entire buildings or misidentify building boundaries. Therefore, any approach that uses satellite-derived building footprints should be able to account for these three and potentially other problems.\n\n\n\nComparison between MS buildings and cadastre level buildings in central Prague"
  },
  {
    "objectID": "notes/data-selection.html#street-data",
    "href": "notes/data-selection.html#street-data",
    "title": "Reference Data Selection",
    "section": "Street data",
    "text": "Street data\nStreet network data is the other major data source used in numerical morphometric analysis. It is used to identify spatial relationships, delineate boundaries for other elements and calculate morphological features of the streets themselves, such as length or width. There are numerous sources for street network data, however the major one is OpenStreetMap and its derivate - Overture Maps.\n\nOverture transportation layer\nThe street network used in this study is a direct download from Overture maps, a processed subset of data from OpenStreetMap with some additions. OpenStreetMap has global coverage and high quality data, especially for vehicular roads, on actual physical layouts of the roads, as well as additional information on street type. We use Overture directly due to the fact that it is more accessible and easier to process, however the underlying geometry and information of the two data sources is identical.\nThe types of street segments used in the analysis are limited to the ones listed in Table 1.\n\n\n\nTypes of streets\n\n\n\n\nliving_street\n\n\nmotorway\n\n\nmotorway_link\n\n\npedestrian\n\n\nprimary\n\n\nprimary_link\n\n\nresidential\n\n\nsecondary\n\n\nsecondary_link\n\n\ntertiary\n\n\ntertiary_link\n\n\ntrunk\n\n\ntrunk_link\n\n\nunclassified\n\n\n\nAnother type of segment that is filtered out are tunnels , since the analysis strictly focuses on two dimensions and therefore undergrounds structures adversely affect the calculation of boundaries and characters."
  },
  {
    "objectID": "notes/data-selection.html#limitations-1",
    "href": "notes/data-selection.html#limitations-1",
    "title": "Reference Data Selection",
    "section": "Limitations",
    "text": "Limitations\nThere are two limitations, related to the alignment of the satellite-derived and cadastral building footprints - one temporal and one spatial. First, most cadastral data comes from a single year, whereas the satellite-derived building footprints come from images from multiple years. Second, the cadastral data has a larger spatial coverage and therefore there are areas with cadastral data, which as missing in the satellite-derived data. The second issue has a limited impact on the model training, since areas present in the cadastral data but not in satellite-derived polygons are ignored due to the spatial inner join. Nevertheless, both of these problems affect model evaluation and are promising areas of future research."
  },
  {
    "objectID": "notes/data-selection.html#satellite-imagery",
    "href": "notes/data-selection.html#satellite-imagery",
    "title": "Reference Data Selection",
    "section": "Satellite imagery",
    "text": "Satellite imagery\nWe use satellite images as input into the AI model to predict urban fabric. The satellite image data is sourced from the GHS-composite-S2 R2020A dataset (Corbane et al. 2020). This dataset is a global, cloud-free composite derived from Sentinel-2 L1C data, covering the period from January 2017 to December 2018. The composite images have a resolution of 10 meters per pixel and include three visible bands (red, green, and blue), which are well-suited for urban analysis.\nSentinel-2 data is particularly suitable for this application due to its consistent and openly available global coverage, which is ideal for projects requiring cross-regional comparisons. Its temporal flexibility, enabled by composites from multiple time points, allows for the analysis of urban patterns over time. With a resolution of 10 meters per pixel, Sentinel-2 provides the highest level of detail among openly available datasets, making it sufficient to distinguish urban features at the neighborhood scale. Additionally, its compatibility with many geospatial AI models pre-trained on Sentinel-2 data supports the use of existing methods and facilitates transfer learning."
  },
  {
    "objectID": "notes/data-selection.html#urban-fabric-classes",
    "href": "notes/data-selection.html#urban-fabric-classes",
    "title": "Reference Data Selection",
    "section": "Urban fabric classes",
    "text": "Urban fabric classes\nThe urban fabric predictions from our AI model are based on labels from the Spatial Signatures Framework (Arribas-Bel and Fleischmann 2022; Fleischmann and Arribas-Bel 2022), which provides a typology of British urban environments characterized by both form (physical structure) and function (usage). This framework captures the complexity of urban areas, offering insights into how different spaces look and operate. While our primary focus is on urban fabric classification centered on form—an approach that may be simpler since form is visible in imagery—we currently use the Spatial Signatures Framework as a proxy due to its conceptual alignment with our goals for urban characterization. This decision is also influenced by the limited duration of the project and the fact that the morphotope-based classification only became available in Q4 2024. To ensure progress in developing the AI model, we use separate input classifications for the morphological and AI components of the project. The expectation is that the two classifications are conceptually similar, allowing the model architecture developed for Spatial Signatures to later support building an equally or more precise predictive model for the morphotope-based classification."
  },
  {
    "objectID": "notes/technical_part_turing.html",
    "href": "notes/technical_part_turing.html",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "",
    "text": "This report includes the preliminary research and experiments run to design an AI model for making predictions on the urban fabric of England, as of November 2024."
  },
  {
    "objectID": "notes/technical_part_turing.html#data",
    "href": "notes/technical_part_turing.html#data",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Data",
    "text": "Data\n\nSatellite imagery (input)\nThe satellite image data used is accessed from the GHS-composite-S2 R2020A dataset 1. The dataset is a global, cloud-free image composite derived from Sentinel-2 L1C data, covering the period from January 2017 to December 2018. We use three bands (RGB) and the images have a resolution of 10 meters per pixel.\n\n\nUrban fabric classes (outcome)\nWe use labels from the Spatial Signatures Framework 2, which provides a typology of British urban environments based on both form (physical appearance) and function (usage). Spatial signatures capture complex urban characterizations, offering insights into how different areas look and operate. While our primary interest is in urban fabric classification focused on form—an approach we expect may be simpler since form is visible in imagery—this classification scheme is still under development. Therefore, we currently use the more comprehensive Spatial Signatures Framework as a proxy, as it aligns with the goals of urban characterization in our project."
  },
  {
    "objectID": "notes/technical_part_turing.html#data-preprocessing",
    "href": "notes/technical_part_turing.html#data-preprocessing",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Data preprocessing",
    "text": "Data preprocessing\nFor our analysis, we use two datasets of image tiles at different scales: larger tiles (224 x 224 pixels, covering 2240 x 2240 meters) for segmentation tasks, and smaller tiles (56 x 56 pixels, covering 560 x 560 meters) for classification tasks. The segmentation dataset includes 26,753 tiles (21,402 for training and 5,351 for testing), while the classification dataset consists of 403,722 tiles (342,648 for training and 61,074 for testing). For consistent sampling and comparison, we only use tiles that fully overlap with the spatial signatures, ensuring that each tile aligns with the urban form and function typology in our labeling framework. This alignment supports robust comparison of classification and segmentation outcomes on a pixel-level.\n\n\n\n\n\nA significant challenge in our dataset is class imbalance, where certain urban fabric types are substantially more represented than others. This imbalance influenced our decisions regarding model architecture and loss function selection, leading us to explore specialized approaches for handling uneven class distributions.\n\nTrain/test split\nWe split the dataset into 80% train and 20% test data. The test datasets for segmentation and classification overlap.\n \n\n\nUnbalanced dataset"
  },
  {
    "objectID": "notes/technical_part_turing.html#baseline-approach-approach-a",
    "href": "notes/technical_part_turing.html#baseline-approach-approach-a",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Baseline approach (Approach A)",
    "text": "Baseline approach (Approach A)\nThe tiles are fed into the geospatial foundation model SatlasPretrain 4 that has been pretrained with more than 302 million labels on a range of remote sensing and computer vision tasks.\nThe model operates in two main steps:\n\nFoundation Model: A vision transformer model with a feature pyramid network (FPN) and a pooling layer is used to derive image embeddings—lower-dimensional representations of the images (Fig. 2).\nMachine Learning Classifier: The image embeddings are then input into an XGBoost classifier to predict urban fabric classes across England.\n\nOur baseline model achieved a moderate prediction accuracy of approximately 61% with varying accuracy across the various spatial signature classes as seen in the figure below.\n\n\n\n\n\n\nResults across spatial signatures\n\n\n\n\n\nBaseline approach (ordinal)\nIn addition to the general classification task, we explored an ordinal regression task to account for the continuous nature of the spatial signatures, which are not strictly categorical. We applied the following ordinal mapping:\nordinal_mapping = {     'Wild countryside': 0,     'Countryside agriculture': 1,     'Urban buffer': 2,     'Open sprawl': 3,     'Disconnected suburbia': 4,     'Accessible suburbia': 5,     'Warehouse/Park land': 6,     'Gridded residential quarters': 7,     'Connected residential neighbourhoods': 8,     'Dense residential neighbourhoods': 9,     'Dense urban neighbourhoods': 10,     'Urbanity': 11, }\nThis ordinal approach produced a Mean Absolute Error (MAE) and Mean Squared Error (MSE) of 0.28, along with an R² score of 0.62. The Sankey diagram below highlights the primary misclassifications, which tend to occur between similar classes.\n\n\n\n\n\nBaseline approach + spatial context\nTo enhance model performance, we incorporated spatial context, enabling the model to account for regional location. We included H3 Level 5 hexagon identifiers as a categorical variable, where each hexagon (approximately 560x560 meters) encompasses around 80 tiles."
  },
  {
    "objectID": "notes/technical_part_turing.html#segmentation-approach-b",
    "href": "notes/technical_part_turing.html#segmentation-approach-b",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Segmentation (Approach B)",
    "text": "Segmentation (Approach B)\nIn Approach B, we fine-tuned a state-of-the-art geospatial foundation model for a segmentation task. We used the 224x224x3 image tiles as input. We evaluated three state-of-the-art foundation models, each with unique characteristics as listed below:\n\n\n\nModel\nArchitecture\nDataset Size\nImage Sources\n\n\n\n\nSatlas 5\nSwinT\n302M labels\nSentinel-2\n\n\nClay 6\nMAE/ViT\n70M labels\nMultiple+\n\n\nPrithvi 7\nMAE/ViT\n250 PB\nSentinel-2/Landsat\n\n\n\n+Multiple sources include Sentinel-2, Landsat, NAIP, and LINZ\nThe following visualisations show the varying model configurations for the three different approaches tested for the segmentation task. The main difference is the varying backbone.\n\nModel A: Satlas\n\n\n\n\n\n\n\n\nModel B: Clay\n\n\n\n\n\n\n\n\nModel C: Prithvi\n\n\n\n\n\nAfter fine-tuning each foundation model for 10 epochs, we observed the following performance metrics:\n\n\n\nMetric\nSatlas\nClay\nPrithvi\n\n\n\n\nWeighted Accuracy\n0.57\n0.72\n0.62\n\n\nWeighted IoU\n0.33\n0.58\n0.41\n\n\nWeighted F1\n0.41\n0.69\n0.58\n\n\nTraining Time/Epoch\n9 mins\n8 mins\n20 mins\n\n\nParameters\n90M\n86M\n120M\n\n\nImplementation Score\n5/10\n6/10\n7/10\n\n\n\nThe Clay model consistently outperformed other foundation models across all metrics, while also maintaining reasonable training times and computational requirements.\nLoss Function Impact: The choice of loss function significantly influenced model performance. Focal loss proved particularly effective in handling class imbalance, especially when combined with the Clay model architecture."
  },
  {
    "objectID": "notes/technical_part_turing.html#classification-approach-c",
    "href": "notes/technical_part_turing.html#classification-approach-c",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Classification (Approach C)",
    "text": "Classification (Approach C)\nFinally, in Approach C, we fine-tuned a geospatial foundation model for a classification task. We used the 56x56x3 image tiles as input.\nFor this approach we only used the Clay model as backbone, since it performed the best in the previous experiments.\nThe accuracy varied across the different classes as seen in the figure below:\n\n\n\n\n\nThis figure shows a comparison between the predicted classes for the fine-tuned geospatial foundation model with segmentation approach (B) and the classification (C).\n\n\n\n\n\n\nEvaluation Metrics\nWe employed multiple complementary metrics to evaluate model performance, as follows:\n\nIntersection over Union (IoU): This metric measures the overlap between predicted and ground truth segmentations, ranging from 0 (no overlap) to 1 (perfect overlap). IoU is calculated as the area of intersection divided by the area of union between the predicted and actual segmentation masks.\nWeighted F1 Score: This metric provides a balanced measure of precision and recall, particularly important for imbalanced datasets. It is calculated as the harmonic mean of precision (how many of the predicted positives are correct) and recall (how many of the actual positives were identified), weighted by class frequencies.\nWeighted Accuracy: This metric calculates the proportion of correct predictions, weighted by class frequencies to account for class imbalance. It provides a more representative measure of model performance across all classes, regardless of their frequency in the dataset."
  },
  {
    "objectID": "notes/technical_part_turing.html#overall-model-performance-comparison-pixel-level",
    "href": "notes/technical_part_turing.html#overall-model-performance-comparison-pixel-level",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Overall model performance comparison (Pixel-level)",
    "text": "Overall model performance comparison (Pixel-level)\nOur comprehensive evaluation revealed varying levels of performance across the three different approaches:\n\n\n\n\n\n\n\n\n\n\nApproach\nGlobal Accuracy\nMacro Accuracy\nF1 Score\nIoU\n\n\n\n\nClassification (embeddings)\n0.76 (0.66)\n0.22 (0.13)\n0.23\n0.63\n\n\nClassification + H3 level 5\n0.87 (0.82)\n0.42 (0.35)\n0.45\n0.79\n\n\nClassification + H3 ordinal\n0.80 (0.80)\n0.26 (0.26)\n0.26\n0.69\n\n\nClassification (Clay)\n0.59 (0.68)\n0.09\n0.12\n0.38\n\n\nSegmentation (Clay)\n0.73\n0.31\n0.30\n0.58\n\n\n\nThe baseline classification approaches demonstrated varying levels of success: - Basic embedding classification achieved 76% global accuracy (66% balanced) - Integration with H3 level 5 spatial indexing significantly improved performance to 87% global accuracy (42% balanced) - H3 level 5 ordinal classification reached 80% accuracy (26% balanced)\nThe fine-tuned geospatial foundation model performed better than the fine-tuned classification, with an accuracy score of 0.56 and 0.73 respectively.\nOverall, the baseline approach with regional information performed best. This approach is not only the best performing but also relatively efficient to implement. Once the image embeddings are created, the downstream classification can be done in minutes.\n\nPrediction example: London\nThe following figure shows an example of a prediction for the London area using the whole dataset. Each colour represents a different signature. The background colour represents the ground truth."
  },
  {
    "objectID": "notes/technical_part_turing.html#key-findings",
    "href": "notes/technical_part_turing.html#key-findings",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Key Findings",
    "text": "Key Findings\n\nRegional trends: The integration of regional information into the model significantly improving model performance across all metrics.\nModel performance::"
  },
  {
    "objectID": "notes/technical_part_turing.html#challenges-and-limitations",
    "href": "notes/technical_part_turing.html#challenges-and-limitations",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Challenges and Limitations",
    "text": "Challenges and Limitations\nOur research encountered several significant challenges:\n\nClass Imbalance: The dataset exhibited substantial variations in class representation, which impacted model performance. While focal loss helped address this issue, some classes remained challenging to predict accurately.\nComputational Resources: Training times varied significantly between models, with Prithvi requiring substantially more computational resources. This presents practical considerations for model deployment and scaling.\nComparison Complexity: The different tile sizes between classification (42px) and segmentation (224px) approaches made direct comparisons challenging, requiring careful consideration of evaluation metrics and methodology."
  },
  {
    "objectID": "notes/technical_part_turing.html#footnotes",
    "href": "notes/technical_part_turing.html#footnotes",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nCorbane, C. et al., 2020. A global cloud-free pixel-based image composite from Sentinel-2 data. Data in brief, 31, p.105737.↩︎\nFleischmann, M. & Arribas-Bel, D., 2022. Geographical characterisation of British urban form using the spatial signatures framework. Scientific Data, 9(1), p.546.↩︎\nBastani, F. et al., 2023. Satlaspretrain: A large-scale dataset for remote sensing image understanding. In Proceedings of the IEEE/CVF International Conference on Computer Vision, pp. 16772-16782.↩︎\nBastani, F. et al., 2023. Satlaspretrain: A large-scale dataset for remote sensing image understanding. In Proceedings of the IEEE/CVF International Conference on Computer Vision, pp. 16772-16782.↩︎\nCorbane, C. et al., 2020. A global cloud-free pixel-based image composite from Sentinel-2 data. Data in brief, 31, p.105737.↩︎\nhttps://huggingface.co/made-with-clay/Clay↩︎\nhttps://huggingface.co/ibm-nasa-geospatial/Prithvi-100M↩︎"
  },
  {
    "objectID": "notes/final_report.html",
    "href": "notes/final_report.html",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "",
    "text": "The spatial layout of the physical elements of cities affects most activities their residents undertake. Accessibility (Calafiore et al. 2023), subjective experience of the city and cost of housing (Qiu et al. 2022), as well as energy efficiency (Zhu et al. 2022) are some of the application areas where urban form is used to guide research, applications and policy. Due to the numerous patterns, scales and manifestations of urban form, researchers turn to classification as a method to reduce complexity and group the variations in urban form into classes. The derived classes vary depending on the application. Example coarse groups are continuous, discontinuous and non-urban land (European Environment Agency 1990). More detailed groupings capture the characteristics of streets and buildings, for example organic and gridiron streets (Araldi and Fusco 2024). These resulting classifications of urban form provide valuable insights into the structure of cities and towns, guide targeted policy applications, and form the backbone of urban planning.\nHowever, detailed, scalable, and consistent classifications that reflect the nature of the local data all at the same time are scarcely available. We often see conceptual classification, which has a tendency to oversimplify the structure when “zooming in”, loosing the interest of planners and policy-makers, i.e. Stewart and Oke (2012). The classifications developed by key members of the EuroFab project team overcome these limitations (Fleischmann and Samardzhiev Forthcoming; Fleischmann and Arribas-Bel 2022; Fleischmann et al. 2022), but are dependent on the availability of high quality data capturing urban form - individual buildings and related street networks. The issue is that these are not always readily available, even within the context of generally data-rich countries of the European region. Furthermore, even if countries have high quality building data, they are typically missing information on the temporal evolution of the elements.\nTherefore, there is a need to: one, derive detailed classifications at scale from suboptimal data that does not have the same qualities as, for example, cadastre would have; and two, add a temporal dimension to the classification which shows how it evolves over time. Such a novel classification can improve urban-form related research and policy applications, by providing researchers, policy makers and practitioners with unprecedented detail and temporal information on urban form. Existing work can be extended using the new detailed classes, while new avenues of research can be established using the temporal dimension.\nThe strategic goal of the project is to be the basis for subsequent work that will deliver a practically useful, detailed classification of all European urban fabric across time. The specific immediate aim of the current work is to develop a methodology capable of achieving the two objectives and verify its validity through a pilot study in Central Europe and the United Kingdom.\n\nThe basis for our work are two models - one based on satellite-derived building footprints; and a second, based on a direct use of Sentinel-2 visible bands. The overall approach is to use the first machine learning model to produce training data at scale for the second AI model, since currently such datasets do not exist, and to finally use the AI model to derive a detailed temporal classification of urban form in Europe. To further verify the validity of our approach and the usefulness of the results, we further carry out consultations with stakeholders from the private sector, local planning departments and government organisations. This work will give us insights into how to adapt the methodology and data for practical use cases.\nThe next three sections of the report describe in more detail the methodological approaches and results of the three work streams - the first machine learning morphological model, the second AI vision model, and the stakeholder engagement. The conclusion section interprets these findings and proposes how to scale the methodology for the whole of Europe, while highlighting potential limitations. The last Open Science section highlights the open source software and datasets developed during the project.\nMore details about the methodology, background and results of each stage of the project are available in the respective technical notes. The methodology and results from the report are being prepared for scientific publication in leading urban analytics journals."
  },
  {
    "objectID": "notes/final_report.html#methodology",
    "href": "notes/final_report.html#methodology",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Methodology",
    "text": "Methodology\nThe main aim of the morphological machine learning model is to show that the (Fleischmann and Samardzhiev Forthcoming) urban fabric classification, built on cadastre data, can be reproduced using more widely available data sources - building footprints derived from satellite imagery, voluntarily contributed building footprints, i.e. OpenStreetMap building footprints, or combinations of both - Overture Map. This model can be later used to expand the cadastral taxonomy and generate training data for the AI vision model.\nThe study area covers five countries in Central Europe - Germany, Poland, Slovakia, Austria, Czechia. These countries were chosen as they cover a large area demonstrating the ability of the methodology to scale and have a rich variety of urban form types, developed under different planning regimes.\nThe bulk of the morphological work can be summarised as:\n\nDeveloping a scalable pipeline to generate morphological characteristics from alternative building footprints\nAssignment of cadastral urban classes to the alternative building footprints ( the ground truth for the model training)\nTraining several models in different contexts and evaluating their ability to predict the assigned cadastral urban form classes , based on the features calculated in 1.\n\n\nMorphological data pipeline\n\nCore data\n\n\n\n\n\n\nFigure 1: Example unprocessed and processed street network.\n\n\n\n\n\n\n\n\n\nFigure 2: Comparison between building footprint data sources.\n\n\n\nThe core datasets used in the analysis are two types of building footprints - Microsoft Satellite Building footprints and Overture Maps building footprints - and street geometries from Overture Maps. The street network is a direct download from Overture Maps Transportation theme, a processed subset of data from OpenStreetMap, which has global coverage and high quality data. An example for Prague is shown in Figure 1.\nFigure 2 shows a comparison between the cadastral data, Microsoft building footprints and Overture Maps building footprints. Both types of datasets have issues compared to cadastral information, however they generally have larger coverage. Microsoft building footprints have almost global coverage and are heterogenous - they come from the same source. Overture Maps data is more detailed and a combination of datasets, it even includes some Microsoft footprints. But this heterogeneity can make statistics calculated in different areas within the whole dataset incomparable to each other.\n\n\nMorphological pipeline\nThe morphometric characterisation is directly derived from the method of (Fleischmann and Samardzhiev Forthcoming) to ensure that we minimise conceptual differences between the methodological backbone used to derive the target classification and the data used within our model. Therefore, we focus the morphological characterisation around the concept of Enclosed Tessellation Cells (Fleischmann et al. 2022) - “the portion of space that results from growing a morphological tessellation within an enclosure delineated by a series of natural or built barriers identified from the literature on urban form, function and perception”. In this definition, the morphological tessellation is a delineation of the space based on Voronoi polygons centred around buildings and an enclosure is any area enclosed by streets. The boundaries of ETCs also represent the closest area of land to each building, than to any other building within an enclosure, and therefore can act as the unit that combines aspects of building and street morphological characteristics.\nBroadly the pipeline can be summarised as:\n\nStreet & building preprocessing. This includes downloading the streets and buildings, simplifying the street network, and fixing topological issues with the building footprints.\nGenerating derived morphological elements - street nodes, street enclosures, Enclosed Tessellation cells.\nCalculating 52 morphological characteristics which capture aspects of all individual elements (i.e. building area or perimeter), as well as their interactions - for example, buildings per street or number of reachable ETCs within five topological steps of the street network.\n\nThis pipeline results in around 62 million ETCs with 52 morphological characteristics for the Microsoft data, and around 88 million ETCs with 52 morphological characteristics for the Overture Maps data.\n\n\n\nGround truth classes\n\n\n\nTable 1: Cluster descriptions\n\n\n\n\n\n\n\n\n\nCluster name\nCluster Description\n\n\n\n\nDense Connected Developments\nIn this cluster, the built-up density and local street connectivity are high, while inter-building distances remain relatively small. Buildings frequently share walls, forming larger structures along relatively short and narrow streets.\n\n\nLarge Interconnected Blocks\nThis cluster has very high built-up density and local street connectivity, with narrow and short streets. It is primarily characterised by a high count of connected buildings forming enclosed blocks with courtyards. Furthermore, the distances between the formed blocks is small.\n\n\nDense Standalone Buildings\nThis cluster has moderate to high built-up density and local street connectivity, with longer and wider streets compared to other dense developments. Shared walls between buildings are less common, and distances within buildings are moderate, reflecting a pattern of standalone structures within a robust street network .\n\n\nCompact Development\nDevelopment in this cluster is characterised by a high number of buildings and relatively dense local street connectivity, with short and narrow streets. Shared walls appear regularly, and inter-building distances are relatively small, with building sizes being typically small and uniform.\n\n\nCul-de-Sac Layout\nDevelopment in this cluster is characterised by a moderate to high built-up density, short and moderately dense locally street connectivity. A distinguishing feature is the significant presence of cul-de-sacs. The buildings along the streets are relatively smaller, and more numerous, than in Aligned Winding Streets.\n\n\nAligned Winding Streets\nThis cluster has low to moderate built-up and street connectivity. Buildings exhibit a consistent alignment among themselves and also along streets of varying length, width and linearity. There is also a significant number of shared walls between structures.\n\n\nSparse Rural Development\nThis cluster has a sparse built-up area with low street connectivity and messiness. The streets are long and the widest in the taxonomy, while the distance between buildings is the largest. Adjacency between structures is also the lowest.\n\n\nDispersed Linear Development\nThis cluster has a moderate built up area and the lowest local street connectivity in the taxonomy, typically forming long linear villages. Its streets are the longest, linear, wide and have considerable distances between street intersections, and minimal shared walls between structures.\n\n\nLinear Development\nThis cluster has a moderate built up area and the low local street connectivity in the taxonomy, typically forming long linear villages. Its streets are long, linear, wide and there are minimal shared walls between structures. Its distinguishing features from “Extended Linear Development” is the shorter streets and relatively higher street connectivity.\n\n\nSparse Open Layout\nThis cluster is characterized by low built-up density, low street connectivity, large distances between buildings, few shared walls, and large open spaces around buildings. The streets are few, open and wide. The buildings are moderate in size and more diverse than those in the Sparse Road-Linked Development cluster.\n\n\nSparse Road-Linked Development\nThis cluster is characterized by low built-up density, low street connectivity, large distances between buildings, few shared walls, and large open spaces around buildings. The streets are few, open and wide. In contrast, with ‘ Sparse Open Layout’ the buildings are smaller and more uniform.\n\n\nLarge Utilitarian Development\nThis cluster consists of the largest buildings with notable variations in size and shape, as well as low to moderate street connectivity and wide streets. The design does not emphasise sunlight exposure, creating broad but less refined configurations, typical of industrial and other service areas.\n\n\nExtensive Wide-Spaced Developments\nThis cluster consists of the large buildings with moderate variations in size and shape, as well as low to moderate street connectivity and wide streets. The resulting environment is spacious, with significant open areas between structures, typical of modernist housing.\n\n\n\n\n\n\n\n\n\n\nTable 2: Taxonomic tree\n\n\n\n\n\n\n\n\n\n\n\nLevel 1\nLevel 2\nLevel 3\nLevel 4\n\n\n\n\nTraditional Street Network\nCentral Urban Developments\nCentral Urban Developments\nDense Connected Developments\n\n\n\n\n\nLarge Interconnected Blocks\n\n\n\nTraditional Urban Developments\nDense Urban Developments\nDense Standalone Buildings\n\n\n\n\n\nCompact Development\n\n\n\n\nStreet-aligned Developments\nAligned Winding Streets\n\n\n\n\n\nCul-de-Sac Layout\n\n\nUtilitarian Street Network\nUtilitarian street network\nLarge Scale Developments\nLarge Utilitarian Development\n\n\n\n\n\nExtensive Wide-Spaced Developments\n\n\n\n\nSparse Road Network Developments\nSparse Open Layout\n\n\n\n\n\nSparse Road-Linked Development\n\n\n\nLinear & Rural Development\nLinear Road Network Developments\nDispersed Linear Development\n\n\n\n\n\nLinear Development\n\n\n\n\nSparse Rural Development\nSparse Rural Development\n\n\n\n\n\n\nThe taxonomy of ground truth classes from (Fleischmann and Samardzhiev Forthcoming) and available as an interactive map online at HiMOC is presented in Table 2. The descriptions for the level 4 classes are available in Table 1. All subsequent analysis focuses on Levels 3 and 4. The target labels from this are assigned to each building from the morphological pipeline based on spatial intersections.\n\n\nModelling scenarios\n\n\n\n\n\n\nFigure 3: Train/test data splits for different models.\n\n\n\nFigure 3 shows the all experiments that will be performed for each dataset. The main goal with so many training / testing configurations is to get detailed statistics about the expected model performance in realistic scenarios - predicting urban form in various types of new environments. Two models - a global random model and a global spatially explicit model - are trained to highlight the effects of spatial lag in model training and testing, while the country specific models are trained to evaluate the ability of the models to generalise outside of the training data scope. The train / test configuration for the spatially explicit model first delineates the study area into h3 level second hexagon cells with an area of around 500 sqm. The dataset is then split into train and test subsets randomly, but ensuring that all buildings within a hexagon are either part of the train or test subset.\nIn total we test 24 models to gain information about the predictability of detailed urban form classes. All experiments are repeated independently for each dataset - once for the Overture and once for the Microsoft building footprints - and for each of Level 3 and Level 4 of the taxonomy. This is done to verify in which cases, what data can be used to derive detailed urban form classifications. The models for each experiment are HistogramGradientBoostingClassifier and share the same parameters - no max depth, no max leaf nodes, max_features = 0.5, learning_rate = .03 ."
  },
  {
    "objectID": "notes/final_report.html#results",
    "href": "notes/final_report.html#results",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Results",
    "text": "Results\n\n\n\nTable 3: Overall F1 scores at level 3\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.74\n0.66\n0.59\n0.54\n0.60\n0.59\n0.63\n0.56\n\n\nMicro F1\n0.74\n0.65\n0.57\n0.53\n0.61\n0.58\n0.62\n0.53\n\n\nMacro F1\n0.73\n0.63\n0.48\n0.45\n0.54\n0.47\n0.49\n0.45\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.74\n0.66\n0.59\n0.51\n0.61\n0.62\n0.65\n0.59\n\n\nMicro F1\n0.74\n0.66\n0.58\n0.50\n0.61\n0.61\n0.63\n0.56\n\n\nMacro F1\n0.74\n0.64\n0.50\n0.46\n0.57\n0.49\n0.53\n0.47\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 4: Individual F1 scores for level 3 clusters\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nCentral Urban Developments\n0.62\n0.56\n0.46\n0.37\n0.45\n0.51\n0.50\n0.47\n\n\nDense Urban Developments\n0.73\n0.67\n0.65\n0.64\n0.70\n0.64\n0.66\n0.62\n\n\nLarge Scale Developments\n0.54\n0.46\n0.42\n0.34\n0.55\n0.37\n0.39\n0.42\n\n\nLinear Road Network Developments\n0.87\n0.67\n0.36\n0.45\n0.59\n0.36\n0.20\n0.20\n\n\nSparse Road Network Developments\n0.79\n0.71\n0.64\n0.52\n0.70\n0.61\n0.73\n0.64\n\n\nSparse Rural Development\n0.87\n0.71\n0.38\n0.31\n0.46\n0.18\n0.47\n0.47\n\n\nStreet-aligned Developments\n0.70\n0.63\n0.46\n0.56\n0.33\n0.59\n0.49\n0.32\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nCentral Urban Developments\n0.74\n0.69\n0.59\n0.41\n0.62\n0.67\n0.65\n0.62\n\n\nDense Urban Developments\n0.72\n0.67\n0.65\n0.64\n0.69\n0.64\n0.66\n0.63\n\n\nLarge Scale Developments\n0.54\n0.45\n0.40\n0.36\n0.55\n0.36\n0.38\n0.34\n\n\nLinear Road Network Developments\n0.86\n0.66\n0.38\n0.46\n0.60\n0.36\n0.26\n0.23\n\n\nSparse Road Network Developments\n0.78\n0.70\n0.64\n0.49\n0.69\n0.60\n0.73\n0.67\n\n\nSparse Rural Development\n0.85\n0.71\n0.39\n0.36\n0.47\n0.16\n0.51\n0.47\n\n\nStreet-aligned Developments\n0.69\n0.62\n0.46\n0.49\n0.35\n0.60\n0.51\n0.35\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 5: Overall F1 scores at Level 4\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.59\n0.52\n0.38\n0.38\n0.42\n0.36\n0.44\n0.29\n\n\nMicro F1\n0.59\n0.52\n0.37\n0.38\n0.42\n0.37\n0.40\n0.28\n\n\nMacro F1\n0.59\n0.49\n0.30\n0.30\n0.35\n0.31\n0.30\n0.26\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nWeighted F1\n0.70\n0.55\n0.41\n0.35\n0.43\n0.41\n0.49\n0.39\n\n\nMicro F1\n0.70\n0.54\n0.40\n0.34\n0.43\n0.41\n0.46\n0.36\n\n\nMacro F1\n0.71\n0.54\n0.34\n0.30\n0.38\n0.35\n0.36\n0.32\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 6: Individual F1 scores for level 4 clusters\n\n\n\n\n\n\n\n(a) Microsoft building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nAligned Winding Streets\n0.51\n0.45\n0.28\n0.35\n0.21\n0.36\n0.28\n0.18\n\n\nCompact Development\n0.59\n0.55\n0.13\n0.15\n0.09\n0.24\n0.09\n0.08\n\n\nCul-de-Sac Layout\n0.57\n0.52\n0.43\n0.52\n0.31\n0.52\n0.47\n0.32\n\n\nDense Connected Developments\n0.50\n0.46\n0.33\n0.29\n0.29\n0.45\n0.33\n0.29\n\n\nDense Standalone Buildings\n0.63\n0.56\n0.54\n0.53\n0.65\n0.38\n0.55\n0.57\n\n\nDispersed Linear Development\n0.91\n0.64\n0.19\n0.17\n0.34\n0.18\n0.06\n0.18\n\n\nExtensive Wide-Spaced Developments\n0.41\n0.31\n0.25\n0.25\n0.46\n0.13\n0.19\n0.25\n\n\nLarge Interconnected Blocks\n0.36\n0.28\n0.24\n0.22\n0.17\n0.37\n0.30\n0.15\n\n\nLarge Utilitarian Development\n0.49\n0.40\n0.32\n0.23\n0.34\n0.36\n0.34\n0.34\n\n\nLinear Development\n0.73\n0.50\n0.28\n0.37\n0.43\n0.29\n0.13\n0.16\n\n\nSparse Open Layout\n0.62\n0.56\n0.31\n0.14\n0.36\n0.32\n0.50\n0.24\n\n\nSparse Road-Linked Development\n0.57\n0.46\n0.27\n0.40\n0.32\n0.29\n0.17\n0.19\n\n\nSparse Rural Development\n0.79\n0.69\n0.39\n0.29\n0.54\n0.17\n0.49\n0.47\n\n\n\n\n\n\n\n\n\n\n\n\n\n(b) Overture building footprints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRandom\nSpatial\nOoS\nSK\nPL\nDE\nAT\nCZ\n\n\n\n\nAligned Winding Streets\n0.61\n0.46\n0.29\n0.28\n0.27\n0.37\n0.31\n0.25\n\n\nCompact Development\n0.66\n0.55\n0.16\n0.09\n0.12\n0.30\n0.18\n0.11\n\n\nCul-de-Sac Layout\n0.65\n0.51\n0.42\n0.48\n0.31\n0.50\n0.47\n0.32\n\n\nDense Connected Developments\n0.67\n0.58\n0.43\n0.30\n0.44\n0.58\n0.39\n0.44\n\n\nDense Standalone Buildings\n0.69\n0.57\n0.53\n0.53\n0.63\n0.36\n0.53\n0.61\n\n\nDispersed Linear Development\n0.96\n0.65\n0.16\n0.09\n0.31\n0.16\n0.07\n0.19\n\n\nExtensive Wide-Spaced Developments\n0.52\n0.36\n0.27\n0.30\n0.47\n0.13\n0.23\n0.22\n\n\nLarge Interconnected Blocks\n0.69\n0.60\n0.46\n0.41\n0.35\n0.57\n0.57\n0.42\n\n\nLarge Utilitarian Development\n0.60\n0.44\n0.37\n0.28\n0.37\n0.42\n0.38\n0.41\n\n\nLinear Development\n0.88\n0.53\n0.30\n0.37\n0.44\n0.29\n0.21\n0.18\n\n\nSparse Open Layout\n0.74\n0.61\n0.36\n0.07\n0.38\n0.34\n0.61\n0.38\n\n\nSparse Road-Linked Development\n0.72\n0.49\n0.29\n0.37\n0.34\n0.32\n0.21\n0.21\n\n\nSparse Rural Development\n0.88\n0.71\n0.41\n0.35\n0.55\n0.15\n0.50\n0.47\n\n\n\n\n\n\n\n\n\n\n\n\nDiscussion\n\nUrban Morphology\n\n\n\n\n\n\nFigure 4: Confusion matrix for the Spatial model Level 4 predictions. Normalised by the True Label (row-wise)\n\n\n\nWith regard to urban morphology, the results show that deriving detailed urban morphology classes from alternative data sources is possible. However, morphological types are heterogeneous, and the characteristics and factors that are important vary across scales of dissimilarity.\nThe modelling results show that a lot of useful information can be learned morphologically from one country and transferred to new contexts. Table 3 shows that at Level 3, the out-of-sample (OoS) averages are close to the spatial split F1 score of approximately 0.6. This is comparable to other land use prediction models, with two caveats. First, we are making predictions at a much higher level of detail—the individual building level—than typical land use models. Second, we test the models in a more difficult but more realistic scenario and report the possible out-of-sample scores. Furthermore, the higher scores in Table 3, as well as the confusion matrix in Figure 4, also suggest that we make reasonable misclassifications—one class at Level 4 is often misclassified as another Level 4 class within the same Level 3 category, i.e., part of the same branch in the ground truth taxonomy. If this were not the case, the Table 3 F1 scores would be equal to or lower than the Table 5 scores.\nNevertheless, in spite of these results, urban morphology remains highly heterogeneous. The differences between the country-specific models reflect the ability to use information from the analysed urban forms of several countries to infer the urban form type in an unseen country. If the results across these models were similar, it would imply that urban form is similar across countries. The large differences suggest that underlying national phenomena affect morphology. While this in itself is not a new finding, it has not been quantitatively demonstrated before, especially based on tens of morphological characteristics calculated using tens of millions of urban geometries across several countries.\nThis heterogeneity, however, varies. Austria has, on average, the most similar morphology to the other four Central European countries, whereas Czechia and Slovakia are the most different. The level of morphological detail at which the analysis is carried out also has an effect. At Level 3 of the morphological taxonomic tree the results across countries are relatively more similar than at Level 4. Furthermore, Dense Standalone Buildings , Large Interconnected Blocks , Large Utilitarian Development, are more predictable across all the country models than other classes.\nIdentifying different types of urban form also requires specific types of characteristics and data quality. The relative overall similarity between the scores in Table 3 (a) and Table 3 (b) suggests that, except in the case of Central Urban Developments, building polygon quality is not that important. Conversely, since the street network is shared, the results show the importance of the street network and how it can compensate for poor-quality building footprint data. As the required level of detail increases, however (see Table 5 (a) and Table 5 (b)), data quality and aspects of building morphology such as adjacency, configuration, and shape become more important.\n\n\nMorphological data\nThe results also suggest that heterogeneous but more detailed data is preferable to homogeneous but coarser data for urban morphological analysis. Furthermore, the morphological pipeline developed for cadastre data can be run without modification on both the Microsoft (homogeneous, generally more detailed) and Overture maps data (heterogeneous, generally more detailed).\nThe overall higher or equivalent performance of Overture maps data shows that this data should be used when possible to identify urban morphological types for countries not in the training data. Overture maps’ schema and easy access to the OpenStreetMap street networks are additional benefits. Taken together, the results show that, overall, when cadastre data is not available, Overture maps data should be used in place of satellite-derived footprints.\nThe consistently higher performance of the spatial models also suggests using as much data as possible in model training, from any source, since it provides some local context.\n\n\nSpatial modelling\nThe results from the comparisons highlight the need for complex train/testing dataset splits when training models in the presence of spatial autocorrelation. When reporting accuracy scores, many land use prediction models do not take into account spatial autocorrelation. As consistently shown in the F1 score tables in this work, this results in artificially higher scores. Even worse, in the case of more complex models, they may not be learning the weights necessary to perform inference, but rather overfitting and memorising the training data. This work further shows that, for urban morphological predictions and analysis specifically, spatial leakage is ubiquitous.\nThere are other works and papers that have highlighted the need for spatially stratified training of models. They suggest various schemes to split the data spatially - predefined grids or locally derived boundaries or other approaches all together. What this paper further highlights is the need to consider not just the specific type of spatial stratification, but the scale of stratification as well. The consistently lower scores for the spatial split and the individual countries models highlight the fact that there is spatial autocorrelation of morphological features at multiple scales - local, as defined in this work based on h3 level 7 grid cells, and national as defined by national boundaries.\nIn the specific case of urban morphology, there are also other possible scales to consider, such as regional or city-level, which could also affect predictions. We focused specifically on the national scale, since data quality from OpenStreetMap varies widely at that level. Furthermore, the most common use case for the model would be to predict morphological classes for an entire country that is not part of the training data. Nevertheless, the implications of our results are that when modelling spatial phenomena using machine learning models, train/test splits should account for the specific properties of the phenomenon under analysis. Works that do not explicitly do this risk reporting artificially high accuracies that do not reflect real model use cases."
  },
  {
    "objectID": "notes/final_report.html#data-and-methods",
    "href": "notes/final_report.html#data-and-methods",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Data and Methods",
    "text": "Data and Methods\n\nSatellite Imagery\nWe utilised two different sets of satellite images derived from Sentinel-2 imagery:\n\nGHS-composite-S2 R2020A dataset (Corbane et al. 2020): Covering January 2017 to December 2018, this dataset offers cloud-free, consistent, high-quality RGB (red, green, blue band) composite imagery at a resolution of 10 meters per pixel. We used these images of Great Britain (GB) to train our prediction model.\nAnnual Sentinel-2 composites: Created for each year from 2016 to 2021, these composites include only cloud-free RGB images from their specific year. We acquired these using the Google Earth Engine API through automated Python scripts (as described in GEE pipeline).\n\nSentinel-2 data is particularly suitable for our application due to several advantages:\n\nConsistent and openly available global coverage, ideal for cross-regional comparisons\nTemporal flexibility through composites from multiple time points, allowing analysis of urban patterns over time\nResolution of 10 meters per pixel, providing sufficient detail to distinguish urban features at the neighbourhood scale\nCompatibility with many pre-trained geospatial AI models, facilitating transfer learning\n\n\n\nUrban Fabric Classes\nThe urban fabric predictions from our AI model are based on labels from the Spatial Signatures Framework (Arribas-Bel and Fleischmann 2022; Fleischmann and Arribas-Bel 2022), which provides a typology of British urban environments characterised by both form (physical structure) and function (usage). This framework captures the complexity of urban areas, offering insights into how different spaces look and operate.\nWhile our primary focus is on urban fabric classification centred on form—an approach that may be simpler since form is visible in imagery—we currently use the Spatial Signatures Framework as a proxy due to its conceptual alignment with our goals for urban characterisation. This decision was influenced by the limited project duration and the fact that the morphotope-based classification only became available in Q4 2024.\nTo ensure progress in developing the AI model, we use separate input classifications for the morphological and AI components of the project. The expectation is that the two classifications are conceptually similar, allowing the model architecture developed for Spatial Signatures to later support building an equally or more precise predictive model for the morphotope-based classification."
  },
  {
    "objectID": "notes/final_report.html#model-design",
    "href": "notes/final_report.html#model-design",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Model Design",
    "text": "Model Design\n\nClassification vs. Segmentation\nIn satellite image analysis, classification and segmentation address spatial labelling at different levels of granularity:\n\nClassification: Assigns a single urban fabric type to an image tile, offering generalised insights into dominant urban characteristics without the need for pixel-perfect alignment.\nSegmentation: Assigns urban fabric types at a pixel level, providing detailed boundary-specific mapping but facing challenges due to ambiguous class boundaries in urban environments.\n\nIn our study, the label dataset does not always correspond directly to identifiable features in the imagery, making classification a potentially more suitable approach as it generalises each tile’s dominant land cover type without requiring exact pixel alignment. However, we explored both approaches to evaluate how each method performs given the scale and nature of the dataset.\n\n\nScale\nWe tested multiple scales for our analysis: - Segmentation at the pixel level (preprocessed into 224×224 pixel tiles for compatibility with downstream models) - Classification at scales of 56×56 pixels (560×560 meters on the ground) and 25×25 pixels (250×250 meters on the ground)\n\n\nSampling\nWe evaluated two sampling approaches to assess their impact on spatial generalisation and F1-score performance:\n\nRandom sampling: Ensures diversity and captures localised patterns, but risks spatial leakage, potentially inflating performance metrics.\nH3 resolution 3 regional sampling: Reduces spatial leakage and offers a more realistic evaluation of generalisation but can suffer from unfair penalisation due to the heterogeneity of regions."
  },
  {
    "objectID": "notes/final_report.html#experimental-approaches",
    "href": "notes/final_report.html#experimental-approaches",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Experimental Approaches",
    "text": "Experimental Approaches\nWe structured experiments around three distinct modelling approaches:\n\nApproach A: Baseline model employing SatlasPretrain embeddings coupled with an XGBoost classifier.\nApproach B: Fine-tuned three geospatial foundation models (Satlas, Clay, Prithvi) specifically for segmentation tasks.\nApproach C: Fine-tuned the Clay model for classification tasks based on its superior segmentation performance."
  },
  {
    "objectID": "notes/final_report.html#model-evaluation",
    "href": "notes/final_report.html#model-evaluation",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Model Evaluation",
    "text": "Model Evaluation\nMultiple metrics were utilised to comprehensively evaluate model performance:\n\nWeighted Accuracy (Macro): Reflects overall predictive accuracy adjusted for class frequency.\nWeighted F1 Score: Balances precision and recall, particularly crucial for handling imbalanced datasets."
  },
  {
    "objectID": "notes/final_report.html#ai-model-results",
    "href": "notes/final_report.html#ai-model-results",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "AI Model Results",
    "text": "AI Model Results\nOur experimental results demonstrated that classification approaches outperformed segmentation methods. This was not only in terms of accuracy but also in the shapes that were predicted. While the 56×56 pixel scale (560×560m) yielded marginally better statistical performance, we determined that the 25×25 pixel scale (250×250m) offered a more appropriate resolution for policy applications and urban planning contexts. A key finding was that incorporating regional context through H3 spatial indexing significantly enhanced predictive performance across all configurations. Models combining embeddings with H3 contextual information provided the most balanced performance, substantially outperforming other approaches on all metrics. Notably, when comparing sampling strategies, we observed that H3 regional sampling showed slightly lower performance metrics than random sampling, suggesting potential spatial leakage in the random sampling approach that may artificially inflate performance metrics.\nThe results in the table below represent either pixel-level values or tile level values in brackets.\n\n\n\n\n\n\n\n\n\n\n\n\n\nApproach\nScale\nSampling\nClas/seg\nRegional info\nGlobal Acc\nMacro Acc\nF1 (macro)\n\n\n\n\nC (Clay)\n1x1\nrandom\nsegmentation\n\n0.73\n0.31\n0.30 (0.58)\n\n\nC (Satlas)\n1x1\nrandom\nsegmentation\n\n0.57\n\n(0.41)\n\n\nC (Prithvi)\n1x1\nrandom\nsegmentation\n\n0.62\n\n(0.42)\n\n\nA (embeddings)\n25x25\nrandom\nclassification\n\n(0.73)\n(0.31)\n(0.30)\n\n\nA (embeddings)\n25x25\nrandom\nclassification\n\n(0.81)\n(0.46)\n(0.53)\n\n\nA (embeddings)\n25x25\nrandom\nclassification\nlat/lon\n(0.89)\n(0.71)\n(0.78)\n\n\n\n25x25\nrandom\n\nlat/lon\n(0.91)\n(0.78)\n(0.83)\n\n\nA (embeddings)\n25x25\nH3 res 3 (55,743)\nclassification\nH3 res 5 (lat/lon)\n(0.58)\n(0.15)\n(0.15)\n\n\nA (embeddings)\n25x25\nH3 res 5 (2,125)\nclassification\nH3 res 5 (lat/lon)\n(0.65)\n(0.20)\n(0.21)\n\n\nA (embeddings)\n25x25\nH3 res 6 (335)\nclassification\nH3 res 5 (lat/lon)\n(0.72)\n(0.29)\n(0.32)\n\n\nA (embeddings)\n56x56\nrandom\nclassification\n\n0.76 (0.66)\n0.22 (0.13)\n0.23\n\n\nA (embeddings)\n56x56\nrandom\nclassification\nH3 res 5 (cat)\n0.87 (0.82)\n0.42 (0.35)\n0.45\n\n\nA (embeddings)\n56x56\nrandom\nclassification\nH3 res 5 (lat/lon)\n0.87 (0.81)\n0.39 (0.31)\n0.42\n\n\nA (embeddings)\n56x56\nrandom\nregression (ordinal)\nH3 res 5 (lat/lon)\n0.80 (0.80)\n0.26 (0.26)\n0.26\n\n\nB (Clay)\n56x56\nrandom\nclassification\n\n0.59 (0.68)\n0.09\n0.12\n\n\n\nBased on these insights, our final model implements a Satlas embedding architecture operating at the 25×25 pixel scale (250×250m resolution) with integrated H3 resolution 5 regional context, optimising the balance between spatial detail and classification accuracy while ensuring robust generalisation to diverse urban environments."
  },
  {
    "objectID": "notes/final_report.html#final-model",
    "href": "notes/final_report.html#final-model",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Final Model",
    "text": "Final Model\n\nAddressing Class Imbalance\nSignificant class imbalance, particularly for urban classes, posed a considerable challenge in our modelling. To mitigate this, we implemented a sliding-window augmentation strategy for classes comprising less than 10% of the dataset (all classes except Countryside agriculture and Wild countryside).\nThis sliding-window approach systematically shifted the sampling window horizontally and vertically by increments of 50, 100, 150, and 200 meters, significantly increasing the volume of available training data for underrepresented classes.\n\n\n\nSliding Window Augmentation\n\n\nThe images below show class distributions before (left) and after (right) augmentation:\n \nThe following table summarises augmentation results, highlighting the substantial increase in training samples for previously underrepresented classes:\n\n\n\n\n\n\n\n\nClass\nBefore Augmentation\nAfter Augmentation\n\n\n\n\nAccessible suburbia\n15,054\n129,620\n\n\nConnected residential neighbourhoods\n2,567\n21,021\n\n\nCountryside agriculture\n1,367,999\n1,367,999\n\n\nDense residential neighbourhoods\n4,299\n34,507\n\n\nDense urban neighbourhoods\n3,636\n31,657\n\n\nDisconnected suburbia\n2,644\n20,113\n\n\nGridded residential quarters\n1,518\n12,849\n\n\nOpen sprawl\n33,910\n292,884\n\n\nUrban buffer\n381,283\n381,283\n\n\nUrbanity\n2,495\n21,929\n\n\nWarehouse/Park land\n21,282\n195,105\n\n\nWild countryside\n1,395,048\n1,395,048\n\n\n\n\n\nClassification Schemes\nWe used two versions of our dataset:\n\n12-class scheme: Maintained all original Spatial Signatures classes:\n\nclass_labels = {\n    'Accessible suburbia': 0,\n    'Connected residential neighbourhoods': 1,\n    'Countryside agriculture': 2,\n    'Dense residential neighbourhoods': 3,\n    'Dense urban neighbourhoods': 4,\n    'Disconnected suburbia': 5,\n    'Gridded residential quarters': 6,\n    'Open sprawl': 7,\n    'Urban buffer': 8,\n    'Urbanity': 9,\n    'Warehouse/Park land': 10,\n    'Wild countryside': 11\n}\n\nSimplified 7-class scheme: Created by re-clustering underlying data from the Spatial Signatures Framework using K-means clustering (K=7):\n\nclass_labels_k7 = {\n    'Countryside agriculture': 0,\n    'Open sprawl': 1,\n    'Compact suburbia': 2,\n    'Urban': 3,\n    'Urban buffer': 4,\n    'Warehouse/Park land': 5,\n    'Wild countryside': 6\n}\n\n\nModel Performance\nThe final XGBoost classifier was trained using the augmented dataset and evaluated using three metrics: micro accuracy, macro accuracy (where every class has the same weighting), and macro F1 score. We validated the model using 5-fold spatial cross-validation at H3 resolution 6, ensuring an 80/20 training-testing split.\nThe table below summarises classifier performance for both classification schemes (7 and 12 classes) and two spatial context scenarios (with and without H3 resolution):\n\n\n\n\n\n\n\n\n\n\nClasses (K)\nSpatial Context\nAccuracy\nMacro Accuracy\nMacro F1 Score\n\n\n\n\n7\nNone\n0.4924\n0.3856\n0.3389\n\n\n7\nH3 (res 5)\n0.6959\n0.5713\n0.5221\n\n\n12\nNone\n0.4617\n0.2666\n0.2127\n\n\n12\nH3 (res 5)\n0.6654\n0.4328\n0.3654\n\n\n\nIncluding spatial context (H3 resolution) notably improved classification accuracy and F1 scores, demonstrating the importance of spatial context in predicting urban fabric classes. As anticipated, the model with fewer classes (7) performed better compared to the one with 12 classes."
  },
  {
    "objectID": "notes/final_report.html#temporal-analysis",
    "href": "notes/final_report.html#temporal-analysis",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Temporal Analysis",
    "text": "Temporal Analysis\nWe used the trained XGBoost classifier to make predictions across the years 2016 to 2021. The overall overlap between the initial year (2016) and final year (2021) remained high at 88%, confirming that Spatial Signatures classes remained relatively stable across the study period. However, minor variations may indicate either genuine change or model uncertainty.\nYear-to-year class stability rates:\n\n2016 → 2017: 88%\n2017 → 2018: 88%\n2018 → 2019: 86%\n2019 → 2020: 86%\n2020 → 2021: 88%\n\n\nDiversity Analysis (Shannon Index)\nWe assessed changes in urban fabric diversity using the Shannon Index across the studied years. The results are summarised in the table below, indicating slight fluctuations, with the most notable increase in diversity occurring in 2019:\n\n\n\nYear\nShannon Index\n\n\n\n\n2016\n1.868\n\n\n2017\n1.863\n\n\n2018\n1.868\n\n\n2019\n2.007\n\n\n2020\n1.873\n\n\n2021\n1.872\n\n\n\nThe marked increase in the Shannon Index in 2019 suggests an increase in class diversity during that year, followed by a subsequent return to previous levels. This could indicate some differences in the imagery caused by weather conditions or sensor characteristics specific to 2019.\n\n\nSpatial Patterns of Change\nTo make predictions across years, we used the trained model and fed in all GB tiles to get predictions for the 12 classes.\nSpatial analysis identified areas across England with frequent class transitions (map below), particularly around major urban centres and suburban zones. These frequent transitions may either represent genuine urban transformations or result from classifier uncertainty, especially in ambiguous zones between visually similar Spatial Signatures classes.\n\n\n\nFrequency Map\n\n\nClass-specific analysis further highlighted particular Spatial Signatures types prone to transitions. The figure below shows which classes experienced frequent transitions:\n\n\n\nClass Transitions\n\n\nTo better interpret these transitions, we calculated transition probabilities and organised them into a structured confusion matrix. This matrix clearly shows the urban fabric classes most likely to interchange over the studied period:\n\n\n\n‘Reasonable’ confusion matrix\n\n\nLastly, we analysed the inverse-probability-based distances of urban fabric classes over time. Shorter distances represent a higher likelihood of transitioning or changing classes from year to year, whereas longer distances indicate greater stability:\n\n\n\nProbability of change across classes\n\n\nThis analysis shows urban fabric classes such as Urbanity, Warehouse/Park land, Dense urban neighbourhoods, and Connected residential neighbourhoods have shorter inverse distances, indicating higher levels of dynamic change or redevelopment. Conversely, classes such as Wild countryside and Countryside agriculture have longer distances, suggesting greater temporal stability. Although these results align with expectations about urban and rural dynamics, they may also reflect the classifier’s varying uncertainty across these visually distinct environments."
  },
  {
    "objectID": "notes/final_report.html#discussion-1",
    "href": "notes/final_report.html#discussion-1",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Discussion",
    "text": "Discussion"
  },
  {
    "objectID": "notes/final_report.html#key-findings",
    "href": "notes/final_report.html#key-findings",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Key Findings",
    "text": "Key Findings\nThe analysis demonstrates that urban fabric classifications exhibit distinct temporal and spatial dynamics, reflecting varying levels of stability and diversity over time. Notably, urban classes such as Dense urban neighbourhoods and Connected residential neighbourhoods displayed higher probabilities of transition, indicating active urban transformation. Similarly, suburban classes, such as Accessible suburbia, Disconnected suburbia, and Urban buffer, also show a higher probability of change between these classes. Conversely, rural classes showed significant stability. It’s important to note that these observed changes may be more related to classifier uncertainty than actual environmental changes."
  },
  {
    "objectID": "notes/final_report.html#lessons-learned",
    "href": "notes/final_report.html#lessons-learned",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Lessons Learned",
    "text": "Lessons Learned\n\nScale: Urban fabric classes, like spatial signatures, have fuzzy boundaries. Pixel-level classifications provide the highest possible spatial resolution, which is beneficial for detailed analysis. However, pixels often lack clear visual cues indicating exact boundaries between classes, making pixel-level predictions challenging for the model. Patch-level classification, although lower in spatial resolution depending on patch size, provided clearer visual context and resulted in better overall performance.\nEmbeddings vs. Fine-Tuned Foundation Model: Fine-tuning foundation models involves significant complexity and requires careful design decisions. In our case, the limited number of training examples was insufficient to achieve noticeable improvements through fine-tuning. The effort required for fine-tuning did not outweigh the simpler alternative of using off-the-shelf embeddings.\nRegional Trends: Including regional contextual information substantially improved the classifier’s accuracy. Nonetheless, we found it essential that embeddings themselves already capture enough visual detail for accurate classification, ensuring that predictions remain robust even without regional context (and simply do not just rely on the spatial information to make predictions).\nData Augmentation: The sliding window augmentation approach effectively addressed class imbalances, significantly improving model performance by increasing representation of previously underrepresented urban fabric classes. This approach could boost classifier performance by an additional 10-20% in terms of accuracy."
  },
  {
    "objectID": "notes/final_report.html#potential-research-directions",
    "href": "notes/final_report.html#potential-research-directions",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Potential Research Directions",
    "text": "Potential Research Directions\nThere are several promising directions for future research:\n\nHandling Misclassifications: Misclassifications typically occur between visually similar urban fabric classes, indicating inherent uncertainty in predictions. Incorporating prediction probabilities into a secondary model could help address this issue. By explicitly using probability scores from the initial classification as input for a refinement model — as previously shown by Fleischmann and Arribas-Bel1 — we could better distinguish between ambiguous cases. This approach may “smooth” predictions, reducing noise and improving overall classification accuracy. Future work should explore how prediction confidence scores can be systematically utilised, either by employing spatial smoothing algorithms or by applying secondary machine learning models trained specifically to correct uncertain predictions.\nGeneralisability Testing: Evaluating the generalisability of this methodological framework is crucial for its wider applicability. Future research should test this modelling approach in different European regions, assessing whether the chosen methods, including data preprocessing, augmentation strategies, spatial embeddings, and classifier architectures, perform consistently outside Great Britain. This would involve exploring variations in urban form and regional urban planning contexts across Europe. Understanding these factors will help identify potential adjustments needed to ensure reliable predictions when extending the model beyond the original study area."
  },
  {
    "objectID": "notes/final_report.html#limitations",
    "href": "notes/final_report.html#limitations",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Limitations",
    "text": "Limitations\nWhile the presented methods demonstrate strong potential for scalable urban classification, several limitations should be acknowledged:\n\nDependence on ground truth and input data quality While alternative datasets such as Overture or satellite-derived imagery allow broad geographic coverage, they cannot fully substitute for cadastral or on-the-ground verification data. The quality and consistency of input data - particularly building footprints - remain critical to model accuracy, especially at higher classification detail. Differences in data completeness or geometric fidelity can significantly impact performance across regions and classes.\nUncertainty in temporal and spatial predictions Evaluating the accuracy of predictions over time is inherently challenging due to the absence of ground truth data for intermediate years. Although the classifier identifies plausible transitions, particularly in suburban areas, it is difficult to distinguish genuine urban change from model uncertainty or noise introduced by seasonal imagery variation, cloud cover, or sensor differences.\nTransferability across geographic and morphological contexts The models demonstrate strong generalisation within Great Britain and across several Central European countries. However, their performance varies in regions with distinct urban morphologies, socio-economic conditions, or planning traditions not well represented in the training data. Expanding the training set to include more diverse examples of urban fabric will likely improve transferability and robustness across broader European or global contexts."
  },
  {
    "objectID": "notes/final_report.html#software",
    "href": "notes/final_report.html#software",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Software",
    "text": "Software\n\nMorphometrics\n\nInteractive web application\nWe developed an interactive web app that displays the entire ground truth morphometric classification for Central Europe - HiMoC. The web app makes possible the sharing of the Central European data with an even wider audience, than the original specified stakeholders, regardless of their technical expertise. Furthermore, it allowed stakeholders to visually explore the geospatial data, zoom in and out, pan across areas, and overlay different layers. It was the focus of multiple stakeholder consultations and enabled them to see final results, propose features, highlight mistakes. Furthermore, it allowed them to specify what format at what scale the final results would be most useful for them.\n\n\nMorphometric characterisation pipeline for Microsoft Building footprints\nThe entire morphometric characterisation pipeline for the processing of Microsoft Building Footprints, including reproducible notebooks and an environment is open-sourced and available on the EuroFab GitHub.\n\n\nMorphometric characterisation pipeline for Overture Maps Building footprints\nThe above reproducible pipeline was further adapted to process Overture Maps data and is also available at the EuroFab GitHub.\n\n\n\nEO\nAll EO analyses presented are supported by openly accessible software hosted on GitHub. The AI prediction pipeline, including preprocessing, embedding generation, and prediction of spatial signatures, is fully documented and accessible at EO repository.\n\n\nSoftware: AI Method for Urban Fabric classification and morphometric characterisation\nAll the work supporting this analysis can be found on GitHub. The main prediction pipeline, which includes data preprocessing, embedding creation, and spatial signature prediction, can be used as follows:\n# Run the pipeline\npipeline.spatial_sig_prediction(\n    geo_path= \"../spatial_signatures/eo/data/example/london_25_25_grid_clipped.geojson\", ## Vector file (geojson or parquet) of analysis area (grid).\n    vrt_file= \"../satellite_demoland/data/mosaic_cube/vrt_allbands/2017_combined.vrt\", ## Vrt file of the satellite composite\n    xgb_weights = \"../spatial_signatures/classifier/k12_h5_slided_gb_xgb_model.bin\", ## Model weights for XGBoost classifier\n    model_weights = \"../satellite_demoland/models/satlas/weights/satlas-model-v1-lowres.pth\", ## Model weights for embedding model (Satlas)\n    output_path= \"../vjgo8416-demoland/spatial_signatures/eo/data/predictions/test_london_h6.parquet\", ## Output file with predictions, prediction probabilities and geometries\n    h3_resolution=5 ## h3 resolution to be added to analysis (spatial context)\n)`\nMore details and documentation on how to run the pipeline can be found in the example on the EuroFab project EO repository."
  },
  {
    "objectID": "notes/final_report.html#example-datasets",
    "href": "notes/final_report.html#example-datasets",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Example datasets",
    "text": "Example datasets\n\nMorphometric model\nThe final morphometric model is around 40GB and takes around 10 hours to train. The full script and notebooks, including a reproducible environment is available at the project GitHub. A non-interactive version of the notebooks used in the pipeline is available on the EuroFab Project Website .\n\n\n\n\n\n\nFigure 5: Example Level 4 predictions for the areas around Vienna (Austria), Munich (Germany), Wroclaw (Poland) and Brno (Czechia)\n\n\n\n\n\nAI model\nThe final data cube including predictions for the years 2016 to 2021 for 7 and 12 classes can be found on the GitHub repository.\n\n\nExample datasets generated during Verification Exercises\nHere are some example visualisations showing London and Liverpool from the dataset:\n\nLondon\n\n\n\nLondon, 7 classes\n\n\n\n\n\nLondon, 12 classes\n\n\n\n\nLiverpool\n\n\n\nLiverpool, 7 classes\n\n\n\n\n\nLiverpool, 12 classes"
  },
  {
    "objectID": "notes/final_report.html#footnotes",
    "href": "notes/final_report.html#footnotes",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nFleischmann and Arribas-Bel, 2024. Decoding (urban) form and function using spatially explicit deep learning. Computers, Environment and Urban Systems, 31, p.105737.↩︎"
  },
  {
    "objectID": "notes/large-scale-inference.html",
    "href": "notes/large-scale-inference.html",
    "title": "Large scale inference and Operationalisation",
    "section": "",
    "text": "This Technical Note presents a strategic roadmap for advancing the EuroFab project’s urban fabric classification system from its current capabilities to a pan-European operational capacity.\nUltimately, EuroFab seeks to pave the road for a world where stakeholders, from local authorities to supranational organisations, are able to track and monitor the patterns of European urban development across time, in detail directly relevant for planning. The pilot study in Central Europe and the UK consisted of three related parts - a machine learning morphometric pipeline, a AI vision model, and a stakeholder engagement component. The current pilot study demonstrated the viability of using alternative data sources to produce multiscale descriptions of the built environment, based on analysis of individual buildings, street segments and their interactions. Furthermore, the stakeholder engagement part highlighted the multiple applications which stakeholders see for such a dataset.\nThe overarching strategy for scaling and productionalising the EuroFab system involves three principal phases. First, using the morphometric pipeline to generate detailed urban classification at a pan-European scale. Second, training the AI vision model on the outputs from step one, to fill data gaps and to produce a temporal classification based on historical satellite data. Third, productising the refined classification results and expanding stakeholder engagement activities. This will be crucial for driving user adoption and facilitating the derivation of secondary indicators and specialised datasets tailored to specific applications, such as regional development analysis or climate change impact assessments.\nTransitioning the EuroFab system from a successful research project with functional processing pipelines to a robust, reliable, and continuously updated data product presents considerable technical and organisational challenges. Serving a diverse range of stakeholders across Europe with consistent and high-quality urban fabric information requires improvement and upscaling of data processing capabilities, the establishment of a sustainable operational framework that covers potential risks, and a commitment to continuous improvement and user engagement.\nThe roadmap in this technical note addresses these multifaceted challenges, providing a structured approach to achieve full operationalisation."
  },
  {
    "objectID": "notes/large-scale-inference.html#introduction",
    "href": "notes/large-scale-inference.html#introduction",
    "title": "Large scale inference and Operationalisation",
    "section": "",
    "text": "This Technical Note presents a strategic roadmap for advancing the EuroFab project’s urban fabric classification system from its current capabilities to a pan-European operational capacity.\nUltimately, EuroFab seeks to pave the road for a world where stakeholders, from local authorities to supranational organisations, are able to track and monitor the patterns of European urban development across time, in detail directly relevant for planning. The pilot study in Central Europe and the UK consisted of three related parts - a machine learning morphometric pipeline, a AI vision model, and a stakeholder engagement component. The current pilot study demonstrated the viability of using alternative data sources to produce multiscale descriptions of the built environment, based on analysis of individual buildings, street segments and their interactions. Furthermore, the stakeholder engagement part highlighted the multiple applications which stakeholders see for such a dataset.\nThe overarching strategy for scaling and productionalising the EuroFab system involves three principal phases. First, using the morphometric pipeline to generate detailed urban classification at a pan-European scale. Second, training the AI vision model on the outputs from step one, to fill data gaps and to produce a temporal classification based on historical satellite data. Third, productising the refined classification results and expanding stakeholder engagement activities. This will be crucial for driving user adoption and facilitating the derivation of secondary indicators and specialised datasets tailored to specific applications, such as regional development analysis or climate change impact assessments.\nTransitioning the EuroFab system from a successful research project with functional processing pipelines to a robust, reliable, and continuously updated data product presents considerable technical and organisational challenges. Serving a diverse range of stakeholders across Europe with consistent and high-quality urban fabric information requires improvement and upscaling of data processing capabilities, the establishment of a sustainable operational framework that covers potential risks, and a commitment to continuous improvement and user engagement.\nThe roadmap in this technical note addresses these multifaceted challenges, providing a structured approach to achieve full operationalisation."
  },
  {
    "objectID": "notes/large-scale-inference.html#european-morphometric-classification-strategy",
    "href": "notes/large-scale-inference.html#european-morphometric-classification-strategy",
    "title": "Large scale inference and Operationalisation",
    "section": "European Morphometric Classification Strategy",
    "text": "European Morphometric Classification Strategy\nThe results from the pilot study demonstrated the potential to deliver pan-European classification of urban fabric as a combination of morphological processing and predictive modelling. Specifically, that it is possible to fill the gaps in openly available cadastral data with alternative data sources, namely Overture Maps and Microsoft Building footprints. The resulting classification can be used by stakeholders on its own, but it will also be the training data for the expanded temporal AI models.\n\nInfrastructural, technical and methodological aspects involved in scaling\nThe pan-European pipeline will extend the methodologies developed during the pilot study and will comprise four distinct stages. First, calculating the morphological characteristics on alternative building footprints. Second, assigning labels to subsets of the data, where the cadastral classification is available. Third, training a model using the train/test schemes devised in the pilot study. And lastly, using the models to predict urban fabric types based where cadastral data is not available.\nThere are three types of expected changes to the current methodology.\nFirst, the methodology will require updates to ensure compatibility with the latest versions of relevant open-source geographical software packages, in order to keep as close as possible to the cadastral classification. The ground truth cadastral classification is a dynamic product, with ongoing updates influencing upstream open-source repositories and benefiting from contributions from a diverse community. Therefore, it changes over time, both adapting and contributing to the state-of-the-art morphological open source software. The effort required for these updates is anticipated to be low to medium, as the work will predominantly involve technical software development rather than fundamental methodological revisions.\nMethodologically, it is expected that the first and second stages will need only minor changes. However, a significant data pre-processing effort will be necessary. This includes comprehensively mapping available data resources across Europe and rigorously assessing their quality and consistency. For example, this involves evaluating the completeness, geometric accuracy, and attribute information of building footprint datasets from various national and regional providers. The third and fourth stage may require more adaptions in order to account for the new scale and data. Potential pitfalls and solutions are discussed in the subsequent sections.\nThere are no new infrastructural requirements expected. The pilot methodology is expected to scale on the currently available computing resources.\n\n\nRisk assessment\nThe principal risks identified in scaling the morphometric classification include:\n\nSourcing and processing European building footprints. An extensive mapping of the available data sources needs to be carried out, before applying the methodology to the European continent. A key finding from the pilot work is the difficulty of working with cadastral data, primarily because every country, or even different regions within the same country, have different definitions of what a building is. The available data needs to be downloaded and standardised for the first two steps of the analysis. This could potentially result in data from different sources, in different parts of Europe.\nData Gaps in Specific Regions: It is possible that there will be regions with no available building footprint data at all. These regions will need to be handled differently in order to provide consistent coverage.\nUnknown urban fabric classes: It is possible that there are some unique urban fabric classes in Europe, not present in the underlying ground truth cadastral classification. This will lead to exclusion from the model training data and degraded model performance.\n\n\n\nEurope-wide classification strategy\n\nAlignment with Cadastral Classification: Maintaining continuous alignment with the evolving cadastral classification is crucial to keeping the morphometric pipeline up-to-data. There are no major challenges expected for this work, however it will require continuous updates of the entire pipeline, including models and data processing. Nevertheless, it is expected that each update of the ground truth data will improve the performance of the models.\nHeterogenous data sources: The scope of the pilot study was already extended so that the models and morphological processing pipeline can handle heterogenous data. The results suggest that better quality data from heterogenous sources, specifically Overture Maps data, leads to more accurate predictions. However, the underlying building data from new European regions can have previously unseen issues in the pilot study area. These could include issues such as topological inconsistencies (e.g., overlapping building polygons), incomplete coverage, or discrepancies in the street network data used for contextual analysis. While these challenges are considered solvable, they will likely increase the complexity and volume of the required data pre-processing work. Extending and improving the Overture Maps data processing pipeline is a good starting point for all of these and other data integration tasks.\nData Gaps: In regions where there are no building footprints available at all, the vision model can be used directly to fill in the gaps, since Sentinel 2 has full coverage of Europe. However, such a region could potentially represent an unobserved urban class, and therefore needs to be analysed in more detail.\nUnknown urban fabric types: The likelihood of unseen urban classes lessens as the geographical scope of the ground truth cadastral classification grows. The current classification covers Germany, Poland, Lithuania, Slovakia, Czechia and Austria. There is cadastral data available for other European Countries such as Spain, Belgium, France and the Netherlands. It is expected that these will be included in subsequent cadastral classifications and therefore increase the types of urban fabric covered. This prospect further increases the importance of continuously aligning the existing morphometric pipeline with the cadastral ground truth, as well as with the latest advancements in open-source geospatial software.\nModel Tuning and Optimisation: The current morphometric models are HistGradientBoostingClassifier with unlimited depth and number of nodes, trained on hundreds of thousands of examples per class. However, this scheme will need to change as the size of the datasets increases, or alternatively multiple models will need to be trained and tested. The detailed spatial testing schemes implemented in the pilot study can guide the development of the new models, where the main anticipated challenges will be hyper-parameter tuning, addressing class imbalances and accurate subletting of the training data. The data availability and data pre-processing work will also have a large impact on the model tuning and training. It is possible that only specific types regions lack cadastral data, or are not covered by the ground truth classification and therefore will require most of the modelling focus."
  },
  {
    "objectID": "notes/large-scale-inference.html#european-space-time-urban-fabric-strategy",
    "href": "notes/large-scale-inference.html#european-space-time-urban-fabric-strategy",
    "title": "Large scale inference and Operationalisation",
    "section": "European Space-Time Urban Fabric Strategy",
    "text": "European Space-Time Urban Fabric Strategy\n\nInfrastructural, technical and methodological aspects involved in scaling\nThe core of EuroFab’s current Earth Observation analytical capability is the Spatial Signatures Pipeline, detailed in the eurofab-project/eo GitHub repository. This pipeline is engineered to generate spatial signature predictions using satellite imagery as its primary input. First, it integrates computer vision models to create feature embeddings from Sentinel 2 imagery. These embeddings are subsequently processed by an XGBoost model, which performs the classification of individual image chips -groups of pixels - into predefined urban fabric classes. The following aspects of this baseline processing chain needs to be adapted and scaled:\n\nSourcing and processing historical European Sentinel 2 data: The current pipeline is processing historical Sentinel 2 data only for the UK. The data processing and storage have to be expanded to cover the whole of Europe, which will exponentially increase the size of the data that needs to be stored and processed.\nClassification Labels: The current XGBoost model assigns each grid cell to one of twelve predefined spatial classes and their aggregations. These classes include: ‘Accessible suburbia’, ‘Connected residential neighbourhoods’, ‘Countryside agriculture’, ‘Dense residential neighbourhoods’, ‘Dense urban neighbourhoods’, ‘Disconnected suburbia’, ‘Gridded residential quarters’, ‘Open sprawl’, ‘Urban buffer’, ‘Urbanity’, ‘Warehouse/Park land’, and ‘Wild countryside’. This typology provides a foundational characterisation of diverse urban and peri-urban environments. However, spatial signatures are restricted to the geographical extent of Great Britain. The pan-European product will use as ground truth, a combination of the existing morphological classification and the predicted classes from the morphological pipeline, where the cadastral data is not available. This change will generate orders of magnitude more training data for the vision and XGBoost models, from all across Europe. This change will not just increase the scale of the results, but also their accuracy as shown by the conclusions of the pilot study.\nInfrastructural Capacity: The current inference pipeline and its training is not heavily computationally demanding as it was trained on a single high-end GPU. However, the training times were not optimal and for a scaled-up pipeline, the computational demands will grow significantly. Therefore, it is expected that training and inference will require a small cluster of high-end GPUs, if the inference will be ran multiple times within a year.\n\n\n\nRisk assessment\nThe scaling of the AI models for pan-European space-time urban fabric analysis presents three primary challenges:\n\nLarge scale evaluation of urban fabric change across time: The pilot analysis demonstrated that urban fabric classifications exhibit distinct temporal and spatial dynamics, reflecting varying levels of stability and diversity over time. Urban and sub-urban classes displayed higher probabilities of transition, indicating active urban transformation. Conversely, rural classes showed significant stability. As highlighted in the pilot’s results these observed changes may be more related to classifier uncertainty than actual environmental changes.\nGeneralisability: Evaluating the generalisability of the AI methodological framework between different regions is crucial for its wider applicability. Due to the limited geographical scale of the pilot study this was not possible.\nHandling Misclassifications: Misclassifications typically occur between visually similar urban fabric classes, indicating inherent uncertainty in predictions. Incorporating prediction probabilities into a secondary model could help address this issue. By explicitly using probability scores from the initial classification as input for a refinement model, we could better distinguish between ambiguous cases. This approach may “smooth” predictions, reducing noise and improving overall classification accuracy. The pan-European work should explore how prediction confidence scores can be systematically utilised, either by employing spatial smoothing algorithms or by applying secondary machine learning models trained specifically to correct uncertain predictions.\n\n\n\nEurope-wide deployment strategy\n\nLeveraging Copernicus Services: The Copernicus programme, with its commitment to free, full, and open data access, will be the cornerstone for sourcing satellite imagery. Primarily, data from the Sentinel-2 (multispectral optical) mission will be used to derive consistent historic coverage of the urban fabric in the entire European continent. These data will be the core input for the raster-based analyses performed by the EuroFab pipeline and will enable the temporal classification and change detection of urban fabric.\nLeveraging the new morphometric classification results as ground truth: It is expected that replacing the ground truth classes from spatial signatures to the new morphometric results will not lead to significant changes in the pipeline. Although the spatial signatures capture functional information, almost all morphometric characters used in deriving the new classification are already used in the spatial signatures derivation. Therefore, the current AI vision model pipeline is already processing urban form information. There is one significant change that will need to be accounted for. The new ground truth classification focuses exclusively on areas that have buildings, therefore large expanses of non-built up area such as fields and forests are excluded by definition. This will actually reduce processing times and help with class imbalances, however some changes in the processing pipeline will be neccassary.\nGeneralisability Testing: The performance of the vision model will be tested using the same robust generalisability testing framework used in the pilot study’s morphological pipeline. This was not possible for the pilot AI pipeline due to the limited extent of the available data. However, with the expansion of the study area data more complex testing scenarios become viable. Furthermore, the generalisability task becomes easier as the scale of the morphometric pipeline used to generate the training data increases to cover the whole of Europe. Rather than having to predict urban form in multiple entirely unseen contexts, the vision model will have to do in-fill predictions - —classifying urban fabric for regions where contextual information from surrounding, already classified areas is available, thus benefiting from a richer, more representative training dataset.\nEvaluation of urban predictions across time Similarly, the larger quantity of data, as well as the new testing frameworks will enable better model performance and more certainty in the temporal classification results. Furthermore, the expanded stakeholder engagement and derivation of secondary datasets will provide valuable real-world validation, and increased confidence in the results.\nMethodological processing The existing AI pipeline architecture relies on localised information - processing image pixels and chips with limited local context - to generate embeddings and subsequent predictions. Therefore, it is anticipated that memory and computing requirements will scale in a broadly linear fashion with the increase in data volume, without necessitating fundamental changes to the core methodology. However, it is expected that significantly more resources will be required for preprocessing the data and for training generating the embeddings from the satellite images for the whole of Europe. In order to do these steps in a reasonable timeframe it is expected that training and inference will require a small cluster of high-end GPUs, with the inference ran on a yearly basis."
  },
  {
    "objectID": "notes/large-scale-inference.html#scaled-up-stakeholder-engagement",
    "href": "notes/large-scale-inference.html#scaled-up-stakeholder-engagement",
    "title": "Large scale inference and Operationalisation",
    "section": "Scaled up stakeholder engagement",
    "text": "Scaled up stakeholder engagement\nThe stakeholder work in the pilot study confirmed the need for a detailed urban classification at a granular level. The engagement also resulted in multiple feature requests for secondary indicators, specific functionality and reports. The new pan-European detailed urban classification has the potential to serve as a foundational dataset for a multitude of derived data products, each adapted to particular use cases and stakeholder requirements. Examples of requested applications included: comparative analyses between countries at various spatial scales (neighbourhoods, cities, regions); direct access to building-level morphological data for micro-scale studies; and predictive classification capabilities to assess how newly designed or planned urban areas might be categorised before construction. Furthermore, stakeholders expressed strong interest in combining the EuroFab classification with other complementary datasets, such as socio-economic data, environmental hazard maps, or transport network information.\nThe expanded geographical scale and enhanced detail of the new pan-European results will enable us to continue and enhance the stakeholder work in several ways.\n\nWorkshops and conference work: Experience from the pilot phase demonstrated that workshops and conference presentations are highly effective mechanisms for fostering collaborations and gathering valuable insights. The pan-European scale of the new product will increase the number of relevant and interested stakeholders. Therefore, sustained engagement through targeted workshops and active participation in key European conferences is expected to continue delivering substantial value to the project as a whole.\nEngagement with Specific Cities and Regions: Stakeholders consistently expressed interested in their local areas or countries, as well as larger pan-European data. Even the pilot study extent of five Central European countries and the UK proved limiting. For example, the inclusion of SSVA (Construction Sector Development Agency of the Ministry of Environment, Lithuania) as one of the key stakeholder engagements, neccesicitated the inclusion of Lithuania in the some parts of the pilot’s research. The comprehensive pan-European scale of the operational product will significantly streamline the process of onboarding new interested stakeholders, as their specific geographical areas of interest will inherently be covered.\nCollaborations & co-development: The focus of the current stakeholder work was on establishing relationships and gathering feedback. Extended collaborations on specific applications and data products was not possible due to the short duration of the pilot. The expanded scope and duration of the pan-European classification project will lead to stakeholder engagement beyond simple feedback collection. This can involve establishing formal partnerships where stakeholders actively contribute resources – such as local datasets for training/validation, domain expertise, or personnel for joint validation campaigns – and, in return, share in the benefits and responsibilities of the new data products. Such collaborative ventures are designed to deeply embed the EuroFab service and its outputs into the stakeholders’ existing operational workflows and critical decision-making processes, thereby maximising its real-world impact.\nDeveloping derived products: For specific, strategically important use cases (e.g., monitoring progress towards Sustainable Development Goal 11 on sustainable cities), the project can extend its stakeholder engagement to actively guide the co-development of tailored derived products. This work will also result in detailed examples and documentation of how to use the foundational space-time urban classification product for the development of derived indicators in different policy areas. Some desirable indicators that came up during the development work were combining the classification with land use data and geodemographic factors, generating summaries of the morphometric character of cities, access to the full taxonomy, as well as raw morphometric characters data at the building level.\nSupporting Third-Party Development of Derived Products: The pilot study also revealed interest from commercial entities and research groups in developing their own derived products for specific niche applications. These were local consultancies and private companies operating in sectors such as urban planning, real estate analytics, and environmental management. A framework for ongoing engagement and technical support can be established to facilitate and encourage these third-party developments, potentially through API access or developer toolkits.\nOpen source community: EuroFab’s foundational commitment to openness represents a key strategic asset for ensuring its long-term impact, widespread adoption, and overall sustainability. This includes maintaining the public GitHub repositories (e.g., eurofab-project/morphometrics, eurofab-project/eo) for all relevant code, tools, and documentation. The scope of the open-source work can also be extended to establish and maintain online forums, mailing lists, and developer channels (e.g., Slack, Discord) to provide support to users and foster a collaborative environment for contributors."
  },
  {
    "objectID": "notes/large-scale-inference.html#productionalising",
    "href": "notes/large-scale-inference.html#productionalising",
    "title": "Large scale inference and Operationalisation",
    "section": "Productionalising",
    "text": "Productionalising\nMoving EuroFab from a research project to an operational service requires a well-defined framework covering deployment, service delivery, quality assurance, and iterative development based on user needs.\n\nDefining Output Products: Based on the stakeholder work there are two types of products stakeholders are interested in. The first type are baseline Products such as the pan-European urban fabric maps and the underlying data based on the core classification scheme. These products should be openly accessible and updated regularly (e.g., annually or biennially). The second type are derived indicators from the base urban fabric data. Examples include metrics related to urban sprawl patterns, structure of cities, countries and regions, as well as access to the underlying morphological data ( if available).\nAccess and Integration: The resulting pan-European datasets will require specialised hosting dissemination solutions, due to their volume. The successful development and deployment of the morphological web application during the pilot phase demonstrated the viability of leveraging national research infrastructures, such as the Czech national research infrastructure network, for hosting and serving such data products. These infrastructures often provide scalable cloud storage solutions and are well-suited for handling large geospatial datasets. To maximise interoperability and efficiency, the pan-European datasets should be stored and disseminated in cloud-native, analysis-ready formats, such as Cloud-Optimised GeoTIFFs (COGs) for raster data from the AI vision model and GeoParquet for vector-based outputs from the morphometric models. Furthermore, to maximise impact and avoid creating isolated systems, EuroFab services can be integrated with or exposed through relevant existing European platforms and cloud data standards.\nUser Adoption and Trust: Continuous stakeholder and end-user engagement has been a cornerstone of the pilot study and will remain critical for the operational phase. The pan-European classification will actively seek feedback regarding data quality, utility, and potential errors, gathered from stakeholders, will be systematically addressed and, where appropriate, implemented through transparent and publicly accessible Calibration/Validation (Cal/Val) procedures. The further investment in stakeholder engagement, co-design processes training, and clear documentation will also improve user confidence in the data product and drive adoption.\nTimeline: The indicative timeline for achieving full operationalisation of the pan-European EuroFab service is projected to be two years. This work carried out during this time can cover increasing the scale the methodology, building up the additional services based on stakeholder requirements, operationalise the results and incorporating the user feedback mechanisms.\nTeam Composition: The proposed core team composition mirrors that of the successful pilot study, ensuring continuity of expertise and established collaborative workflows. This comprises a dedicated six-person team, with two expert members drawn from each of the three key institutions already involved in the EuroFab consortium. The only difference with the current structure is the change of the affiliation of Turing Team, which will be under the University of Liverpool in the UK. The division of responsibilities will remain : the OECD team will continue to lead stakeholder engagement, outreach, and policy relevance activities; the Charles University team will work on the scaling and refinement of the morphometric classification pipeline, as well as the overall product components; and the University of Liverpool team will focus on advancing the AI vision model and the space-time analytical components.\nFunding: The project team will actively pursue a diversified funding strategy. This will involve preparing and submitting competitive grant applications to relevant international and national funding bodies, such as UK Research and Innovation (UKRI), Horizon Europe programmes (e.g., those focused on Earth observation, digital transformation, or sustainable development), and the European Space Agency (ESA)."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Technical notes",
    "section": "",
    "text": "Technical notes produced during the EuroFab project."
  },
  {
    "objectID": "index.html#list-of-notes",
    "href": "index.html#list-of-notes",
    "title": "Technical notes",
    "section": "List of notes",
    "text": "List of notes\n\nD1: Consolidated Stakeholder Requirements Specification (PDF)\nD2: Algorithm Design and Theoretical Basis Description (PDF)\nD3: Reference Data Selection (PDF)\nD4: Test and Verification Results (PDF)\nD5: Stakeholder Impact and Utility Assessment (PDF)\nD6-7: Software and Example datasets generated during Verification Exercises (PDF)\nD8: Large scale inference and Operationalisation (PDF)\nFinal report (PDF)\nExecutive summary (PDF)"
  },
  {
    "objectID": "index.html#project-overview",
    "href": "index.html#project-overview",
    "title": "Technical notes",
    "section": "Project overview",
    "text": "Project overview\nThe “EuroFab: European Urban Fabric Classification using Artificial Intelligence” project brings an innovative perspective to understanding the structure of human settlements by capturing their physical composition using explainable data science in combination with Earth Observation (EO), and through state-of-the-art AI, uncovering their temporal dimension.\nSpecifically, the solutions develop a two-step system combining mathematical characterisation of built-up fabric using techniques known as urban morphometrics, providing a rich hierarchical classification backed by rich interpretable numerical descriptions, and state-of-the-art neural networks to recognise such classification from open optical satellite imagery (Sentinel 2), allowing both the detection of individual types in areas with ground data of lesser quality and the unfolding of such classification over time, providing a unique temporal look at how human settlements evolve.\nThe output paves the way to map urban development in the European continent over both space and time, covering every building from the smallest hamlet to the largest metropolis.\nEuroFab helps us understand the habitats we built and efficiently affect policy at European, national and local levels ensuring the future of “urban” is sustainable, resilient and data driven.\nThe proposed project is an initiation of a more ambitious undertaking. It focuses on developing scientific and technical solutions based on novel AI methods, in conjunction with strategically shaping the outputs and framework to serve various stakeholders directly involved in policy, planning, and research.\nFor more details, please see the project homepage.\n\nThe activities reported in this document were carried under a programme of, and funded by, the European Space Agency. View expressed in the publication can in no way be taken to reflect the official opinion of the European Space Agency."
  },
  {
    "objectID": "notes/algorithm-design.html",
    "href": "notes/algorithm-design.html",
    "title": "Algorithm Design and Theoretical Basis Description",
    "section": "",
    "text": "The detailed classification of urban form can provide valuable insights into the structure of cities and towns, guide targeted policy applications, and form the backbone of urban planning. However, classification of this sort are scarcely available and even fewer are detailed, scalable, and consistent while reflecting the nature of the local data all at the same time. We often see conceptual classification, which has a tendency to oversimplify the structure when “zooming in”, loosing the interest of planners and policy-makers. The classifications developed by key members of the EuroFab project team overcome these limitations, but are dependent on the availability of high quality data capturing urban form, e.g. individual buildings and related street networks. The issue is that these are not always readily available, even within the context of generally data-rich countries of the European region. Therefore, there is a need to derive such classification from suboptimal data that do not have the same qualities as, for example, cadastre would have, but have consistency and continental coverage. This Technical Note outlines the theoretical and methodological bases for two models - one based on satellite-derived building footprints; and a second, based on a direct use of Sentinel-2 visible bands. The models aim to address the data issues presented above, while maintaining the quality of urban classification needed by practioners.\nThe first model, which we can call morphological, uses the Microsoft Open Buildings footprints dataset of a remote-sensing origin and predicts the classes provided by an authoritative target classification based on cadastral data. It measures morphological variables based on building footprints, linked to street network coming from the Overture Maps project and uses the measurements to predict the authoritative classification using non-linear tree-based ensemble models. The evaluated models are trained using spatially explicit splits and are extensively tested for a robustness of prediction in an out-of-sample context. We further use the results of the models as an iterative feedback loop allowing gap-filling of the original taxonomy when the model detects urban fabric it has not seen before and is therefore not able to reliably classify.\nThe second model, which we can call the AI model, works on top of Sentinel-2 visible bands at 10 meters per pixel resolution, and aims to provide a prediction using the foundational computer vision models, eventually allowing deployment of a predicted time series followed-up by yearly updates. The related work package compares three different architectures based on a direct extraction of model embeddings, segmentation, and classification, based on different foundational models (SatlasPretrain for the embeddings, SatlasPretrain, Clay, and IBM/NASA’s Prithvi for segmentation, Clay for classification). To further improve the model performance and acknowledge the effects of spatial heterogeneity, models optionally include explicit spatial dimension encoded via H3 grid locations. Overall, the classification approach with regional information (H3 Level 5) yielded the best performance, achieving both high accuracy and a reasonable balance across classes. Additionally, this approach is computationally efficient: once the image embeddings are generated, the downstream classification process can be completed in just a few minutes."
  },
  {
    "objectID": "notes/algorithm-design.html#morphometric-classification-homogenisation",
    "href": "notes/algorithm-design.html#morphometric-classification-homogenisation",
    "title": "Algorithm Design and Theoretical Basis Description",
    "section": "Morphometric Classification Homogenisation",
    "text": "Morphometric Classification Homogenisation\nThe spatial layout of the physical elements of cities - its urban fabric - affects most activities their residents undertake, from accessing services or jobs to their social and cultural lives. Analysing the interplay of urban form, land use, mobility and other dimensions of human activities provides insights into how cities evolve and what effective developmental policies should look like. Researchers in the field of urban morphology have spend years in identifying, classifying and analysing the variations in urban form across cities from all over the world. A core new development, powered by advancements in spatial data science, computer vision, and open data availability, are the methodologies created to computationally discern and analyse urban fabric (Fleischmann et al. 2022). Taken together, these facts have opened up the possibility of a more systematic and comprehensive approach to the classification of urban morphological patterns, which in turn can drive our understanding of cities (Calafiore et al. 2023; Arribas-Bel and Fleischmann 2022).\nOne factor that limits the wider application of these methods is their dependency on high-quality data, that is generally not available for every city. For example, (Fleischmann et al. 2022; Arribas-Bel and Fleischmann 2022) use building polygons from the respective municipal and national mapping agencies. However, such data is not generally available even for most high-income countries. And where available, it can come in various formats and the data itself is not necessarily homogenous, which makes its processing difficult. For example, official Czechia cadastral building polygons (https://services.cuzk.cz/) come as a GeoPackage, with no information about building age, height, type or use. In contrast, official German building polygons, come separately for every state , typically but not always as GML data from a WFS service, and sometimes have extra building information. However, the definition of building is different to Czechia and the polygon set may include parts of tunnels, overpasses or tram lines. These definitions are even sometimes different in the cases of cities within the same country - i.e. the data for Berlin and Hamburg is different from the data available for Bremen.\nEuroFab aims to address the data availability and processing issues, as well as broaden the applicability of urban morphometrics. It does this through the development of a predictive urban morphometric model which uses widely available building footprints to infer structure of urban form. The model input is calculated directly on satellite-derived building footprints, which gives it a global scope and thus eliminates the need the data fusion problems described above. Furthermore, it is trained on a detailed morphometric classification derived from official cadastre data in a large study area that covers multiple countries - Poland, Austria, Czechia, Germany and Slovakia, i.e. Central Europe. The heterogeneity of urban form and planning regimes present in the study area enables the model to distinguish a rich variety of urban patterns and improves it generalisability.\nThe specific approach taken has four stages. In the first stage morphological elements and their characteristics are calculated using the widely available Microsoft building and Overture Maps Transportation data. These elements are the predictor variables that the model will use. To achieve this we develop a highly-scalable polygon and street data pipeline, capable of calculating an exhaustive list of morphometric characteristics. In the second stage, each element, calculated in the first stage, is assigned a target classification label based on spatial overlap with morphological elements from (Fleischmann and Samardzhiev Forthcoming). (Fleischmann and Samardzhiev Forthcoming) is a classification of urban fabrics in Central Europe based on the highest-detail available cadastre data. Third, the data is then split into five training and testing subsets, so that every country and every combination of the other four countries are used as test and training data respectively. Lastly, a series of non-linear models are trained on each subset to predict the morphological classification of individual elements, using a custom cross-validation scheme in order to account for spatial leakage. Our training and testing setup emphasises evaluating the model’s ability to deal with realistic scenarios and with previously unseen data and new urban fabric types. The best performing model is chosen as the final production model, and retrained on the whole dataset.\n\nSatellite derived building footprints are becoming more widely adopted, however, the data does not come without issues. For example, in dense urban centres entire blocks can be delineated as individual buildings. Given that morphology calculations rely on precise local topological relations between neighbours, such as two buildings touching, this problem renders a whole number of possible measurements described in (Fleischmann, Romice, and Porta 2021) meaningless. Furthermore, this issue affects even simpler calculations such as counting the number of buildings within a radius or topological neighbourhood. Other issues are that computer vision techniques sometimes miss entire buildings or misidentify building boundaries. Therefore, any approach that uses satellite-derived building footprints should be able to account for these three and potentially other problems.\nImplementing these stages, and further realising the potential of the model for global application, requires the creation of novel, scalable data processing pipelines capable of analysing hundreds of millions of morphological elements - buildings, streets and their derivatives. Due to their scalability, these pipelines can further be reused for other work, outside of the immediate scope of this projects. To ensure maximum impact and high standards, all work for this project follows open science principles and is open-sourced on GitHub."
  },
  {
    "objectID": "notes/algorithm-design.html#ai-modelling-using-satellite-imagery",
    "href": "notes/algorithm-design.html#ai-modelling-using-satellite-imagery",
    "title": "Algorithm Design and Theoretical Basis Description",
    "section": "AI Modelling using Satellite Imagery",
    "text": "AI Modelling using Satellite Imagery\nAdvancements in satellite imagery and artificial intelligence (AI) have significantly enhanced our ability to analyze complex geospatial datasets. Satellite imagery provides detailed information at varying spatial and temporal scales, enabling applications that range from analyzing individual buildings to studying entire continents. By extracting visual and spectral data, satellite images offer insights into ground conditions such as land cover and land use classification (Esch et al. 2010; Ma et al. 2019; Ibrahim, Haworth, and Cheng 2020; Huang, Zhao, and Song 2018). AI algorithms transform these data into actionable insights by automating the analysis of vast amounts of pixel-level information. However, many conventional AI models are designed for specific tasks and require significant fine-tuning for new applications.\nThe emergence of foundation models in geospatial AI (GeoAI) marks a transformative shift. Unlike traditional task-specific models, foundation models are pre-trained on large, diverse datasets and can be adapted to multiple tasks with minimal additional training (Rolf et al. 2021). This adaptability is particularly useful in remote sensing, where data are often complex, integrating multi-spectral and multi-temporal information (Lu et al. 2024).\nFoundation models have recently demonstrated superior performance, especially in scenarios with limited labeled data. Transformer-based architectures, pre-trained on extensive multispectral datasets, have become central to GeoAI research. Notable examples include Prithvi (Jakubik et al. 2023) and SatlasPretrain (Bastani et al. 2023), which were trained on terabytes of imagery and millions of labeled instances. These models have achieved state-of-the-art results in tasks such as image classification and multi-temporal image segmentation, illustrating their ability to address diverse and complex Earth observation challenges."
  },
  {
    "objectID": "notes/algorithm-design.html#morphometric-classification-homogenisation-1",
    "href": "notes/algorithm-design.html#morphometric-classification-homogenisation-1",
    "title": "Algorithm Design and Theoretical Basis Description",
    "section": "Morphometric Classification Homogenisation",
    "text": "Morphometric Classification Homogenisation\n\nModel architecture\nThe model architecture consists of the two main components: 1) derivation of predictive variables, and 2) development of the predictive model. Given the target of the prediction is morphological classification, we use morphometric measurements based on the sub-standard satellite-derived data as predictive variables, as they are conceptually related - the original target classification is a result of unsupervised learning on top of morphometric measurements based on cadastral data. The model’s main job is then to capture the shift of meaning of individual characters from the original, when measured on precise geometries, to the derived one, measured on imperfect representation of urban form. Given the model will eventually perform a prediction out of the sample, we further build in a logic identifying the types of urban form it has not seen previously and ingesting then manually in the original taxonomy, forming an iterative feedback loop. The whole system is illustrated in Figure 1.\n\n\n\nProject workflow\n\n\nThe data preparation and model training consists of four stages. The first and second stages cover the morphometric characterisation, which acts as the model’s predictor variables, and the target variables generation. The third stage splits the whole study area into five subsets, so that every country and every combination of the four other countries in the area, act as test and training data respectively. The final stage is the model training and evaluation, aiming to minimise spatial leakage in the training and evaluation data, and testing the model’s performance on realistic scenarios. The full model training and evaluation framework will be implemented using scikit-learn pipelines.\n\n\nData preprocessing\n\nBuilding preprocessing\nAll available Microsoft building footprints for the study area are used for the analysis. Typically, building polygons required for morphological studies have to be of very high quality. For example, building polygons overlapping by a thousandth of a millimetre break topological contiguity and therefore affect the calculation of morphological properties, such as the ratio of shared walls, or the number of adjacent buildings. Furthermore, even the highest quality available software suffers from numerical precision issues which exasperate the above problem. Another potential issue is the inclusion of artefacts we are not directly interested in such as sheds or market stalls. Most importantly, polygons shall represent individual buildings, not compounds of buildings that are adjacent. The footprints used for this study fall short of these standards. Therefore, our approach aims to accommodate less than ideal data and methods, first by processing the building data, and second, by adapting the morphological calculations to account for numerical issues.\n\n\n\nComparison between MS buildings and cadastre level buildings in central Prague\n\n\nBefore dealing with any morphological assessment, the polygons need to undergo basic topological preprocessing.\nThe first step in the building data processing is to split up multi-polygons and make the geometries valid. The second step, is to simplify the polygons in order to accurately represent the corners of buildings and other shape related characteristics. Next, to filter out any buildings that have an area larger than 200,000 sq.m. This is done since some artefacts such as construction sites, mines or tunnels might be included in the data as buildings. The next step is to merge overlapping buildings that either: overlap for at least 10 percent of their areas, or one of them has less than 50 sq.m. in total area. This is done to merge buildings and building parts, since cadastre definitions of these two polygon types are inconsistent and sometimes buildings are assigned as building parts or vice versa. This step merges the buildings and its parts into one polygon. Finally, the preprocessing pipeline snaps nearby buildings together and fills gaps in the polygons that are less than 10 square cm. These two steps aim to address some common topological issues, such as missing slivers with almost zero areas between multiple or inside individual building polygons. Nevertheless, even after the preprocessing numerous topological issues remain and therefore we take this into account in subsequent analysis steps.\n\n\nOverture Streets\nThe street network is a direct download from Overture Maps Transportation theme, a processed subset of data from OpenStreetMap, which has global coverage and high quality data. Since the dataset includes multiple segments types, including footpaths, the types of segments used in the analysis are limited to a subset of network that reflects streets, excluding paths and service roads (among other). Another type of segment that is filtered out are tunnels - the analysis strictly focuses on two dimensions and therefore undergrounds structures adversely affect the calculation of boundaries and characters.\nThe second major stage of the street processing is the simplification of the entire street network for each subregion. The network coming from Overture Maps, similarly to nearly any other common source, focuses on representation of street network for transportation purposes. That means it tends to include multiple geometries for wide boulevards where each captures a single carriageway, complex representation of junctions or even the smallest artefacts of transportation-based focus. However, such a network is not directly usable for morphological analysis as it does not capture morphological perception of street network which is usually captured via street centrelines, omitting transportation detail. For this reason, we apply the simplification method based on the detection of the problematic parts of the network (Fleischmann and Vybornova 2024) by Fleischmann, Vybornova, and Gaboardi (Forthcoming). This ensures automatised algorithmic cleaning of street networks resulting in a morphological representation derived from the transportation one. \n\n\n\nStreets in central Prague\n\n\n\n\n\nMorphometric characterisation\nThe morphometric characterisation is directly derived from the method of (Fleischmann and Samardzhiev Forthcoming) as closely as possible to ensure that we minimise the conceptual differences between the methodological backbone using the derivation of the target classification and the the data used within our model.\n\nSubregions split\nSince the study area of interest is large and contains tens of millions of buildings, it is divided into subregions to carry out all computation. The separation is done based on distances between buildings - buildings are split into subregions such that the building from one region and its closest neighbour (another building) from another region are at least 400 meters apart. This custom separation, rather than official administrative divisions, ensures that all elements that may affect morphological calculations are in the same set (subregion) and not split across political boundaries. All processing and character calculations are done for each region independently and in parallel.\n\n\n\nAll subregions in the study area\n\n\n\n\nElements and units\nThere are five morphological elements used for the morphometric characterisation - two base ones - buildings and streets and three derived ones - enclosures, nodes, enclosed tessellation cells (ETC). Buildings and streets are the two elements from which all other units are derived. The core unit of analysis in the study is the enclosed tessellation cell, which breaks down the whole study area into small-scale units, which when taken together fully cover the area.\n\nNodes\nThe first type of derived element in the study are street nodes, which are defined as the intersection points between different streets. They are used to calculate characteristics of the street network that capture relationships between streets such as number of intersections, as well as relationships between neighbouring enclosures and ETCs.\n\n\n\nNodes in central Prague\n\n\n\n\nEnclosures\nEnclosures capture the characteristics of plots of land that contain from none to (usually) multiple buildings. They are operationalised as land delineations, surrounded by streets and other physical barriers, which can vary in size depending on the geographic context. If an area is in the city centre, each enclosure would approximate a single block and multiple building units, however if it was in an industrial area it would potentially encompass a single, or very few large buildings. In this study, only the street network is used for barriers to minimise the data dependency. Furthermore, enclosures are used to delineate the boundaries of enclosed tessellation cells to the surrounding streets - i.e. representing physical barriers.\nIn this study, enclosure delineation is further modified by introducing a variable, individual bandwidth for every building, as opposed to the global one used by (Fleischmann et al. 2022) or none using in generic enclosure delineation. This is done to limit the boundaries effects around the edges of cities and towns - i.e. cells on the edges of cities in (Fleischmann et al. 2022) are always large because there are no surrounding buildings and their cells resemble those of large buildings with lots of empty space around them. The limits used here are calculated through a Gabriel graph-based filtration of the subregion, which takes into account the surrounding neighbours structure around every ETC. For example, in row housing the buffer will be relatively small, in single family housing estates the buffer will be larger, and in industrial areas larger still; regardless of whether or not these buildings are in the middle of cities or around their edges. The detailed technical implementation is out of scope of this Technical Note.\n\n\n\nEnclosures in central Prague\n\n\n\n\nEnclosed Tessellation Cells\nEnclosed Tessellation Cells are the core unit used for the analysis and the one used to combine aspects of all of the other four elements. To operationalise it, the study follows the definition by (Fleischmann et al. 2022) - “the portion of space that results from growing a morphological tessellation within an enclosure delineated by a series of natural or built barriers identified from the literature on urban form, function and perception”, where the morphological tessellation is a delineation of the space based on Voronoi polygons centred around buildings. The boundaries of ETCs also represent the closest area of land to each building, than to any other building within an enclosure. Because of this feature, ETCs intersect with all other elements and are the unit that links together the characteristics of the four other elements. In some cases, if there are no buildings within the enclosure the whole enclosure is treated as an ‘empty’ tessellation cell.\n\n\n\nEnclosed tessellation cells in central Prague\n\n\n\n\nMorphometric Characters\nCharacteristics describing the interactions of these elements, and the elements themselves are calculated at three scales: small - covering only aspects of the element; medium - covering aspects of the element and neighbouring elements and large - covering neighbouring elements up to five topological neighbours. In total there are 52 morphometric characters calculated described in the list below, which come directly from the list of characters used to derive the target classification.\n\nArea of a building is denoted as\n\n\n\\(a_{blg}\\)\n\nand defined as an area covered by a building footprint in m2 .\n\nPerimeter of a building is denoted as\n\n\n\\(p_{blg}\\)\n\nand defined as the sum of lengths of the building exterior walls in m.\n\nCourtyard area of a building is denoted as\n\n\n\\(a_{blg_c}\\)\n\nand defined as the sum of areas of interior holes in footprint polygons in m2.\n\nCircular compactness of a building is denoted as\n\n\n\\(CCo_{blg} = \\frac{a_{blg}}{a_{blgC}}\\)\n\nwhere \\(a_{blgC}\\) is an area of minimal enclosing circle. It captures the relation of building footprint shape to its minimal enclosing circle, illustrating the similarity of shape and circle (Dibble et al. 2015).\n\nCorners of a building is denoted as\n\n\n\\(Cor_{blg} = \\sum_{i=1}^{n}{c_{blg}}\\)\n\nwhere \\(c_{blg}\\) is defined as a vertex of building exterior shape with an angle between adjacent line segments \\(\\leq\\) 170 degrees. It uses only external shape (shapely.geometry.exterior), courtyards are not included. Character is adapted from (Steiniger et al. 2008) to exclude non-corner-like vertices.\n\nSquareness of a building is denoted as\n\n\n\\(Squ_{blg} =  \\frac{\\sum_{i=1}^{n} D_{c_{blg_i}}}{n}\\)\n\nwhere \\(D\\) is the deviation of angle of corner \\(c_{blg_i}\\) from 90 degrees and \\(n\\) is a number of corners.\n\nEquivalent rectangular index of a building is denoted as\n\n\n\\(ERI_{blg} =  \\sqrt{{a_{blg}} \\over {a_{blgB}}} * {p_{blgB} \\over p_{blg}}\\)\n\nwhere \\(a_{blgB}\\) is an area of a minimal rotated bounding rectangle of a building (MBR) footprint and \\(p_{blgB}\\) its perimeter of MBR. It is a measure of shape complexity identified by Basaraner and Cetinkaya (2017) as the shape characters with the best performance.\n\nElongation of a building is denoted as\n\n\n\\(Elo_{blg} =  \\frac{l_{blgB}}{w_{blgB}}\\)\n\nwhere \\(l_{blgB}\\) is length of MBR and \\(w_{blgB}\\) is width of MBR. It captures the ratio of shorter to the longer dimension of MBR to indirectly capture the deviation of the shape from a square (Schirmer and Axhausen 2015).\n\nCentroid - corner distance deviation of a building is denoted as\n\n\n\\(CCD_{blg} =  \\sqrt{\\frac{1}{n} \\sum_{i=1}^{n}\\left(ccd_{i}-\\bar{ccd}\\right)^{2}}\\)\n\nwhere \\(ccd_i\\) is a distance between centroid and corner \\(i\\) and \\(\\bar{ccd}\\) is mean of all distances. It captures a variety of shape. As a corner is considered vertex with angle &lt; 170º to reflect potential circularity of object and topological imprecision of building polygon.\n\nCentroid - corner mean distance of a building is denoted as\n\n\n\\(CCM_{blg} =\\frac{1}{n}\\left(\\sum_{i=1}^{n} ccd_{i}\\right)\\)\n\nwhere \\(ccd_i\\) is a distance between centroid and corner \\(i\\). It is a character measuring a dimension of the object dependent on its shape (Schirmer and Axhausen 2015).\n\nLongest axis length of a tessellation cell is denoted as\n\n\n\\(LAL_{cell} = d_{cellC}\\)\n\nwhere \\(d_{cellC}\\) is a diameter of the minimal circumscribed circle around the tessellation cell polygon. The axis itself does not have to be fully within the polygon. It could be seen as a proxy of plot depth for tessellation-based analysis.\n\nArea of a tessellation cell is denoted as\n\n\n\\(a_{cell}\\)\n\nand defined as an area covered by a tessellation cell footprint in m2.\n\nCircular compactness of a tessellation cell is denoted as\n\n\n\\(CCo_{cell} = \\frac{a_{cell}}{a_{cellC}}\\)\n\nwhere \\(a_{cellC}\\) is an area of minimal enclosing circle. It captures the relation of tessellation cell footprint shape to its minimal enclosing circle, illustrating the similarity of shape and circle.\n\nEquivalent rectangular index of a tessellation cell is denoted as\n\n\n\\(ERI_{cell} =  \\sqrt{{a_{cell}} \\over {a_{cellB}}} * {p_{cellB} \\over p_{cell}}\\)\n\nwhere \\(a_{cellB}\\) is an area of the minimal rotated bounding rectangle of a tessellation cell (MBR) footprint and \\(p_{cellB}\\) its perimeter of MBR. It is a measure of shape complexity identified by Basaraner and Cetinkaya (2017) as a shape character of the best performance.\n\nCoverage area ratio of a tessellation cell is denoted as\n\n\n\\(CAR_{cell} = \\frac{a_{blg}}{a_{cell}}\\)\n\nwhere \\(a_{blg}\\) is an area of a building and \\(a_{cell}\\) is an area of related tessellation cell (Schirmer and Axhausen 2015). Coverage area ratio (CAR) is one of the commonly used characters capturing intensity of development. However, the definitions vary based on the spatial unit.\n\nFloor area ratio of a tessellation cell is denoted as\n\n\n\\(FAR_{cell} = \\frac{fa_{blg}}{a_{cell}}\\)\n\nwhere \\(fa_{blg}\\) is a floor area of a building and \\(a_{cell}\\) is an area of related tessellation cell. Floor area could be computed based on the number of levels or using an approximation based on building height.\n\nLength of a street segment is denoted as\n\n\n\\(l_{edg}\\)\n\nand defined as a length of a LineString geometry in metres (Dibble et al. 2015; Gil et al. 2012).\n\nWidth of a street profile is denoted as\n\n\n\\(w_{sp} = \\frac{1}{n}\\left(\\sum_{i=1}^{n} w_{i}\\right)\\)\n\nwhere \\(w_{i}\\) is width of a street section i. The algorithm generates street sections every 3 meters alongside the street segment, and measures mean value. In the case of the open-ended street, 50 metres is used as a perception-based proximity limit (Araldi and Fusco 2019).\n\nOpenness of a street profile is denoted as\n\n\n\\(Ope_{sp} = 1 - \\frac{\\sum hit}{2\\sum sec}\\)\n\nwhere \\(\\sum hit\\) is a sum of section lines (left and right sides separately) intersecting buildings and \\(\\sum sec\\) total number of street sections. The algorithm generates street sections every 3 meters alongside the street segment.\n\nWidth deviation of a street profile is denoted as\n\n\n\\(wDev_{sp} = \\sqrt{\\frac{1}{n} \\sum_{i=1}^{n}\\left(w_{i}-w_{sp}\\right)^{2}}\\)\n\nwhere \\(w_{i}\\) is width of a street section i and \\(w_{sp}\\) is mean width. The algorithm generates street sections every 3 meters alongside the street segment.\n\nLinearity of a street segment is denoted as\n\n\n\\(Lin_{edg} = \\frac{l_{eucl}}{l_{edg}}\\)\n\nwhere \\(l_{eucl}\\) is Euclidean distance between endpoints of a street segment and \\(l_{edg}\\) is a street segment length. It captures the deviation of a segment shape from a straight line. It is adapted from Araldi and Fusco (2019).\n\nArea covered by a street segment is denoted as\n\n\n\\(a_{edg} = \\sum_{i=1}^{n} a_{cell_i}\\)\n\nwhere \\(a_{cell_i}\\) is an area of tessellation cell \\(i\\) belonging to the street segment. It captures the area which is likely served by each segment.\n\nBuildings per meter of a street segment is denoted as\n\n\n\\(BpM_{edg} = \\frac{\\sum blg}{l_{edg}}\\)\n\nwhere \\(\\sum blg\\) is a number of buildings belonging to a street segment and \\(l_{edg}\\) is a length of a street segment. It reflects the granularity of development along each segment.\n\nArea covered by a street node is denoted as\n\n\n\\(a_{node} = \\sum_{i=1}^{n} a_{cell_i}\\)\n\nwhere \\(a_{cell_i}\\) is an area of tessellation cell \\(i\\) belonging to the street node. It captures the area which is likely served by each node.\n\nShared walls ratio of adjacent buildings is denoted as\n\n\n\\(SWR_{blg} = \\frac{p_{blg_{shared}}}{p_{blg}}\\)\n\nwhere \\(p_{blg_{shared}}\\) is a length of a perimeter shared with adjacent buildings and \\(p_{blg}\\) is a perimeter of a building. It captures the amount of wall space facing the open space (Hamaina, Leduc, and Moreau 2012).\n\n‌Mean distance to neighbouring buildings is denoted as\n\n\n\\(NDi_{blg} = \\frac{1}{n} \\sum_{i=1}^{n} d_{blg, blg_i}\\)\n\nwhere \\(d_{blg, blg_i}\\) is a distance between building and building \\(i\\) on a neighbouring tessellation cell. It is adapted from Hijazi et al. (2016). It captures the average proximity to other buildings.\n\nWeighted neighbours of a tessellation cell is denoted as\n\n\n\\(WNe_{cell} = \\frac{\\sum cell_n}{p_{cell}}\\)\n\nwhere \\(\\sum cell_n\\) is a number of cell neighbours and \\(p_{cell}\\) is a perimeter of a cell. It reflects granularity of morphological tessellation.\n\nArea covered by neighbouring cells is denoted as\n\n\n\\(a_{cell_n} = \\sum_{i=1}^{n} a_{cell_i}\\)\n\nwhere \\(a_{cell_i}\\) is area of tessellation cell \\(i\\) within topological distance 1. It captures the scale of morphological tessellation.\n\nReached cells by neighbouring segments is denoted as\n\n\n\\(RC_{edg_n} = \\sum_{i=1}^{n} cells_{edg_i}\\)\n\nwhere \\(cells_{edg_i}\\) is number of tessellation cells on segment \\(i\\) within topological distance 1. It captures accessible granularity.\n\nReached area by neighbouring segments is denoted as\n\n\n\\(a_{edg_n} = \\sum_{i=1}^{n} a_{edg_i}\\)\n\nwhere \\(a_{edg_i}\\) is an area covered by a street segment \\(i\\) within topological distance 1. It captures an accessible area.\n\nDegree of a street node is denoted as\n\n\n\\(deg_{node_i} = \\sum_{j} edg_{i j}\\)\n\nwhere \\(edg_{i j}\\) is an edge of a street network between node \\(i\\) and node \\(j\\). It reflects the basic degree centrality.\n\nMean distance to neighbouring nodes from a street node is denoted as\n\n\n\\(MDi_{node} = \\frac{1}{n} \\sum_{i=1}^{n} d_{node, node_i}\\)\n\nwhere \\(d_{node, node_i}\\) is a distance between node and node \\(i\\) within topological distance 1. It captures the average proximity to other nodes.\n\nReached cells by neighbouring nodes is denoted as\n\n\n\\(RC_{node_n} = \\sum_{i=1}^{n} cells_{node_i}\\)\n\nwhere \\(cells_{node_i}\\) is number of tessellation cells on node \\(i\\) within topological distance 1. It captures accessible granularity.\n\nReached area by neighbouring nodes is denoted as\n\n\n\\(a_{node_n} = \\sum_{i=1}^{n} a_{node_i}\\)\n\nwhere \\(a_{node_i}\\) is an area covered by a street node \\(i\\) within topological distance 1. It captures an accessible area.\n\nNumber of courtyards of adjacent buildings is denoted as\n\n\n\\(NCo_{blg_{adj}}\\)\n\nwhere \\(NCo_{blg_{adj}}\\) is a number of interior rings of a polygon composed of footprints of adjacent buildings (Schirmer and Axhausen 2015).\n\nPerimeter wall length of adjacent buildings is denoted as\n\n\n\\(p_{blg_{adj}}\\)\n\nwhere \\(p_{blg_{adj}}\\) is a length of an exterior ring of a polygon composed of footprints of adjacent buildings.\n\nMean inter-building distance between neighbouring buildings is denoted as\n\n\n\\(IBD_{blg} = \\frac{1}{n} \\sum_{i=1}^{n} d_{blg, blg_i}\\)\n\nwhere \\(d_{blg, blg_i}\\) is a distance between building and building \\(i\\) on a tessellation cell within topological distance 3. It is adapted from Caruso, Hilal, and Thomas (2017). It captures the average proximity between buildings.\n\n‌Building adjacency of neighbouring buildings is denoted as\n\n\n\\(BuA_{blg} = \\frac{\\sum blg_{adj}}{\\sum blg}\\)\n\nwhere \\(\\sum blg_{adj}\\) is a number of joined built-up structures within topological distance three and \\(\\sum blg\\) is a number of buildings within topological distance 3. It is adapted from Vanderhaegen and Canters (2017).\n\nWeighted reached blocks of neighbouring tessellation cells is denoted as\n\n\n\\(WRB_{cell} = \\frac{\\sum blk}{\\sum_{i=1}^{n} a_{cell_i}}\\)\n\nwhere \\(\\sum blk\\) is a number of blocks within topological distance three and \\(a_{cell_i}\\) is an area of tessellation cell \\(i\\) within topological distance three.\n\nLocal meshedness of a street network is denoted as\n\n\n\\(Mes_{node}= \\frac{e-v+1}{2 v-5}\\)\n\nwhere \\(e\\) is a number of edges in a subgraph, and \\(v\\) is the number of nodes in a subgraph (Feliciotti 2018). A subgraph is defined as a network within topological distance five around a node.\n\nMean segment length of a street network is denoted as\n\n\n\\(MSL_{edg} = \\frac{1}{n} \\sum_{i=1}^{n} l_{edg_i}\\)\n\nwhere \\(l_{edg_i}\\) is a length of a street segment \\(i\\) within a topological distance 3 around a segment.\n\nCul-de-sac length of a street network is denoted as\n\n\n\\(CDL_{node} = \\sum_{i=1}^{n} l_{edg_i}, \\text { if }edg_i \\text { is cul-de-sac}\\)\n\nwhere \\(l_{edg_i}\\) is a length of a street segment \\(i\\) within a topological distance 3 around a node.\n\nReached cells by street network segments is denoted as\n\n\n\\(RC_{edg} = \\sum_{i=1}^{n} cells_{edg_i}\\)\n\nwhere \\(cells_{edg_i}\\) is number of tessellation cells on segment \\(i\\) within topological distance 3. It captures accessible granularity.\n\nNode density of a street network is denoted as\n\n\n\\(D_{node} = \\frac{\\sum node}{\\sum_{i=1}^{n} l_{edg_i}}\\)\n\nwhere \\(\\sum node\\) is a number of nodes within a subgraph and \\(l_{edg_i}\\) is a length of a segment \\(i\\) within a subgraph. A subgraph is defined as a network within topological distance five around a node.\n\nReached cells by street network nodes is denoted as\n\n\n\\(RC_{node_{net}} = \\sum_{i=1}^{n} cells_{node_i}\\)\n\nwhere \\(cells_{node_i}\\) is number of tessellation cells on node \\(i\\) within topological distance 3. It captures accessible granularity.\n\nReached area by street network nodes is denoted as\n\n\n\\(a_{node_{net}} = \\sum_{i=1}^{n} a_{node_i}\\)\n\nwhere \\(a_{node_i}\\) is an area covered by a street node \\(i\\) within topological distance 3. It captures an accessible area.\n\nProportion of cul-de-sacs within a street network is denoted as\n\n\n\\(pCD_{node} = \\frac{\\sum_{i=1}^{n} node_i, \\text { if }deg_{node_i} = 1}{\\sum_{i=1}^{n} node_i}\\)\n\nwhere \\(node_i\\) is a node whiting topological distance five around a node. Adapted from (Boeing 2017).\n\nProportion of 3-way intersections within a street network is denoted as\n\n\n\\(p3W_{node} = \\frac{\\sum_{i=1}^{n} node_i, \\text { if }deg_{node_i} = 3}{\\sum_{i=1}^{n} node_i}\\)\n\nwhere \\(node_i\\) is a node whiting topological distance five around a node. Adapted from (Boeing 2017).\n\nProportion of 4-way intersections within a street network is denoted as\n\n\n\\(p4W_{node} = \\frac{\\sum_{i=1}^{n} node_i, \\text { if }deg_{node_i} = 4}{\\sum_{i=1}^{n} node_i}\\)\n\nwhere \\(node_i\\) is a node whiting topological distance five around a node. Adapted from (Boeing 2017).\n\nWeighted node density of a street network is denoted as\n\n\n\\(wD_{node} = \\frac{\\sum_{i=1}^{n} deg_{node_i} - 1}{\\sum_{i=1}^{n} l_{edg_i}}\\)\n\nwhere \\(deg_{node_i}\\) is a degree of a node \\(i\\) within a subgraph and \\(l_{edg_i}\\) is a length of a segment \\(i\\) within a subgraph. A subgraph is defined as a network within topological distance five around a node.\n\nLocal closeness centrality of a street network is denoted as\n\n\n\\(lCC_{node} = \\frac{n - 1}{\\sum_{v=1}^{n-1} d(v, u)}\\)\n\nwhere \\(d(v, u)\\) is the shortest-path distance between \\(v\\) and \\(u\\), and \\(n\\) is the number of nodes within a subgraph. A subgraph is defined as a network within topological distance five around a node.\n\nSquare clustering of a street network is denoted as\n\n\n\\(sCl_{node} = \\frac{\\sum_{u=1}^{k_{v}} \\sum_{w=u+1}^{k_{v}} q_{v}(u, w)}{\\sum_{u=1}^{k_{v}} \\sum_{w=u+1}^{k_{v}}\\left[a_{v}(u, w)+q_{v}(u, w)\\right]}\\)\n\nwhere \\(q_v(u,w)\\) are the number of common neighbours of \\(u\\) and \\(w\\) other than \\(v\\) (ie squares), and \\(a_v(u,w) = (k_u - (1+q_v(u,w)+\\theta_{uv}))(k_w - (1+q_v(u,w)+\\theta_{uw}))\\), where \\(\\theta_{uw} = 1\\) if \\(u\\) and \\(w\\) are connected and 0 otherwise (Lind, González, and Herrmann 2005).\n\n\n\n\nTarget labels\nFor the second stage, we assign a target classification label to every ETC derived using the satellite-derived polygons. This is done based on spatial intersection between EuroFab and (Fleischmann and Samardzhiev Forthcoming) ETCs. In cases where there are multiple detailed tessellation cells that fall within the range of a single EuroFab ETC, the label is decided based on majority.\nSince the final output of (Fleischmann and Samardzhiev Forthcoming) is a hierarchy, rather than a flat clustering there are several options how to pick the specific target labels. Generally, clusters lower in the hierarchy represent classifications of urban fabrics at more granular scales. For example, depending on the hierarchy cutoff point historical urban areas can be one cluster, or can be separated into two - medieval and industrial-era urban fabrics.\nThe specific selection of cutoff points will follow (Fleischmann and Samardzhiev Forthcoming). The first set of urban fabrics we will aim to predict, broadly differentiates - different types of houses; from heterogenous historical urbanised areas; from recent modern urban developments such as apartment blocks and commercial areas; from large industrial areas.\n\n\n\nHigh-level urban fabrics in Prague\n\n\nThe second set breaks down each of the first sets into multiple subsets. It goes into more detail and splits the houses into more classes, based on features such as size and proximity to cities; it also splits the historical areas based on origin - medieval, industrial-era and others; the modern urban developments into subclasses such as different types of modernist apartment blocks, commercial areas, offices and others; and the several industrial area types. By analysing the model performance across two different hierarchical levels, we will understand what is the highest resolution detail the model can predict, given the shortcomings of the data and which factors affect predictions.\n\n\n\nMore detailed urban fabrics in Prague\n\n\n\n\n\nPrediction modelling and train/test split\n\nThe main aim of the modelling task is to generate a classification of morphological elements of similar quality to (Fleischmann and Samardzhiev Forthcoming) given the data quality limitations, albeit flat, not hierarchical. To achieve this we create an evaluation framework for the selection of non-linear tree-based models like a random forest classifier or an XGBoost model. We use the satellite-derived buildings, their ETCs and their characteristics as input data and the clusters from (Fleischmann and Samardzhiev Forthcoming) as target labels for a classification task. The choice of tree-based learning models is due to their readily available implementations, high scalability and ability to quickly offer interpretation insights. Furthermore, they handle well high dimensional data, non-linear interactions and require minimal hyper-parameter tuning. The flexibility of the models and the specific training/testing framework setup will allow us to not just produce a predictive model but also to identify potential areas for improvement in the original data preprocessing.\n\nSince we want the final production model to be general and applicable to large areas i.e. whole continents, it needs to be able to handle previously unseen urban fabric types. For example, an urban morphology type that is present in the test data, or in another study area, might not be present in the training data and in that case the model should flag its predicted label as uncertain. This is another area where tree models have an advantage, since they are ensemble methods and this can help reduces their tendency to overfit. They also readily provide a confidence score for each prediction which can be used to flag unseen data. Furthermore, we take extra care to evaluate the final production models performance in realistic scenarios and the relationship between its accuracy on test data and whole countries that are not part of the model training or test data.\n\nTo achieve this we split the study area into five subsets and train five independent iterations of each model. This is done so that that every country and every combination of countries is used as final hold-out test data and training/validation pipeline respectively. For example, one iteration will use Germany, Poland, Czechia and Austria as part of its training/validation pipeline, whereas Slovakia will be used as the hold-out data.\n\n\n\nModel evaluation and training setup\n\n\nThis strategy acts as an extra check against overfitting and ultimately enable us to see how the final production model will perform in realistic scenarios - applying it to whole countries which are not used for the training or testing at all. This comes with at least two advantages over simply reporting a test score on a random sample. First, it is a test of model performance on a dataset that does not have any spatial leakage with the training or testing data. Second, it ensures that we evaluate model performance on unseen urban fabric types from other countries. We can afford to do this in part due to the large size of the data we are working with. In every permutation there will be a rich variety of urban fabrics and tens of millions of ETCs used in the model training.\n\n\nTraining and evaluation\nLastly, after splitting the study area into five subsets, we create a schema that will dictate how to split the training data of each subset for the classification task. We use five-fold cross validation for hyper parameter tuning, based on spatial contiguity. Random subsetting does not work for this study, since we need to account for spatial dependency and the related data leakage between train and evaluation data. The spatial leakage comes from both the nature of the data - spatial contiguity is one of the core aspects of morphological elements - but also from the way characters are calculated based on various nearest topological neighbours.\nTo account for this, we aggregate nearby ETCs into higher granularity spatial units - level 7 H3 cells - and randomly split these units into five groups, to carry out the cross-validation training. This ensures that the majority of the ETCs and their neighbours in one set are not present in the other sets, and therefore spatial leakage is minimised. We use level 7 H3 cells, which represent a delineation of the globe into hexagons with an area of approximately 5 sq. km. , rather than enclosures or ETC contiguity, to ensure that contiguous subsets of test data cover areas of heterogenous elements and present the model with a realistic validation scenario.\n\n\n\nExample iteration in a five-fold cross validation split. Only one group is highlighted in blue, with its ETCs plotted in green, which will be used as a hold-out data for accuracy evaluation and hyper parameter tuning.\n\n\n\n\n\nExample hexagon in the validation split\n\n\nThe model training and evaluation will follow standard best practices - model coefficients and hyper parameter tuning, such as the decision threshold will be optimised based on the training subset, and all of the data in the hold-out country will be used to give a final model accuracy score. Specifically, the models will use balanced accuracy as the optimisation metric in order to account for imbalances in the distribution of urban fabric classes. The extra validation steps we carry out with the hold-out countries will be used to used in three ways. First, to contextualise the final models’ accuracy on the test data; second, to indicate how the model will perform on other countries; and third to see how it handles urban fabric types not seen in the training in a realistic scenario.\nThe final production model is trained on the whole dataset, using the same hyper parameter grid search configuration and training/test spatial split.\n\n\nPreliminary results\nWe have implemented a preliminary pipeline that carries out full data preprocessing - generating morphological elements and characters, assigning target labels and some exploratory modelling. The core functionality for all of this was made available within open-source packages - momepy, libpysal, sgeop (the name of which may eventually change).\nBased on the preliminary results, there are 56,845,150 Microsoft building footprints for our study area, which are split into 474 subregions. This is significantly less than the available cadastre data, which has around 88 million buildings and are separated into 828 regions. The number of downloaded, unprocessed streets is similar to those in (Fleischmann and Samardzhiev Forthcoming) - 23,332,865 - since they cover the same study area and come from the same source - Overture Maps, which is a processed subset of OpenStreepMap. However, the number of tessellation cells is the same as the buildings and therefore less than the cadastre data-based classification. Furthermore, the street simplification algorithm is affected by the available buildings, and therefore in turn also affects the tessellation cell boundaries.\nThese results highlight the effect of the satellite derived building footprints that have been discussed in the Technical Note D3 . There are significantly less subregions in the study area primarily due to the effect of the threshold of 10k buildings required for a region. As the adjacent buildings tend to be merged, the algorithm needs to cover larger area before reaching the threshold, resulting in the lower number of regions. However, as the region split is purely procedural step allowing efficient processing of data, this is not an issue of any sort.\n\nAs a first modelling step we tried a random forest (RF) classifier on a subset of the data covering the region surrounding Prague. The goal was to evaluate the project workflow and the feasibility of the proposed model architecture, rather than the specific model’s performance. We trained and tested the same simple RF model on the data within the same region, split in different ways - one was based on stratified spatial k-fold train/test splits (our proposed setup) and another based on random train/test splits. The latter model with random sampling had an accuracy of 0.95 versus an accuracy of 0.68 for the former model with spatial stratification. The difference in accuracy highlights the extent of spatial leakage of information and the need for the proposed spatially explicit train/test/validation split of the data. Otherwise, the performance of the production model would be significantly lower than what the training data suggest. In any case, the relatively high accuracy score of the models hint towards the viability of predicting urban fabric types.\nIn total, the results point towards two things. First, they further show need for a non-linear classification model, cable of accounting for the discrepancies between satellite-derived building footprint and cadastral data. Second, the utility of our designed framework to account for spatial leakage and evaluate model performance in more realistic scenarios.\n\n\nLimitations & Potential problems\nOne limitation of the approach is its reliance on primarily European data for training and evaluation. Therefore, the model may struggle to provide meaningful classifications in other contexts. There is no equivalent in the training data for the vast urban sprawl patterns present in the United States, for example. Nevertheless, there are urban fabric types present in the model which are ubiquitous in a lot of non-European contexts, such as communist planned areas in Asia, historical city centres, single housing areas and others.\nA potential problem is class imbalance when training the model and after was when calculating its accuracy. If such an issue is present in the country split experiments, we aim to address it by under-sampling the target classes. We can afford to under-sample, rather than oversample, since our data covers a large geographical area and each class has tens of thousands of instances at the very least."
  },
  {
    "objectID": "notes/algorithm-design.html#ai-modelling-using-satellite-imagery-1",
    "href": "notes/algorithm-design.html#ai-modelling-using-satellite-imagery-1",
    "title": "Algorithm Design and Theoretical Basis Description",
    "section": "AI Modelling using Satellite Imagery",
    "text": "AI Modelling using Satellite Imagery\nIn satellite image analysis, classification and segmentation address spatial labelling at different levels of granularity, with classification assigning a single label to an image tile or cell, while segmentation provides pixel-level detail. In our study, the label dataset does not always correspond directly to identifiable features in the imagery, making classification a potentially more suitable approach as it generalises each tile’s dominant land cover type without requiring exact pixel alignment. However, we explore both approaches: classification for a tile-based analysis and segmentation for finer, boundary-specific mapping. This dual approach enables us to evaluate how each method performs given the scale and nature of the dataset.\n\nData preprocessing\nFor our analysis, we employ two distinct datasets of image tiles at varying scales. These datasets enable us to evaluate both segmentation and classification tasks for urban fabric prediction. We choose a larger tile size for the segmentation task since most segmentation models work better with conventional image sizes (such as 224 x 224 pixels) and they are also a lot more efficient since the dataset is not as large. For classification, the tile size represents the scale of the analysis and for that reason we chose a smaller tile size of 56x56 pixels.\n\nSegmentation Dataset: Comprising 26,753 tiles, each 224 x 224 pixels (covering 2240 x 2240 meters). Of these, 21,402 tiles are allocated for training, and 5,351 for testing.\nClassification Dataset: Comprising 403,722 tiles, each 56 x 56 pixels (covering 560 x 560 meters). The training set consists of 342,648 tiles, with the remaining 61,074 reserved for testing.\n\nTo ensure consistency across both tasks, we exclusively use tiles that fully overlap with the spatial signature labels. This alignment facilitates robust pixel-level comparisons of classification and segmentation outcomes while maintaining compatibility with our urban fabric typology as shown below.\n\n\n\n\n\n\nUnbalanced dataset\nA significant challenge in our dataset is class imbalance, where certain urban fabric types are much more prevalent than others. This imbalance required careful consideration in model design and loss function selection, prompting us to explore approaches that could better handle uneven class distributions.\nThe figure below visualizes the class distribution of spatial signatures, highlighting the imbalance across different urban fabric types. Notably, the countryside agriculture and wild countryside classes are more dominant compared to the more urban-centric classes.\n\n\n\n\n\n\n\nTrain/test split\nThe dataset is divided into 80% for training and 20% for testing across both tasks. The segmentation and classification datasets share the same test samples, which helps make the results more comparable and allows us to evaluate performance across both tasks at the same time.\nThe figures below show how the training and testing datasets sampled across the whole study area:\n \nWe used standard, pre-configured neural network setups without tuning the hyperparameters, due to the constraints of the project. As a result, we did not include a validation split in these experiments.\n\n\n\nModel architectures\nTo assess the performance of different AI models for urban fabric classification and segmentation, we designed three distinct experimental approaches. Each approach leverages different combinations of pre-trained models and fine-tuning strategies to evaluate their ability to accurately classify and segment urban fabric types. The following experiments were carried out to explore the effectiveness of both image embeddings and geospatial foundation models in addressing the challenges posed by urban fabric analysis:\nWe conducted three main experiments as part of the AI model design to analyze urban fabric classification and segmentation.\n\nApproach A (Embedding approach): We start with a baseline experiment, where we generate image embeddings using the SatlasPretrain model. These embeddings are then fed into an XGBoost classifier to predict urban fabric classes.\nApproach B (Segmentation approach): Next, we fine-tune three different geospatial foundation models—SatlasPretrain, Clay, and IBM/NASA’s Prithvi model—specifically for segmentation tasks.\nApproach C (Classification approach): Finally, we take the best-performing geospatial foundation model from the segmentation experiments (Clay) and fine-tune it for the classification task.\n\nTo evaluate and compare the results of these approaches, we report weighted pixel-level accuracy, F1 score, and Intersection over Union (IoU) metrics.\n\nBaseline embedding approach (Approach A)\nIn the first experiment, we implement a baseline approach using image embeddings created by a geospatial foundation model, followed by classification with an XGBoost model. This approach is computationally efficient and easy to implement, making it a good starting point for comparison. Once the embeddings are generated, they can be directly input into a machine learning (ML) model for classification.\nThe tiles are processed by the SatlasPretrain model (Bastani et al. 2023), a geospatial foundation model pretrained on more than 302 million labels from remote sensing and computer vision tasks. We chose this model because it was specifically trained on Sentinel-2 images, making it a good fit for our dataset.\nThe model works in two steps:\n\nFoundation Model: We use a Vision Transformer (ViT) with a Feature Pyramid Network (FPN) and a pooling layer to generate image embeddings. These embeddings are lower-dimensional representations of the images.\nMachine Learning Classifier: The generated embeddings are then passed into an XGBoost classifier, which predicts the urban fabric classes across England.\n\nThe diagram below illustrates this baseline approach: \nBaseline approach (ordinal)\nIn addition to the basic classification task, we also explored an ordinal regression approach. Since the urban fabric classes represent a continuum rather than strictly categorical data, this approach accounts for the ordering between the classes. The following ordinal mapping was applied to model the spatial signatures:\nordinal_mapping = {     'Wild countryside': 0,     'Countryside agriculture': 1,     'Urban buffer': 2,     'Open sprawl': 3,     'Disconnected suburbia': 4,     'Accessible suburbia': 5,     'Warehouse/Park land': 6,     'Gridded residential quarters': 7,     'Connected residential neighbourhoods': 8,     'Dense residential neighbourhoods': 9,     'Dense urban neighbourhoods': 10,     'Urbanity': 11, }\nUsing this ordinal mapping, the model achieved a Mean Absolute Error (MAE) and Mean Squared Error (MSE) of 0.28, with an R² score of 0.62. The Sankey diagram below shows the main misclassifications, which typically occur between similar urban fabric types.\n\n\n\n\n\nFor pixel-level comparison, we round the predicted values to the closest class and report them in the overview in the Preliminary results section.\nBaseline approach + spatial context\nTo further improve model performance, we added spatial context by including regional geographical information to the predictive model. We thus added the regional H3 resolution 5 code as categorical variable to the machine learning models. The visualisation below shows the hexagons plotted on top of England.\n\n\n\n\n\n\n\nSegmentation (Approach B)\nIn this section, we explore segmentation using a fine-tuned geospatial foundation model. We trained three state-of-the-art models on 224x224x3 image tiles to classify urban fabric types at a pixel level. Each model was fine-tuned for 10 epochs, and we evaluated their performance using key metrics. The models we tested vary in architecture and dataset size, as summarized below:\n\n\n\nModel\nArchitecture\nDataset Size\nImage Sources\n\n\n\n\nSatlas 1\nSwinT\n302M labels\nSentinel-2\n\n\nClay 2\nMAE/ViT\n70M labels\nMultiple+\n\n\nPrithvi 3\nMAE/ViT\n250 PB\nSentinel-2/Landsat\n\n\n\n+Multiple sources include Sentinel-2, Landsat, NAIP, and LINZ\nThese models differ mainly in their backbone architecture and the datasets they were pretrained on, which impacts their ability to capture different spatial and spectral features from the input images.\nThe following visualisations show the varying model configurations for the three different approaches tested for the segmentation task. The main difference is the varying backbone.\n\n\nModel 1: Satlas\n\n\n\n\n\n\n\nModel 2: Clay\n\n\n\n\n\n\n\nModel 3: Prithvi\n\n\n\n\n\nAfter fine-tuning each model for 10 epochs, we compared their performance based on weighted accuracy, Intersection over Union (IoU), and F1 score, among other metrics. The table below summarizes the results of the segmentation model comparison:\n\n\n\nMetric\nSatlas\nClay\nPrithvi\n\n\n\n\nWeighted Accuracy\n0.57\n0.72\n0.62\n\n\nWeighted IoU\n0.33\n0.58\n0.41\n\n\nWeighted F1\n0.41\n0.69\n0.58\n\n\nTraining Time/Epoch\n9 mins\n8 mins\n20 mins\n\n\nParameters\n90M\n86M\n120M\n\n\nImplementation Score\n5/10\n6/10\n7/10\n\n\n\nThe Clay model outperformed the others across all metrics, demonstrating the best performance in terms of weighted accuracy, IoU, and F1 score, while maintaining reasonable training times and computational efficiency.\nThe choice of loss function played a crucial role in the performance of the models. We found that focal loss was particularly effective in handling class imbalance, a common challenge in geospatial datasets. When applied with the Clay model, this loss function led to significant improvements in segmentation accuracy, especially for underrepresented urban fabric classes.\n\n\nClassification (Approach C)\nIn Approach C, we focused on fine-tuning a geospatial foundation model for a classification task. For this, we used the smaller 56x56x3 image tiles as input. Based on the promising results from the segmentation experiments (Approach B), we chose to use the Clay model as the backbone for this classification task, as it consistently outperformed the other models across key metrics.\nThe figure below compares the predicted urban fabric classes from the fine-tuned geospatial foundation model in both the segmentation (Approach B) and classification (Approach C) tasks. This visual comparison highlights the differences in the model’s performance and the class predictions between these two approaches.\n\n\n\n\n\nWhile the classification approach (Approach C) tends to overpredict the dominant class, the segmentation output from Approach B faces challenges in representing useful shapes for classes with fewer examples. These differences highlight the trade-offs in model performance across tasks with varying data distributions. Additionally, this could suggest that some spatial signatures lack clear boundaries on the ground, making it difficult for the segmentation algorithm to accurately detect borders between classes. This insight underscores the complexities of applying segmentation techniques to spatial data with ambiguous or overlapping class boundaries.\n\n\n\nEvaluation Metrics\nTo comprehensively evaluate the performance of our models, we used several key metrics that capture different aspects of model performance:\n\nIntersection over Union (IoU): This metric quantifies the overlap between predicted and ground truth segmentations. It ranges from 0 (no overlap) to 1 (perfect overlap). IoU is calculated by dividing the area of intersection by the area of the union between the predicted and actual segmentation masks.\nWeighted F1 Score: The F1 score is the harmonic mean of precision and recall, offering a balanced measure of both. The weighted F1 score adjusts for class imbalances by giving more importance to classes with fewer examples. Precision measures how many of the predicted positives are correct, while recall indicates how many of the actual positives were correctly identified.\nWeighted Accuracy: This metric measures the overall proportion of correct predictions, adjusted by class frequencies to address class imbalance. It provides a more representative performance measure by considering the prevalence of each class in the dataset.\n\n\n\nPreliminary results\nComparing model results directly can be challenging due to differences in image tile sizes and overlap (e.g., 56px vs. 224px). To ensure a fair comparison, we calculate pixel-level accuracy scores for each approach. Specifically, we predict the full map for the test set, compare overlapping tiles (as described in the sampling method), and compute the following metrics on a per-pixel basis.\n\nOverall model performance comparison (Pixel-level)\nOur evaluation across the different approaches showed varying levels of performance. Below is a summary of the performance metrics for each approach:\n\n\n\n\n\n\n\n\n\n\nApproach\nGlobal Accuracy\nMacro Accuracy\nF1 Score\nIoU\n\n\n\n\nA: Classification (embeddings)\n0.76 (0.66)\n0.22 (0.13)\n0.23\n0.63\n\n\nA: Classification + H3 level 5\n0.87 (0.82)\n0.42 (0.35)\n0.45\n0.79\n\n\nA: Classification + H3 ordinal\n0.80 (0.80)\n0.26 (0.26)\n0.26\n0.69\n\n\nB: Segmentation (Clay)\n0.73\n0.31\n0.30\n0.58\n\n\nC: Classification (Clay)\n0.59 (0.68)\n0.09\n0.12\n0.38\n\n\n\nThe results in brackets represent the tile-level accuracy, which is typically reported in classification tasks. However, to facilitate more meaningful comparisons across approaches, we use pixel-level accuracy for all experiments.\nKey observations\n\nThe baseline classification approaches showed varied results:\n\nThe basic embedding classification approach achieved a global accuracy of 76% (22% balanced), reflecting a strong initial performance.\nWhen incorporating regional trends, performance improved significantly, with a global accuracy of 87% (42% balanced), suggesting that regional context plays a critical role in improving classification accuracy.\nThe H3 Level 5 ordinal classification approach also performed well, with an accuracy of 80% (26% balanced), but it lagged behind in balancing the performance across classes.\n\nThe fine-tuned geospatial foundation model performed better than the fine-tuned classification models, achieving an accuracy of 0.73 compared to 0.56 for the classification model (Clay model).\nOverall, the classification approach with regional information (H3 Level 5) yielded the best performance, achieving both high accuracy and a reasonable balance across classes. Additionally, this approach is computationally efficient: once the image embeddings are generated, the downstream classification process can be completed in just a few minutes.\n\n\n\nPrediction example: London\nTo showcase the practical application of the model, we used it to make predictions on a map of London. This example uses the model from Approach A, which incorporates regional trends through H3 categories, and generates predictions across the entire country. The figure below presents a sample prediction for the London area, where each color represents a different spatial signature, and the background color corresponds to the ground truth.\n\n\n\n\n\n\n\n\n25x25 grid classification pipeline\nFollowing the initial analysis, which demonstrated that the embeddings-based approach yielded the most favorable results, we extended the classification pipeline to include testing with a finer grid resolution. Through team discussions, we determined that a grid size of 25x25 pixels (corresponding to 250x250 meters on the ground) is particularly well-suited for downstream planning applications. This smaller grid size not only aligns better with practical use cases but also led to improvements in key performance metrics such as the overall weighted F1 score and macro accuracy. However, the overall accuracy is a bit lower, which is for our application not as important.\n\n\n\n\n\n\n\n\n\n\nTile size\nModel\nGlobal Accuracy\nMACRO Accuracy\nF1 Score (balanced)\n\n\n\n\n56x56x3\nClassification (embeddings)\n0.76 (0.66)\n0.22 (0.13)\n0.23\n\n\n56x56x3\nClassification (embeddings) + H3 level 5 (cat)\n0.87 (0.82)\n0.42 (0.35)\n0.45\n\n\n56x56x3\nClassification (embeddings) + H3 level 5 (lat/lon)\n0.87 (0.81)\n0.39 (0.31)\n0.42\n\n\n56x56x3\nClassification (embeddings) + H3 level 5 ordinal\n0.80 (0.80)\n0.26 (0.26)\n0.26\n\n\n25x25x3\nClassification (embeddings)\n0.73\n0.31\n0.30\n\n\n25x25x3\nClassification (embeddings) + H3 level 5 (lat/lon)\n0.81\n0.46\n0.53\n\n\n25x25x3\nClassification (embeddings) + lat/lon\n0.89\n0.71\n0.78\n\n\n25x25x3\nLat/lon\n0.91\n0.78\n0.83\n\n\n\n\n\nSampling experiments\nWe also evaluated random sampling and H3 resolution 3 regional sampling to assess their impact on spatial generalization and F1-score performance. While random sampling ensures diversity and captures localized patterns, it risks spatial leakage, potentially inflating performance metrics. In contrast, H3-based regional sampling reduces spatial leakage and offers a more realistic evaluation of generalization but can suffer from unfair penalization due to the heterogeneity of regions.\n\n\n\n\n\n\n\nRandom\nH3 split (resolution 3)\n\n\n\n\nEnsures that the training and testing datasets include diverse samples from all regions, including smaller, localized patterns that might not appear in every larger region.\nCould lead to under-sampling or over-representation of certain spatial signature types if these types are not evenly distributed across regions.\n\n\nIncreased risk of spatial leakage: test samples may be geographically close to training samples, leading to overestimated performance because the model effectively sees similar data in training and testing.\nMinimizes spatial leakage by ensuring that test regions are distinct from training regions. This gives a more realistic estimate of how the model will generalize to new, unseen regions.\n\n\nRandom sampling (diversity) benefits the training process but risks overestimating performance due to leakage.\nRegional splitting (independence) gives a clearer picture of spatial generalization but could penalize the model unfairly if regions are too internally heterogeneous.\n\n\n\nWould need to be repeated across k-folds for possibly ‘fairer’ evaluation.\n\n\n\n\nModel choice based on objective\nGoal: - If the goal is to predict locally, then random sampling might align better with your objectives, as it focuses on learning detailed local variations. - If the goal is to predict regionally or globally, regional splitting is more suitable because it ensures the model learns broader generalization patterns.\n–&gt; Deployment on all data in the end; pipeline will look the same in the end (sampling only for reporting)\n\n\nSampling results\nH3 regional sampling showed slightly lower performance, hinting to some spatial leakage through random sampling.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nApproach\nRes.\nSampling\nClas/seg\nRegional info\nGlobal Acc\nMacro Acc\nF1(macro)\nIoU\n\n\n\n\nA (embeddings)\n56x56\nrandom\nclassification\n\n0.76 (0.66)\n0.22 (0.13)\n0.23\n0.63\n\n\nA (embeddings)\n56x56\nrandom\nclassification\nH3 res 5 (cat)\n0.87 (0.82)\n0.42 (0.35)\n0.45\n0.79\n\n\nA (embeddings)\n56x56\nrandom\nclassification\nH3 res 5 (lat/lon)\n0.87 (0.81)\n0.39 (0.31)\n0.42\n0.78\n\n\nA (embeddings)\n56x56\nrandom\nregression (ordinal)\nH3 res 5 (lat/lon)\n0.80 (0.80)\n0.26 (0.26)\n0.26\n0.69\n\n\n\n\n\n\n\n\n\n\n\n\n\nA (embeddings)\n25x25\nrandom\nclassification\n\n(0.73)\n(0.31)\n(0.3)\n\n\n\nA (embeddings)\n25x25\nrandom\nclassification\n\n(0.81)\n(0.46)\n(0.53)\n\n\n\nA (embeddings)\n25x25\nrandom\nclassification\nlat/lon\n(0.89)\n(0.71)\n(0.78)\n\n\n\n\n25x25\nrandom\n\nlat/lon\n(0.91)\n(0.78)\n(0.83)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nA (embeddings)\n25x25\nH3 res 3 (55,743)\nA (embeddings)\nH3 res 5 (lat/lon)\n(0.58)\n(0.15)\n(0.15)\n\n\n\nA (embeddings)\n25x25\nH3 res 5 (2,125)\nA (embeddings)\nH3 res 5 (lat/lon)\n(0.65)\n(0.2)\n(0.21)\n\n\n\nA (embeddings)\n25x25\nH3 res 6 (335)\nA (embeddings)\nH3 res 5 (lat/lon)\n(0.72)\n(0.29)\n(0.32)\n\n\n\n\n\n\nLimitations\n\nData\n\nclass imbalance:\n\nclassification with models with oversampling/undersampling\nwe fit a weighted (add weights based on distribution) XGBoost model did not give better results\npotential way forward if continues to be a problem: join classes together\n\n\nModel constraints and generalisability\n\ngeneralisability to other European countries\n\nfinal model will be fit on urban form –&gt; hopefully improve the model\n\nmore data points of classes with small number of instances\n\nsampling across different countries, the final model will not just be trained on England but on a range of sample countries, so we are not anticipating any issues with generalisability\n\n\n\n======= Data Limitations\nClass imbalance is a significant challenge in the dataset. To address this, we experimented with classification models using oversampling and undersampling techniques. Additionally, we trained a weighted XGBoost model, which applied weights based on the class distribution. However, these approaches did not result in improved performance. If class imbalance remains a persistent issue, a potential solution is to merge similar classes with smaller instance counts to improve representation.\nModel Constraints and generalisability The final model will focus on urban form, a feature that is directly observable in satellite imagery and is expected to enhance predictive performance. To ensure robustness and broad applicability, the model will not be restricted to data from England but will incorporate samples from a diverse range of European countries. This approach is designed to improve the model’s ability to generalise effectively across different geographic and cultural contexts. Expanding the analysis to a broader European scope will also help address class imbalance by providing additional data points for underrepresented classes, further enhancing the model’s predictions. Consequently, we do not anticipate significant issues with generalisability."
  },
  {
    "objectID": "notes/algorithm-design.html#footnotes",
    "href": "notes/algorithm-design.html#footnotes",
    "title": "Algorithm Design and Theoretical Basis Description",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nhttps://huggingface.co/allenai/satlas-pretrain↩︎\nhttps://huggingface.co/made-with-clay/Clay↩︎\nhttps://huggingface.co/ibm-nasa-geospatial/Prithvi-100M↩︎"
  },
  {
    "objectID": "notes/exec_summary.html",
    "href": "notes/exec_summary.html",
    "title": "EuroFab: European Urban Fabric Classification Using Artificial Intelligence",
    "section": "",
    "text": "This report details the outcomes of the EuroFab project, a research initiative funded by the European Space Agency (ESA) aimed at developing and implementing innovative methodologies for classifying European urban fabric using artificial intelligence (AI). The project addressed the critical need for accurate, consistent, and scalable methods for understanding and characterising the complex spatial structures of urban areas across Europe. By leveraging advanced machine learning techniques, deep learning and Earth observation data, EuroFab provides foundation for development of pan-European classification of urban fabric across time.\nThe project was structured around two primary methodological approaches: a morphological machine learning model utilising open vector datasets capturing physical structure of cities and an AI-based classification system employing satellite imagery.\nMorphological Machine Learning Model: This component focused on developing a set of models able to transfer taxonomy of urban form based on quantitative morphometric characteristics from optimal cadastral data to suboptimal building footprints of remote sensing origin (Microsoft Building footprints) and to heterogenous building data (Overture Maps). A detailed data pipeline was established to extract and process morphological data, predicting morphological types that capture the intricate patterns of urban layouts across Central Europe. Ground truth classes were derived from existing morphometric classification generated on top of cadastral data, which yields optimal data consistency but is limited in spatial coverage (Fleischmann and Samardzhiev Forthcoming). Two predictive models were developed to predict the classes from either of the data sources, with exploration of ability of the models to capture the individual classes across multiple resolutions. The results indicate the ability of such models to fill the gaps in openly available cadastral data and showcase the potential of the approach to deliver pan-European classification of urban fabric as a combination of morphological processing and predictive modelling.\nAI-Based Urban Fabric Classification using Satellite Imagery: The second major component of the project focused on utilising the information contained within openly available satellite imagery for urban fabric classification. This allows prediction of individual classes in various points in time and extending the morphological classification into a time-series with a potential for yearly updates. The project verified the approach on the case of prediction of spatial signatures of Great Britain (Fleischmann and Arribas-Bel 2022) using Sentinel-2 cloud-free mosaics. The project explored both classification and segmentation approaches, considering the optimal scale and sampling strategies for effective model training. At the same time, multiple geospatial foundation models were tested to understand their ability to capture intricacies of urban fabric.\nA significant aspect of this work involved addressing the challenge of class imbalance, primarily caused by the extremely unequal spatial distribution of target classes naturally stemming from the gradual urbanisation processes. The final AI model demonstrated promising results in accurately classifying urban areas based on satellite imagery, offering a scalable and efficient alternative to traditional methods, albeit with a requirement of a certain degree of generalisation of original classification.\nFurthermore, the project incorporated a temporal analysis component, utilising the developed classification methodologies to examine changes in urban fabric over time. The Shannon Diversity Index was employed to quantify urban diversity, and spatial patterns of change were analysed to identify key trends and transformations across Great Britain. This temporal perspective provides crucial information for understanding urban development dynamics and their environmental and social implications.\nStakeholder Engagement: Recognising the importance of translating research findings into practical applications, the EuroFab project actively engaged with relevant stakeholders throughout its lifecycle. This included consultations with urban planners, policymakers, and municipalities to ensure the relevance and usability of the developed classification systems. Feedback from these engagements informed the refinement of the methodologies and the development of user-friendly outputs.\nKey Findings and Lessons Learned: The EuroFab project yielded several key findings that advance our understanding of European urban fabric:\n\nThe morphological machine learning model demonstrated the effectiveness of predictive infill of the classification based on suboptimal data in areas where the potentially optimal cadastral data is either not available as open data or is inconsistent with the majority of the other data.\nThe AI-based classification system utilising satellite imagery offers a scalable and efficient approach for mapping urban fabric across large areas, with the potential for regular updates and monitoring.\nAddressing class imbalance is crucial for achieving accurate and representative urban fabric classification using satellite data.\nTemporal analysis using the developed methodologies provides valuable insights into urban development patterns and changes in urban diversity.\nActive stakeholder engagement is essential for ensuring the practical relevance and adoption of research outcomes in urban planning and policy.\n\nThe project also identified several important lessons learned, including the need for high-quality and consistently labeled ground truth data, the challenges of transferring models across different geographical contexts, and the importance of considering the interpretability of AI models for urban planning applications.\nPotential Research Directions: Building upon the success of the EuroFab project, several potential avenues for future research have been identified:\n\nFurther extension of the urban fabric classification to cover all the available cadastral data, ensuring the models have extensive geographical coverage of training data enabling continent-wide deployment.\nDevelopment of modelling approaches combining both vector and raster data inputs to further enhance the gap-filling capabilities of predictive models.\nApplication of the developed methodologies for specific urban challenges, such as heat island mapping, green infrastructure planning, and sustainable urban development.\nExpansion of the temporal analysis to investigate the impacts of specific policies and interventions on urban fabric change.\nFinally, scaling the analysis across the whole European space.\n\nConclusion: The EuroFab project has successfully developed and demonstrated innovative AI-based methodologies for classifying European urban fabric. The findings of this research provide valuable tools and insights for a wide range of applications in urban planning, environmental management, and policy development. By leveraging the power of artificial intelligence and Earth observation data, EuroFab contributes significantly to our ability to understand, monitor, and sustainably manage the complex and evolving urban landscapes of Europe. The project’s emphasis on open science and stakeholder engagement ensures that its outcomes can be widely disseminated and effectively utilised by the broader urban research and practice communities.\n\n\n\n\n\n\n\nReferences\n\nFleischmann, Martin, and Daniel Arribas-Bel. 2022. “Geographical Characterisation of British Urban Form and Function Using the Spatial Signatures Framework.” Scientific Data 9 (1): 546.\n\n\nFleischmann, Martin, and Krasen Samardzhiev. Forthcoming. “Numerical Taxonomy of Urban Fabric in Central Europe,” Forthcoming."
  },
  {
    "objectID": "notes/stakeholders.html",
    "href": "notes/stakeholders.html",
    "title": "Consolidated Stakeholder Requirements Specification",
    "section": "",
    "text": "The EuroFab project emphasises close collaboration with the end-users of the final project outputs. We are in recurring contact with various stakeholders and taking their feedback into account when carryout the technical work. This document describes the stakeholder engagement carried out to date, with the purpose of consolidating their requirements and idea for the maximum adoption and impact of our work. The work on the stakeholder requirements is currently ongoing as we needed to adapt to their (stakeholders’) activity schedule which is quite tight, since we want to involve not just representatives from the networks/associations themselves, but also their constituency."
  },
  {
    "objectID": "notes/stakeholders.html#stakeholder-engagement",
    "href": "notes/stakeholders.html#stakeholder-engagement",
    "title": "Consolidated Stakeholder Requirements Specification",
    "section": "Stakeholder engagement",
    "text": "Stakeholder engagement\nThe project team has participated in and co-organised 2 events with the objective to identify and consolidate the stakeholders involved in the mapping exercise.\n\nURBIS 24\nDuring the URBan Insights from Space workshop hosted by ESA on 16th – 18th September 2024, the project concept has been presented during a key note presentation. The team also prepared a poster presentation to share a more detailed description of the project activities.\nThe team engaged with 2 key stakeholders: EU Covenant of Mayors for Climate and Energy (EU-CoM) and UIV Urban Innovation Vienna GmbH. UIV Urban Innovation Vienna GmbH is the climate and innovation agency of the City of Vienna and a company of Wien Holding. They work in close cooperation with all municipalities and local authorities in Austria. A meeting has been planned before the end of the year to discuss in detail how they will engage, i.e. getting feedback on preliminary outputs of EuroFab and how they can possibly engage other municipalities in Austria, beyond Vienna. The EU Covenant of Mayors for Climate and Energy is a voluntary initiative supported by the European Commission bringing together thousands of local governments that want to secure a better future for their citizens. The Covenant of Mayors was launched in 2008 in Europe, while the Global Covenant of Mayors was launched in 2015. EU-CoM expressed interest in participating in the stakeholder requirements mapping, leveraging on-going work of the network and possibly circulating a short survey to its members. We initiated the joint work at the 12th World Urban Forum (WUF) that took place in Cairo, from 4th to 8th November 2024.\n\n\nWorld Urban Forum\nThe project team participated to the 12th World Urban Forum (WUF), organised by UN Habitat. The WUF was established in 2001 by the United Nations to examine rapid urbanisation and its impacts. The 12th WUF gathered 25,000 representatives from national, regional and local governments, academics, business organisations, community leaders, urban planners and civil society. The team organised a networking event titled “Monitoring urban fabric for data-driven planning and decision-making”, with the objective to engage in a joint discussion with both producers and users of data for the monitoring of urban fabric. Alongside the project team, speakers of the panel included: Thomas Kemper, leader of the GHSL project at the Joint Research Centre of the European Commission, and Bard Rama, International Component Coordinator at the EU Covenant of Mayors for Climate and Energy.\nThe discussion helped to highlight key issues to be addressed in order to enhance the usability of new data products. Amongst other, more technical considerations about file specifications and data accessibility, the issue of trust was flagged as a prominent one. In order to address it, the discussion highlighted also the need to use shared terminology and concepts.\nAnother key reflection was related to the need to take into account unexpressed needs and requirements of the prospective data users: how to map needs that are not yet emerging from the current experience?\nThe participants also welcomed favorably the possibility to use the data layers to produce alternative scenarios for different policy applications and urban or strategic planning.\nOverall, the discussion provided useful inputs to fine-tune the survey that is under preparation and planned to be distributed to at least one city network (EU-CoM).\nAmongst the audience participants, worth mentioning the Institute of Urban and Regional Development of Poland, which expressed the interest in engaging the project activities and offering the possibility the mobilise their constituency."
  },
  {
    "objectID": "notes/stakeholders.html#future-stakeholder-engagement",
    "href": "notes/stakeholders.html#future-stakeholder-engagement",
    "title": "Consolidated Stakeholder Requirements Specification",
    "section": "Future stakeholder engagement",
    "text": "Future stakeholder engagement\nThere are 2 further in-person events to happen in Prague, scheduled for Q1 of 2025. The schedule had to be adjusted as both parts expressed their interest in being more involved in the collaboration once there are tangible preliminary data products they could further help shaping to their needs.\nOne workshop will be held with the Prague Institute of Planning and Development, with a focus on validating the usefulness of the WP300 outputs for their application in policy and planning. It is worth noting, that the work published in Fleischmann et al. (2022) has been incorporated into Prague’s planning documentation within the ‘Územně analytické podklady’ (Territorial analytical documents) since 2020, making IPR the unique stakeholder with a long-term experience with morphological classification of the sort used within the EuroFab.\nAnother workshop will be held with the 4ct, a private company within urban planning and institutional development sphere, focusing more on the application of the project outputs within private consulting for both public and private clients. It is assumed that the requirements will partially differ from those of IPR and other public entities."
  },
  {
    "objectID": "notes/stakeholders.html#stakeholder-requirements",
    "href": "notes/stakeholders.html#stakeholder-requirements",
    "title": "Consolidated Stakeholder Requirements Specification",
    "section": "Stakeholder requirements",
    "text": "Stakeholder requirements\nThis technical note is planned to be expanded in due course to include resulting detailed requirements of identified end users concerning the proposed solution."
  },
  {
    "objectID": "notes/deliverables.html",
    "href": "notes/deliverables.html",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "",
    "text": "In this note we present the software and datasets generated for the project and described in the relevant technical notes: - Interactive morphometric web application - Morphometric characterisation pipeline for Microsoft Building footprints - Morphometric characterisation pipeline for Overture Maps Building footprints - AI Method for Urban Fabric classification and morphometric characterization - AI temporal data cube of Urban Fabric classifications"
  },
  {
    "objectID": "notes/deliverables.html#morphometrics",
    "href": "notes/deliverables.html#morphometrics",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "Morphometrics",
    "text": "Morphometrics\n\nInteractive web application\nWe developed an interactive web app that displays the entire ground truth morphometric classification for Central Europe - HiMOC. The web app make possible the sharing of the Central European data with an even wider audience, than the original specified stakeholders, regardless of their technical expertise. Furthermore, it allowed stakeholders to visually explore the geospatial data, zoom in and out, pan across areas, and overlay different layers. It was the focus of multiple stakeholder consultations and enabled them to see final results, propose features, highlight mistakes. Furthermore, it allowed them to specify what format at what scale the final results would be most useful for them.\n\n\nMorphometric characterisation pipeline for Microsoft Building footprints\nThe entire morphometric characterisation pipeline for the processing of Microsoft Building Footprints, including reproducible notebooks and an environment is open-sourced and available on the EuroFab GitHub.\n\n\nMorphometric characterisation pipeline for Overture Maps Building footprints\nThe above reproducible pipeline was further adapted to process Overture Maps data and is also available at the EuroFab GitHub."
  },
  {
    "objectID": "notes/deliverables.html#eo",
    "href": "notes/deliverables.html#eo",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "EO",
    "text": "EO\nAll EO analyses presented are supported by openly accessible software hosted on GitHub. The AI prediction pipeline, including preprocessing, embedding generation, and prediction of spatial signatures, is fully documented and accessible at EO repository."
  },
  {
    "objectID": "notes/deliverables.html#software-ai-method-for-urban-fabric-classification-and-morphometric-characterization",
    "href": "notes/deliverables.html#software-ai-method-for-urban-fabric-classification-and-morphometric-characterization",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "Software: AI Method for Urban Fabric classification and morphometric characterization",
    "text": "Software: AI Method for Urban Fabric classification and morphometric characterization\nAll the work supporting this analysis can be found on GitHub. The main prediction pipeline, which includes data preprocessing, embedding creation, and spatial signature prediction, can be used as follows:\n# Run the pipeline\npipeline.spatial_sig_prediction(\n    ## Vector file (geojson or parquet) of analysis area (grid).\n    geo_path= \"london_25_25_grid_clipped.geojson\",\n    ## Vrt file of the satellite composite\n    vrt_file= \"mosaic_cube/vrt_allbands/2017_combined.vrt\",\n    ## Model weights for XGBoost classifier\n    xgb_weights = \"k12_h5_slided_gb_xgb_model.bin\",\n    ## Model weights for embedding model (Satlas)\n    model_weights = \"satlas/weights/satlas-model-v1-lowres.pth\",\n    ## Output file with predictions, prediction probabilities and geometries\n    output_path= \"predictions/test_london_h6.parquet\",\n    ## h3 resolution to be added to analysis (spatial context)\n    h3_resolution=5,\n)\nMore details and documentation on how to run the pipeline can be found in the example on the EuroFab project EO repository."
  },
  {
    "objectID": "notes/deliverables.html#morphometric-model",
    "href": "notes/deliverables.html#morphometric-model",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "Morphometric model",
    "text": "Morphometric model\nThe final morphometric model is around 40GB and takes around 10 hours to train. The full script and notebooks, including a reproducible environment is available at the project GitHub. A non-interactive version of the notebooks used in the pipeline is available on the EuroFab Project Website .\n\n\n\n\n\n\nFigure 1: Example Level 4 predictions for the areas around Vienna (Austria), Munich (Germany), Wroclaw (Poland) and Brno (Czechia)"
  },
  {
    "objectID": "notes/deliverables.html#ai-model",
    "href": "notes/deliverables.html#ai-model",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "AI model",
    "text": "AI model\nThe final data cube including predictions for the years 2016 to 2021 for 7 and 12 classes can be found on the GitHub repository."
  },
  {
    "objectID": "notes/deliverables.html#example-datasets-generated-during-verification-exercises",
    "href": "notes/deliverables.html#example-datasets-generated-during-verification-exercises",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "Example datasets generated during Verification Exercises",
    "text": "Example datasets generated during Verification Exercises\nHere are some example visualisations showing London and Liverpool from the dataset:"
  },
  {
    "objectID": "notes/deliverables.html#london",
    "href": "notes/deliverables.html#london",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "London",
    "text": "London\n\n\n\nLondon, 7 classes\n\n\n\n\n\nLondon, 12 classes"
  },
  {
    "objectID": "notes/deliverables.html#liverpool",
    "href": "notes/deliverables.html#liverpool",
    "title": "Software and Example datasets generated during Verification Exercises",
    "section": "Liverpool",
    "text": "Liverpool\n\n\n\nLiverpool, 7 classes\n\n\n\n\n\nLiverpool, 12 classes"
  },
  {
    "objectID": "notes/results_turing.html#data",
    "href": "notes/results_turing.html#data",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Data",
    "text": "Data\n\nSatellite Imagery (Input)\nSatellite image data used to train the XGBoost classifier was sourced from the GHS-composite-S2 R2020A dataset1, as detailed in the Reference Data Selection. This dataset is a global, cloud-free image composite derived from Sentinel-2 L1C data, covering January 2017 through December 2018. We utilised RGB bands at 10 metres per pixel resolution.\n\nTemporal Change Prediction\nSentinel-2 satellite imagery covering 2016 to 2021 was acquired using the Google Earth Engine API through automated Python scripts (as described in GEE pipeline. Images were selected for low cloud coverage, resulting in composite summary products for each year.\n\n\n\nUrban Fabric Classes (Outcome)\nWe employed labels from the Spatial Signatures Framework2, a typology classifying British urban environments based on form (physical appearance) and function (usage). Although our project specifically targets urban fabric classification based primarily on visible form — which might be sipler to predict — the form-specific classification scheme remains under development (as detailed in the Sections on Morphometric Classification). Consequently, the comprehensive Spatial Signatures Framework currently serves as a proxy aligning closely with our project’s urban characterisation objectives.\nWe used two versions of this dataset: one with 12 classes and another simplified version with 7 classes. The 12-class scheme combines the various urbanity categories into a single class, maintaining all other Spatial Signatures classes:\nclass_labels = {\n    'Accessible suburbia': 0,\n    'Connected residential neighbourhoods': 1,\n    'Countryside agriculture': 2,\n    'Dense residential neighbourhoods': 3,\n    'Dense urban neighbourhoods': 4,\n    'Disconnected suburbia': 5,\n    'Gridded residential quarters': 6,\n    'Open sprawl': 7,\n    'Urban buffer': 8,\n    'Urbanity': 9,\n    'Warehouse/Park land': 10,\n    'Wild countryside': 11\n}\nFor the simplified 7-class version, we reclustered underlying data from the Spatial Signatures Framework using K-means clustering (K=7). The resulting classes are:\nclass_labels_k7 = {\n    'Countryside agriculture': 0,\n    'Open sprawl': 1,\n    'Compact suburbia': 2,\n    'Urban': 3,\n    'Urban buffer': 4,\n    'Warehouse/Park land': 5,\n    'Wild countryside': 6\n}"
  },
  {
    "objectID": "notes/results_turing.html#data-preprocessing",
    "href": "notes/results_turing.html#data-preprocessing",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Data Preprocessing",
    "text": "Data Preprocessing\n\nScale\nBased on earlier experiments documented in the technical notes (Algorithm Design), we adopted a final analytical scale of 250×250 metres across Great Britain (GB).\nA significant issue in our dataset is class imbalance, with specific urban fabric classes being substantially underrepresented. This imbalance informed our decisions on model architecture and loss function selection, motivating exploration of specialised methods to handle imbalanced data. Yet, common modelling approaches were not sufficient, which means we had to resort to data augmentation methods, as described below.\n\n\n\nSampling Strategy\n\n\n\n\nHandling Imbalanced Dataset with Image Augmentation\nDue to the significant class imbalance, particularly the underrepresentation of urban classes, we implemented a sliding-window augmentation strategy for classes comprising less than 10% of the dataset (all classes except Countryside agriculture and Wild countryside).\nThis sliding-window approach systematically shifted the sampling window horizontally and vertically by increments of 50, 100, 150, and 200 metres, significantly increasing the volume of available training data for underrepresented classes.\n\n\n\nSliding Window Augmentation\n\n\nThe images below shows class distributions before (left) and after (right) augmentation:\n \nThe following table summarises augmentation results, highlighting the substantial increase in training samples for previously underrepresented classes:\n\n\n\n\n\n\n\n\nClass\nBefore Augmentation\nAfter Augmentation\n\n\n\n\nAccessible suburbia\n15,054\n129,620\n\n\nConnected residential neighbourhoods\n2,567\n21,021\n\n\nCountryside agriculture\n1,367,999\n1,367,999\n\n\nDense residential neighbourhoods\n4,299\n34,507\n\n\nDense urban neighbourhoods\n3,636\n31,657\n\n\nDisconnected suburbia\n2,644\n20,113\n\n\nGridded residential quarters\n1,518\n12,849\n\n\nOpen sprawl\n33,910\n292,884\n\n\nUrban buffer\n381,283\n381,283\n\n\nUrbanity\n2,495\n21,929\n\n\nWarehouse/Park land\n21,282\n195,105\n\n\nWild countryside\n1,395,048\n1,395,048"
  },
  {
    "objectID": "notes/results_turing.html#changes-over-time-temporal-analysis",
    "href": "notes/results_turing.html#changes-over-time-temporal-analysis",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Changes Over Time / Temporal Analysis",
    "text": "Changes Over Time / Temporal Analysis\nWe use the trained XGBoost classifier to make predictions across the years 2016 to 2021. The overall overlap between the initial year (2016) and final year (2021) remained high at 88%. This confirms that Spatial Signatures classes remained relatively stable across the study period. However, minor variations may indicate either genuine change or model uncertainty.\nWe measured urban fabric diversity using the Shannon Index across each year studied. The index showed limited variability over time, typically around 1.86–1.87, except for a noticeable spike in diversity in 2019 (2.007):\n\n2016 → 2017: 88%\n2017 → 2018: 88%\n2018 → 2019: 86%\n2019 → 2020: 86%\n2020 → 2021: 88%\n\n\nDiversity Analysis (Shannon Index)\nWe assessed changes in urban fabric diversity using the Shannon Index across the studied years. The results are summarised in the table below, indicating slight fluctuations, with the most notable increase in diversity occurring in 2019:\n\n\n\nYear\nShannon Index\n\n\n\n\n2016\n1.868\n\n\n2017\n1.863\n\n\n2018\n1.868\n\n\n2019\n2.007\n\n\n2020\n1.873\n\n\n2021\n1.872\n\n\n\nThe marked increase in the Shannon Index in 2019 suggests an increase in class diversity during that year, followed by a subsequent return to previous levels. This could point out some differences in the image as caused by weather or sensor in the year 2019.\n\n\nSpatial Patterns of Change\nSpatial analysis identified areas across England with frequent class transitions (map below), particularly around major urban centres and suburban zones. These frequent transitions may either represent genuine urban transformations or result from classifier uncertainty, especially in ambiguous zones between visually similar Spatial signatures classes.\n\n\n\nFrequency Map\n\n\nClass-specific analysis further highlighted particular Spatial signatures types prone to transitions. The figure below shows which classes experienced frequent transitions:\n\n\n\nClass Transitions\n\n\nTo better interpret these transitions, we calculated transition probabilities and organised them into a structured confusion matrix. This matrix clearly shows the urban fabric classes most likely to interchange over the studied period:\n\n\n\n‘Reasonable’ confusion matrix\n\n\nLastly, we analysed the inverse-probability-based distances of urban fabric classes over time. Shorter distances represent a higher likelihood of transitioning or changing classes from year to year, whereas longer distances indicate greater stability:\n\n\n\nProbability of change across classes\n\n\nThis analysis shows urban fabric classes such as Urbanity, Warehouse/Park land, Dense urban neighbourhoods, and Connected residential neighbourhoods have shorter inverse distances, indicating higher levels of dynamic change or redevelopment. Conversely, classes such as Wild countryside and Countryside agriculture have longer distances, suggesting greater temporal stability. Although these results align with expectations about urban and rural dynamics, they may also reflect the classifier’s varying uncertainty across these visually distinct environments."
  },
  {
    "objectID": "notes/results_turing.html#software-ai-method-for-urban-fabric-classification-and-morphometric-characterization",
    "href": "notes/results_turing.html#software-ai-method-for-urban-fabric-classification-and-morphometric-characterization",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Software: AI Method for Urban Fabric classification and morphometric characterization",
    "text": "Software: AI Method for Urban Fabric classification and morphometric characterization\nAll the work supporting this analysis can be found on GitHub. The main prediction pipeline, which includes data preprocessing, embedding creation, and spatial signature prediction, can be used as follows:\n# Run the pipeline\npipeline.spatial_sig_prediction(\n    geo_path= \"../spatial_signatures/eo/data/example/london_25_25_grid_clipped.geojson\", ## Vector file (geojson or parquet) of analysis area (grid).\n    vrt_file= \"../satellite_demoland/data/mosaic_cube/vrt_allbands/2017_combined.vrt\", ## Vrt file of the satellite composite\n    xgb_weights = \"../spatial_signatures/classifier/k12_h5_slided_gb_xgb_model.bin\", ## Model weights for XGBoost classifier\n    model_weights = \"../satellite_demoland/models/satlas/weights/satlas-model-v1-lowres.pth\", ## Model weights for embedding model (Satlas)\n    output_path= \"../vjgo8416-demoland/spatial_signatures/eo/data/predictions/test_london_h6.parquet\", ## Output file with predictions, prediction probabilities and geometries\n    h3_resolution=5 ## h3 resolution to be added to analysis (spatial context)\n)`\nMore details and documentation on how to run the pipeline can be found in the example on the EO repository."
  },
  {
    "objectID": "notes/results_turing.html#example-datasets-generated-during-verification-exercises",
    "href": "notes/results_turing.html#example-datasets-generated-during-verification-exercises",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Example datasets generated during Verification Exercises",
    "text": "Example datasets generated during Verification Exercises\nThe final datacube including predictions for the years 2016 to 2021 for 7 and 12 classes can be found on the repository.\nHere are some example visualisations showing London and Liverpool from the dataset:"
  },
  {
    "objectID": "notes/results_turing.html#london",
    "href": "notes/results_turing.html#london",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "London",
    "text": "London\n\n\n\nLondon, 7 classes\n\n\n\n\n\nLondon, 12 classes"
  },
  {
    "objectID": "notes/results_turing.html#liverpool",
    "href": "notes/results_turing.html#liverpool",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Liverpool",
    "text": "Liverpool\n\n\n\nLiverpool, 7 classes\n\n\n\n\n\nLiverpool, 12 classes"
  },
  {
    "objectID": "notes/results_turing.html#footnotes",
    "href": "notes/results_turing.html#footnotes",
    "title": "AI Model Development for Urban Fabric Segmentation",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nCorbane, C. et al., 2020. A global cloud-free pixel-based image composite from Sentinel-2 data. Data in Brief, 31, p.105737.↩︎\nFleischmann, M. & Arribas-Bel, D., 2022. Geographical characterisation of British urban form using the spatial signatures framework. Scientific Data, 9(1), p.546.↩︎\nFleischmann and Arribas-Bel, 2024. Decoding (urban) form and function using spatially explicit deep learning. Computers, Environment and Urban Systems, 31, p.105737.↩︎"
  }
]