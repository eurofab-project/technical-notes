<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Krasen Samardzhiev">
<meta name="author" content="Martin Fleischmann">
<meta name="author" content="Barbara Metzler">
<meta name="author" content="Daniel Arribas-Bel">

<title>EuroFab: European Urban Fabric Classification Using Artificial Intelligence – Technical notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-4d1042b5f0b8d93047f4f930119f21bf.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;display=swap" rel="stylesheet">


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="styles.css">
</head>

<body class="quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#morphological-machine-learning-model" id="toc-morphological-machine-learning-model" class="nav-link" data-scroll-target="#morphological-machine-learning-model">Morphological machine learning model</a>
  <ul class="collapse">
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#morphological-data-pipeline" id="toc-morphological-data-pipeline" class="nav-link" data-scroll-target="#morphological-data-pipeline">Morphological data pipeline</a></li>
  <li><a href="#ground-truth-classes" id="toc-ground-truth-classes" class="nav-link" data-scroll-target="#ground-truth-classes">Ground truth classes</a></li>
  <li><a href="#modelling-scenarios" id="toc-modelling-scenarios" class="nav-link" data-scroll-target="#modelling-scenarios">Modelling scenarios</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#ai-based-urban-fabric-classification-using-satellite-imagery" id="toc-ai-based-urban-fabric-classification-using-satellite-imagery" class="nav-link" data-scroll-target="#ai-based-urban-fabric-classification-using-satellite-imagery">AI-Based Urban Fabric Classification using Satellite Imagery</a>
  <ul class="collapse">
  <li><a href="#data-and-methods" id="toc-data-and-methods" class="nav-link" data-scroll-target="#data-and-methods">Data and Methods</a>
  <ul class="collapse">
  <li><a href="#satellite-imagery" id="toc-satellite-imagery" class="nav-link" data-scroll-target="#satellite-imagery">Satellite Imagery</a></li>
  <li><a href="#urban-fabric-classes" id="toc-urban-fabric-classes" class="nav-link" data-scroll-target="#urban-fabric-classes">Urban Fabric Classes</a></li>
  </ul></li>
  <li><a href="#model-design" id="toc-model-design" class="nav-link" data-scroll-target="#model-design">Model Design</a>
  <ul class="collapse">
  <li><a href="#classification-vs.-segmentation" id="toc-classification-vs.-segmentation" class="nav-link" data-scroll-target="#classification-vs.-segmentation">Classification vs.&nbsp;Segmentation</a></li>
  <li><a href="#scale" id="toc-scale" class="nav-link" data-scroll-target="#scale">Scale</a></li>
  <li><a href="#sampling" id="toc-sampling" class="nav-link" data-scroll-target="#sampling">Sampling</a></li>
  </ul></li>
  <li><a href="#experimental-approaches" id="toc-experimental-approaches" class="nav-link" data-scroll-target="#experimental-approaches">Experimental Approaches</a></li>
  <li><a href="#model-evaluation" id="toc-model-evaluation" class="nav-link" data-scroll-target="#model-evaluation">Model Evaluation</a></li>
  <li><a href="#ai-model-results" id="toc-ai-model-results" class="nav-link" data-scroll-target="#ai-model-results">AI Model Results</a></li>
  <li><a href="#final-model" id="toc-final-model" class="nav-link" data-scroll-target="#final-model">Final Model</a>
  <ul class="collapse">
  <li><a href="#addressing-class-imbalance" id="toc-addressing-class-imbalance" class="nav-link" data-scroll-target="#addressing-class-imbalance">Addressing Class Imbalance</a></li>
  <li><a href="#classification-schemes" id="toc-classification-schemes" class="nav-link" data-scroll-target="#classification-schemes">Classification Schemes</a></li>
  <li><a href="#model-performance" id="toc-model-performance" class="nav-link" data-scroll-target="#model-performance">Model Performance</a></li>
  </ul></li>
  <li><a href="#temporal-analysis" id="toc-temporal-analysis" class="nav-link" data-scroll-target="#temporal-analysis">Temporal Analysis</a>
  <ul class="collapse">
  <li><a href="#diversity-analysis-shannon-index" id="toc-diversity-analysis-shannon-index" class="nav-link" data-scroll-target="#diversity-analysis-shannon-index">Diversity Analysis (Shannon Index)</a></li>
  <li><a href="#spatial-patterns-of-change" id="toc-spatial-patterns-of-change" class="nav-link" data-scroll-target="#spatial-patterns-of-change">Spatial Patterns of Change</a></li>
  </ul></li>
  <li><a href="#discussion-1" id="toc-discussion-1" class="nav-link" data-scroll-target="#discussion-1">Discussion</a></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings">Key Findings</a></li>
  <li><a href="#lessons-learned" id="toc-lessons-learned" class="nav-link" data-scroll-target="#lessons-learned">Lessons Learned</a></li>
  <li><a href="#potential-research-directions" id="toc-potential-research-directions" class="nav-link" data-scroll-target="#potential-research-directions">Potential Research Directions</a></li>
  </ul></li>
  <li><a href="#stakeholder-engagement" id="toc-stakeholder-engagement" class="nav-link" data-scroll-target="#stakeholder-engagement">Stakeholder engagement</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul class="collapse">
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  </ul></li>
  <li><a href="#open-science" id="toc-open-science" class="nav-link" data-scroll-target="#open-science">Open Science</a>
  <ul class="collapse">
  <li><a href="#software" id="toc-software" class="nav-link" data-scroll-target="#software">Software</a>
  <ul class="collapse">
  <li><a href="#morphometrics" id="toc-morphometrics" class="nav-link" data-scroll-target="#morphometrics">Morphometrics</a></li>
  <li><a href="#eo" id="toc-eo" class="nav-link" data-scroll-target="#eo">EO</a></li>
  <li><a href="#software-ai-method-for-urban-fabric-classification-and-morphometric-characterisation" id="toc-software-ai-method-for-urban-fabric-classification-and-morphometric-characterisation" class="nav-link" data-scroll-target="#software-ai-method-for-urban-fabric-classification-and-morphometric-characterisation">Software: AI Method for Urban Fabric classification and morphometric characterisation</a></li>
  </ul></li>
  <li><a href="#example-datasets" id="toc-example-datasets" class="nav-link" data-scroll-target="#example-datasets">Example datasets</a>
  <ul class="collapse">
  <li><a href="#morphometric-model" id="toc-morphometric-model" class="nav-link" data-scroll-target="#morphometric-model">Morphometric model</a></li>
  <li><a href="#ai-model" id="toc-ai-model" class="nav-link" data-scroll-target="#ai-model">AI model</a></li>
  <li><a href="#example-datasets-generated-during-verification-exercises" id="toc-example-datasets-generated-during-verification-exercises" class="nav-link" data-scroll-target="#example-datasets-generated-during-verification-exercises">Example datasets generated during Verification Exercises</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="final_report.pdf"><i class="bi bi-file-pdf"></i>PDF (titlepage)</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">EuroFab: European Urban Fabric Classification Using Artificial Intelligence</h1>
<p class="subtitle lead">Final report</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Krasen Samardzhiev </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Faculty of Science, Charles University
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Martin Fleischmann <a href="mailto:martin.fleischmann@natur.cuni.cz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Faculty of Science, Charles University
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Barbara Metzler </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            The Alan Turing Institute
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Daniel Arribas-Bel </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            The Alan Turing Institute
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The spatial layout of the physical elements of cities affects most activities their residents undertake. Accessibility <span class="citation" data-cites="calafiore2023inequalities">(<a href="#ref-calafiore2023inequalities" role="doc-biblioref">Calafiore et al. 2023</a>)</span>, subjective experience of the city and cost of housing <span class="citation" data-cites="QIU2022104358">(<a href="#ref-QIU2022104358" role="doc-biblioref">Qiu et al. 2022</a>)</span>, as well as energy efficiency <span class="citation" data-cites="ZHU2022104576">(<a href="#ref-ZHU2022104576" role="doc-biblioref">Zhu et al. 2022</a>)</span> are some of the application areas where urban form is used to guide research, applications and policy. Due to the numerous patterns, scales and manifestations of urban form, researchers turn to classification as a method to reduce complexity and group the variations in urban form into classes. The derived classes vary depending on the application. Example coarse groups are continuous, discontinuous and non-urban land <span class="citation" data-cites="europeanenvironmentagency1990">(<a href="#ref-europeanenvironmentagency1990" role="doc-biblioref">European Environment Agency 1990</a>)</span>. More detailed groupings capture the characteristics of streets and buildings, for example organic and gridiron streets <span class="citation" data-cites="araldi:hal-04774886">(<a href="#ref-araldi:hal-04774886" role="doc-biblioref">Araldi and Fusco 2024</a>)</span>. These resulting classifications of urban form provide valuable insights into the structure of cities and towns, guide targeted policy applications, and form the backbone of urban planning.</p>
<p>However, detailed, scalable, and consistent classifications that reflect the nature of the local data all at the same time are scarcely available. We often see conceptual classification, which has a tendency to oversimplify the structure when “zooming in”, loosing the interest of planners and policy-makers, i.e. <span class="citation" data-cites="europeanenvironmentagency1990">Stewart and Oke (<a href="#ref-stewart2012" role="doc-biblioref">2012</a>)</span>. The classifications developed by key members of the EuroFab project team overcome these limitations <span class="citation" data-cites="primus fleischmann2022geographical fleischmann2022methodological">(<a href="#ref-primus" role="doc-biblioref">Fleischmann and Samardzhiev Forthcoming</a>; <a href="#ref-fleischmann2022geographical" role="doc-biblioref">Fleischmann and Arribas-Bel 2022</a>; <a href="#ref-fleischmann2022methodological" role="doc-biblioref">Fleischmann et al. 2022</a>)</span>, but are dependent on the availability of high quality data capturing urban form - individual buildings and related street networks. The issue is that these are not always readily available, even within the context of generally data-rich countries of the European region. Furthermore, even if countries have high quality building data, they are typically missing information on the temporal evolution of the elements.</p>
<p>Therefore, there is a need to: one, derive detailed classifications at scale from suboptimal data that does not have the same qualities as, for example, cadastre would have; and two, add a temporal dimension to the classification which shows how it evolves over time. Such a novel classification can improve urban-form related research and policy applications, by providing researchers, policy makers and practitioners with unprecedented detail and temporal information on urban form. Existing work can be extended using the new detailed classes, while new avenues of research can be established using the temporal dimension.</p>
<p>The strategic goal of the project is to be the basis for subsequent work that will deliver a practically useful, detailed classification of all European urban fabric across time. The specific immediate aim of the current work is to develop a methodology capable of achieving the two objectives and verify its validity through a pilot study in Central Europe and the United Kingdom.</p>
<!--Approach-->
<p>The basis for our work are two models - one based on satellite-derived building footprints; and a second, based on a direct use of Sentinel-2 visible bands. The overall approach is to use the first machine learning model to produce training data at scale for the second AI model, since currently such datasets do not exist, and to finally use the AI model to derive a detailed temporal classification of urban form in Europe. To further verify the validity of our approach and the usefulness of the results, we further carry out consultations with stakeholders from the private sector, local planning departments and government organisations. This work will give us insights into how to adapt the methodology and data for practical use cases.</p>
<p>The next three sections of the report describe in more detail the methodological approaches and results of the three work streams - the first machine learning morphological model, the second AI vision model, and the stakeholder engagement. The conclusion section interprets these findings and proposes how to scale the methodology for the whole of Europe, while highlighting potential limitations. The last Open Science section highlights the open source software and datasets developed during the project.</p>
<p>More details about the methodology, background and results of each stage of the project are available in the respective technical notes. The methodology and results from the report are being prepared for scientific publication in leading urban analytics journals.</p>
</section>
<section id="morphological-machine-learning-model" class="level1">
<h1>Morphological machine learning model</h1>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">Methodology</h2>
<p>The main aim of the morphological machine learning model is to show that the <span class="citation" data-cites="primus">(<a href="#ref-primus" role="doc-biblioref">Fleischmann and Samardzhiev Forthcoming</a>)</span> urban fabric classification, built on cadastre data, can be reproduced using more widely available data sources - building footprints derived from satellite imagery, voluntarily contributed building footprints, i.e.&nbsp;OpenStreetMap building footprints, or combinations of both - Overture Map. This model can be later used to expand the cadastral taxonomy and generate training data for the AI vision model.</p>
<p>The study area covers five countries in Central Europe - Germany, Poland, Slovakia, Austria, Czechia. These countries were chosen as they cover a large area demonstrating the ability of the methodology to scale and have a rich variety of urban form types, developed under different planning regimes.</p>
<p>The bulk of the morphological work can be summarised as:</p>
<ol type="1">
<li>Developing a scalable pipeline to generate morphological characteristics from alternative building footprints</li>
<li>Assignment of cadastral urban classes to the alternative building footprints ( the ground truth for the model training)</li>
<li>Training several models in different contexts and evaluating their ability to predict the assigned cadastral urban form classes , based on the features calculated in 1.</li>
</ol>
<section id="morphological-data-pipeline" class="level3">
<h3 class="anchored" data-anchor-id="morphological-data-pipeline">Morphological data pipeline</h3>
<section id="core-data" class="level4">
<h4 class="anchored" data-anchor-id="core-data">Core data</h4>
<div id="fig-street" class="nostretch quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-street-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../figures/algo_design/street_processing.png" class="nostretch img-fluid quarto-figure quarto-figure-center figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-street-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Example unprocessed and processed street network.
</figcaption>
</figure>
</div>
<div id="fig-data" class="nostretch quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../figures/results/building_comparison.png" class="nostretch img-fluid quarto-figure quarto-figure-center figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Comparison between building footprint data sources.
</figcaption>
</figure>
</div>
<p>The core datasets used in the analysis are two types of building footprints - Microsoft Satellite Building footprints and Overture Maps building footprints - and street geometries from Overture Maps. The street network is a direct download from Overture Maps Transportation theme, a processed subset of data from OpenStreetMap, which has global coverage and high quality data. An example for Prague is shown in <a href="#fig-street" class="quarto-xref">Figure&nbsp;1</a>.</p>
<p><a href="#fig-data" class="quarto-xref">Figure&nbsp;2</a> shows a comparison between the cadastral data, Microsoft building footprints and Overture Maps building footprints. Both types of datasets have issues compared to cadastral information, however they generally have larger coverage. Microsoft building footprints have almost global coverage and are heterogenous - they come from the same source. Overture Maps data is more detailed and a combination of datasets, it even includes some Microsoft footprints. But this heterogeneity can make statistics calculated in different areas within the whole dataset incomparable to each other.</p>
</section>
<section id="morphological-pipeline" class="level4">
<h4 class="anchored" data-anchor-id="morphological-pipeline">Morphological pipeline</h4>
<p>The morphometric characterisation is directly derived from the method of <span class="citation" data-cites="primus">(<a href="#ref-primus" role="doc-biblioref">Fleischmann and Samardzhiev Forthcoming</a>)</span> to ensure that we minimise conceptual differences between the methodological backbone used to derive the target classification and the data used within our model. Therefore, we focus the morphological characterisation around the concept of Enclosed Tessellation Cells <span class="citation" data-cites="fleischmann2022methodological">(<a href="#ref-fleischmann2022methodological" role="doc-biblioref">Fleischmann et al. 2022</a>)</span> - “the portion of space that results from growing a morphological tessellation within an enclosure delineated by a series of natural or built barriers identified from the literature on urban form, function and perception”. In this definition, the morphological tessellation is a delineation of the space based on Voronoi polygons centred around buildings and an enclosure is any area enclosed by streets. The boundaries of ETCs also represent the closest area of land to each building, than to any other building within an enclosure, and therefore can act as the unit that combines aspects of building and street morphological characteristics.</p>
<p>Broadly the pipeline can be summarised as:</p>
<ol type="1">
<li>Street &amp; building preprocessing. This includes downloading the streets and buildings, simplifying the street network, and fixing topological issues with the building footprints.</li>
<li>Generating derived morphological elements - street nodes, street enclosures, Enclosed Tessellation cells.</li>
<li>Calculating 52 morphological characteristics which capture aspects of all individual elements (i.e.&nbsp;building area or perimeter), as well as their interactions - for example, buildings per street or number of reachable ETCs within five topological steps of the street network.</li>
</ol>
<p>This pipeline results in around 62 million ETCs with 52 morphological characteristics for the Microsoft data, and around 88 million ETCs with 52 morphological characteristics for the Overture Maps data.</p>
</section>
</section>
<section id="ground-truth-classes" class="level3">
<h3 class="anchored" data-anchor-id="ground-truth-classes">Ground truth classes</h3>
<div id="tbl-level4names" class="striped quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[20,80]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-level4names-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Cluster descriptions
</figcaption>
<div aria-describedby="tbl-level4names-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-striped caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 80%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Cluster name</strong></th>
<th><strong>Cluster Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Dense Connected Developments</td>
<td>In this cluster, the built-up density and local street connectivity are high, while inter-building distances remain relatively small. Buildings frequently share walls, forming larger structures along relatively short and narrow streets.</td>
</tr>
<tr class="even">
<td>Large Interconnected Blocks</td>
<td>This cluster has very high built-up density and local street connectivity, with narrow and short streets. It is primarily characterised by a high count of connected buildings forming enclosed blocks with courtyards. Furthermore, the distances between the formed blocks is small.</td>
</tr>
<tr class="odd">
<td>Dense Standalone Buildings</td>
<td>This cluster has moderate to high built-up density and local street connectivity, with longer and wider streets compared to other dense developments. Shared walls between buildings are less common, and distances within buildings are moderate, reflecting a pattern of standalone structures within a robust street network .</td>
</tr>
<tr class="even">
<td>Compact Development</td>
<td>Development in this cluster is characterised by a high number of buildings and relatively dense local street connectivity, with short and narrow streets. Shared walls appear regularly, and inter-building distances are relatively small, with building sizes being typically small and uniform.</td>
</tr>
<tr class="odd">
<td>Cul-de-Sac Layout</td>
<td>Development in this cluster is characterised by a moderate to high built-up density, short and moderately dense locally street connectivity. A distinguishing feature is the significant presence of cul-de-sacs. The buildings along the streets are relatively smaller, and more numerous, than in Aligned Winding Streets.</td>
</tr>
<tr class="even">
<td>Aligned Winding Streets</td>
<td>This cluster has low to moderate built-up and street connectivity. Buildings exhibit a consistent alignment among themselves and also along streets of varying length, width and linearity. There is also a significant number of shared walls between structures.</td>
</tr>
<tr class="odd">
<td>Sparse Rural Development</td>
<td>This cluster has a sparse built-up area with low street connectivity and messiness. The streets are long and the widest in the taxonomy, while the distance between buildings is the largest. Adjacency between structures is also the lowest.</td>
</tr>
<tr class="even">
<td>Dispersed Linear Development</td>
<td>This cluster has a moderate built up area and the lowest local street connectivity in the taxonomy, typically forming long linear villages. Its streets are the longest, linear, wide and have considerable distances between street intersections, and minimal shared walls between structures.</td>
</tr>
<tr class="odd">
<td>Linear Development</td>
<td>This cluster has a moderate built up area and the low local street connectivity in the taxonomy, typically forming long linear villages. Its streets are long, linear, wide and there are minimal shared walls between structures. Its distinguishing features from “Extended Linear Development” is the shorter streets and relatively higher street connectivity.</td>
</tr>
<tr class="even">
<td>Sparse Open Layout</td>
<td>This cluster is characterized by low built-up density, low street connectivity, large distances between buildings, few shared walls, and large open spaces around buildings. The streets are few, open and wide. The buildings are moderate in size and more diverse than those in the Sparse Road-Linked Development cluster.</td>
</tr>
<tr class="odd">
<td>Sparse Road-Linked Development</td>
<td>This cluster is characterized by low built-up density, low street connectivity, large distances between buildings, few shared walls, and large open spaces around buildings. The streets are few, open and wide. In contrast, with ‘ Sparse Open Layout’ the buildings are smaller and more uniform.</td>
</tr>
<tr class="even">
<td>Large Utilitarian Development</td>
<td>This cluster consists of the largest buildings with notable variations in size and shape, as well as low to moderate street connectivity and wide streets. The design does not emphasise sunlight exposure, creating broad but less refined configurations, typical of industrial and other service areas.</td>
</tr>
<tr class="odd">
<td>Extensive Wide-Spaced Developments</td>
<td>This cluster consists of the large buildings with moderate variations in size and shape, as well as low to moderate street connectivity and wide streets. The resulting environment is spacious, with significant open areas between structures, typical of modernist housing.</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div style="page-break-after: always;"></div>
<div id="tbl-taxonomy" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-taxonomy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Taxonomic tree
</figcaption>
<div aria-describedby="tbl-taxonomy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 24%">
<col style="width: 25%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Level 1</strong></th>
<th><strong>Level 2</strong></th>
<th><strong>Level 3</strong></th>
<th><strong>Level 4</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Traditional Street Network</td>
<td>Central Urban Developments</td>
<td>Central Urban Developments</td>
<td>Dense Connected Developments</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Large Interconnected Blocks</td>
</tr>
<tr class="odd">
<td></td>
<td>Traditional Urban Developments</td>
<td>Dense Urban Developments</td>
<td>Dense Standalone Buildings</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Compact Development</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>Street-aligned Developments</td>
<td>Aligned Winding Streets</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Cul-de-Sac Layout</td>
</tr>
<tr class="odd">
<td>Utilitarian Street Network</td>
<td>Utilitarian street network</td>
<td>Large Scale Developments</td>
<td>Large Utilitarian Development</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Extensive Wide-Spaced Developments</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>Sparse Road Network Developments</td>
<td>Sparse Open Layout</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Sparse Road-Linked Development</td>
</tr>
<tr class="odd">
<td></td>
<td>Linear &amp; Rural Development</td>
<td>Linear Road Network Developments</td>
<td>Dispersed Linear Development</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Linear Development</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>Sparse Rural Development</td>
<td>Sparse Rural Development</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The taxonomy of ground truth classes from <span class="citation" data-cites="primus">(<a href="#ref-primus" role="doc-biblioref">Fleischmann and Samardzhiev Forthcoming</a>)</span> and available as an interactive map online at <a href="https://uscuni.org/himoc/">HiMOC</a> is presented in <a href="#tbl-taxonomy" class="quarto-xref">Table&nbsp;2</a>. The descriptions for the level 4 classes are available in <a href="#tbl-level4names" class="quarto-xref">Table&nbsp;1</a>. All subsequent analysis focuses on Levels 3 and 4. The target labels from this are assigned to each building from the morphological pipeline based on spatial intersections.</p>
</section>
<section id="modelling-scenarios" class="level3">
<h3 class="anchored" data-anchor-id="modelling-scenarios">Modelling scenarios</h3>
<div id="fig-traintest" class="nostretch quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-traintest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../figures/results/model_split.drawio.png" class="nostretch img-fluid quarto-figure quarto-figure-center figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-traintest-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Train/test data splits for different models.
</figcaption>
</figure>
</div>
<p><a href="#fig-traintest" class="quarto-xref">Figure&nbsp;3</a> shows the all experiments that will be performed for each dataset. The main goal with so many training / testing configurations is to get detailed statistics about the expected model performance in realistic scenarios - predicting urban form in various types of new environments. Two models - a global random model and a global spatially explicit model - are trained to highlight the effects of spatial lag in model training and testing, while the country specific models are trained to evaluate the ability of the models to generalise outside of the training data scope. The train / test configuration for the spatially explicit model first delineates the study area into h3 level second hexagon cells with an area of around 500 sqm. The dataset is then split into train and test subsets randomly, but ensuring that all buildings within a hexagon are either part of the train or test subset.</p>
<p>In total we test 24 models to gain information about the predictability of detailed urban form classes. All experiments are repeated independently for each dataset - once for the Overture and once for the Microsoft building footprints - and for each of Level 3 and Level 4 of the taxonomy. This is done to verify in which cases, what data can be used to derive detailed urban form classifications. The models for each experiment are HistogramGradientBoostingClassifier and share the same parameters - no max depth, no max leaf nodes, max_features = 0.5, learning_rate = .03 .</p>
</section>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<div id="tbl-f1agg" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-f1agg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Overall F1 scores at level 3
</figcaption>
<div aria-describedby="tbl-f1agg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1agg" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-f1aggms" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1aggms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Microsoft building footprints
</figcaption>
<div aria-describedby="tbl-f1aggms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Weighted F1</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.60</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.63</td>
<td style="text-align: left;">0.56</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Micro F1</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.58</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.53</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Macro F1</strong></td>
<td style="text-align: left;">0.73</td>
<td style="text-align: left;">0.63</td>
<td style="text-align: left;">0.48</td>
<td style="text-align: left;">0.45</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.45</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1agg" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-f1aggov" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1aggov-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Overture building footprints
</figcaption>
<div aria-describedby="tbl-f1aggov-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Weighted F1</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.51</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.59</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Micro F1</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.58</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.63</td>
<td style="text-align: left;">0.56</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Macro F1</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.47</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<div id="tbl-f1class" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-f1class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Individual F1 scores for level 3 clusters
</figcaption>
<div aria-describedby="tbl-f1class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">

</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1class" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-f1classms" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1classms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Microsoft building footprints
</figcaption>
<div aria-describedby="tbl-f1classms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Central Urban Developments</strong></td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.56</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.45</td>
<td style="text-align: left;">0.51</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.47</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dense Urban Developments</strong></td>
<td style="text-align: left;">0.73</td>
<td style="text-align: left;">0.67</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.70</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Large Scale Developments</strong></td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.42</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.39</td>
<td style="text-align: left;">0.42</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Linear Road Network Developments</strong></td>
<td style="text-align: left;">0.87</td>
<td style="text-align: left;">0.67</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.45</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.20</td>
<td style="text-align: left;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sparse Road Network Developments</strong></td>
<td style="text-align: left;">0.79</td>
<td style="text-align: left;">0.71</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.70</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.73</td>
<td style="text-align: left;">0.64</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sparse Rural Development</strong></td>
<td style="text-align: left;">0.87</td>
<td style="text-align: left;">0.71</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.18</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.47</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Street-aligned Developments</strong></td>
<td style="text-align: left;">0.70</td>
<td style="text-align: left;">0.63</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.56</td>
<td style="text-align: left;">0.33</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.32</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">

</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1class" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-f1classov" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1classov-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Overture building footprints
</figcaption>
<div aria-describedby="tbl-f1classov-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Central Urban Developments</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.67</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.62</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dense Urban Developments</strong></td>
<td style="text-align: left;">0.72</td>
<td style="text-align: left;">0.67</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.63</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Large Scale Developments</strong></td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.45</td>
<td style="text-align: left;">0.40</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.34</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Linear Road Network Developments</strong></td>
<td style="text-align: left;">0.86</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.60</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.26</td>
<td style="text-align: left;">0.23</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sparse Road Network Developments</strong></td>
<td style="text-align: left;">0.78</td>
<td style="text-align: left;">0.70</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.60</td>
<td style="text-align: left;">0.73</td>
<td style="text-align: left;">0.67</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sparse Rural Development</strong></td>
<td style="text-align: left;">0.85</td>
<td style="text-align: left;">0.71</td>
<td style="text-align: left;">0.39</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.16</td>
<td style="text-align: left;">0.51</td>
<td style="text-align: left;">0.47</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Street-aligned Developments</strong></td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.60</td>
<td style="text-align: left;">0.51</td>
<td style="text-align: left;">0.35</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<div id="tbl-f1agg4" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-f1agg4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Overall F1 scores at Level 4
</figcaption>
<div aria-describedby="tbl-f1agg4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1agg4" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-f1aggms4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1aggms4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Microsoft building footprints
</figcaption>
<div aria-describedby="tbl-f1aggms4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Weighted F1</strong></td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.42</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.44</td>
<td style="text-align: left;">0.29</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Micro F1</strong></td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.42</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.40</td>
<td style="text-align: left;">0.28</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Macro F1</strong></td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.26</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1agg4" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-f1aggov4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1aggov4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Overture building footprints
</figcaption>
<div aria-describedby="tbl-f1aggov4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Weighted F1</strong></td>
<td style="text-align: left;">0.70</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.43</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.39</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Micro F1</strong></td>
<td style="text-align: left;">0.70</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.40</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.43</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.36</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Macro F1</strong></td>
<td style="text-align: left;">0.71</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.32</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<div id="tbl-f1class4" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-f1class4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;6: Individual F1 scores for level 4 clusters
</figcaption>
<div aria-describedby="tbl-f1class4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1class4" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-f1classms4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1classms4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Microsoft building footprints
</figcaption>
<div aria-describedby="tbl-f1classms4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 38%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Aligned Winding Streets</strong></td>
<td style="text-align: left;">0.51</td>
<td style="text-align: left;">0.45</td>
<td style="text-align: left;">0.28</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.21</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.28</td>
<td style="text-align: left;">0.18</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Compact Development</strong></td>
<td style="text-align: left;">0.59</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.13</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">0.09</td>
<td style="text-align: left;">0.24</td>
<td style="text-align: left;">0.09</td>
<td style="text-align: left;">0.08</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Cul-de-Sac Layout</strong></td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.43</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.32</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dense Connected Developments</strong></td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.33</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.45</td>
<td style="text-align: left;">0.33</td>
<td style="text-align: left;">0.29</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Dense Standalone Buildings</strong></td>
<td style="text-align: left;">0.63</td>
<td style="text-align: left;">0.56</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.57</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dispersed Linear Development</strong></td>
<td style="text-align: left;">0.91</td>
<td style="text-align: left;">0.64</td>
<td style="text-align: left;">0.19</td>
<td style="text-align: left;">0.17</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.18</td>
<td style="text-align: left;">0.06</td>
<td style="text-align: left;">0.18</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Extensive Wide-Spaced Developments</strong></td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.25</td>
<td style="text-align: left;">0.25</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.13</td>
<td style="text-align: left;">0.19</td>
<td style="text-align: left;">0.25</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Large Interconnected Blocks</strong></td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.28</td>
<td style="text-align: left;">0.24</td>
<td style="text-align: left;">0.22</td>
<td style="text-align: left;">0.17</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.15</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Large Utilitarian Development</strong></td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.40</td>
<td style="text-align: left;">0.32</td>
<td style="text-align: left;">0.23</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.34</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Linear Development</strong></td>
<td style="text-align: left;">0.73</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.28</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.43</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.13</td>
<td style="text-align: left;">0.16</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sparse Open Layout</strong></td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.56</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.14</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.32</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.24</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sparse Road-Linked Development</strong></td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.40</td>
<td style="text-align: left;">0.32</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.17</td>
<td style="text-align: left;">0.19</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sparse Rural Development</strong></td>
<td style="text-align: left;">0.79</td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.39</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.17</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.47</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">

</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-f1class4" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-f1classov4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-f1classov4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Overture building footprints
</figcaption>
<div aria-describedby="tbl-f1classov4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 38%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><strong>Random</strong></th>
<th style="text-align: left;"><strong>Spatial</strong></th>
<th style="text-align: left;"><strong>OoS</strong></th>
<th style="text-align: left;">SK</th>
<th style="text-align: left;">PL</th>
<th style="text-align: left;">DE</th>
<th style="text-align: left;">AT</th>
<th style="text-align: left;">CZ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Aligned Winding Streets</strong></td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.28</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.25</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Compact Development</strong></td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.16</td>
<td style="text-align: left;">0.09</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.18</td>
<td style="text-align: left;">0.11</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Cul-de-Sac Layout</strong></td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.51</td>
<td style="text-align: left;">0.42</td>
<td style="text-align: left;">0.48</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.32</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dense Connected Developments</strong></td>
<td style="text-align: left;">0.67</td>
<td style="text-align: left;">0.58</td>
<td style="text-align: left;">0.43</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.44</td>
<td style="text-align: left;">0.58</td>
<td style="text-align: left;">0.39</td>
<td style="text-align: left;">0.44</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Dense Standalone Buildings</strong></td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.63</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.61</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dispersed Linear Development</strong></td>
<td style="text-align: left;">0.96</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.16</td>
<td style="text-align: left;">0.09</td>
<td style="text-align: left;">0.31</td>
<td style="text-align: left;">0.16</td>
<td style="text-align: left;">0.07</td>
<td style="text-align: left;">0.19</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Extensive Wide-Spaced Developments</strong></td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.27</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.13</td>
<td style="text-align: left;">0.23</td>
<td style="text-align: left;">0.22</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Large Interconnected Blocks</strong></td>
<td style="text-align: left;">0.69</td>
<td style="text-align: left;">0.60</td>
<td style="text-align: left;">0.46</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.57</td>
<td style="text-align: left;">0.42</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Large Utilitarian Development</strong></td>
<td style="text-align: left;">0.60</td>
<td style="text-align: left;">0.44</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.28</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.42</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.41</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Linear Development</strong></td>
<td style="text-align: left;">0.88</td>
<td style="text-align: left;">0.53</td>
<td style="text-align: left;">0.30</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.44</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.21</td>
<td style="text-align: left;">0.18</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sparse Open Layout</strong></td>
<td style="text-align: left;">0.74</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.36</td>
<td style="text-align: left;">0.07</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.38</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sparse Road-Linked Development</strong></td>
<td style="text-align: left;">0.72</td>
<td style="text-align: left;">0.49</td>
<td style="text-align: left;">0.29</td>
<td style="text-align: left;">0.37</td>
<td style="text-align: left;">0.34</td>
<td style="text-align: left;">0.32</td>
<td style="text-align: left;">0.21</td>
<td style="text-align: left;">0.21</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sparse Rural Development</strong></td>
<td style="text-align: left;">0.88</td>
<td style="text-align: left;">0.71</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.35</td>
<td style="text-align: left;">0.55</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.47</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<section id="discussion" class="level3">
<h3 class="anchored" data-anchor-id="discussion">Discussion</h3>
<section id="urban-morphology" class="level4">
<h4 class="anchored" data-anchor-id="urban-morphology">Urban Morphology</h4>
<div id="fig-cm" class="nostretch quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../figures/results/cm.png" class="nostretch img-fluid quarto-figure quarto-figure-center figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Confusion matrix for the Spatial model Level 4 predictions. Normalised by the True Label (row-wise)
</figcaption>
</figure>
</div>
<p>With regard to urban morphology, the results show that deriving detailed urban morphology classes from alternative data sources is possible. However, morphological types are heterogeneous, and the characteristics and factors that are important vary across scales of dissimilarity.</p>
<p>The modelling results show that a lot of useful information can be learned morphologically from one country and transferred to new contexts. <a href="#tbl-f1agg" class="quarto-xref">Table&nbsp;3</a> shows that at Level 3, the out-of-sample (OoS) averages are close to the spatial split F1 score of approximately 0.6. This is comparable to other land use prediction models, with two caveats. First, we are making predictions at a much higher level of detail—the individual building level—than typical land use models. Second, we test the models in a more difficult but more realistic scenario and report the possible out-of-sample scores. Furthermore, the higher scores in <a href="#tbl-f1agg" class="quarto-xref">Table&nbsp;3</a>, as well as the confusion matrix in <a href="#fig-cm" class="quarto-xref">Figure&nbsp;4</a>, also suggest that we make reasonable misclassifications—one class at Level 4 is often misclassified as another Level 4 class within the same Level 3 category, i.e., part of the same branch in the ground truth taxonomy. If this were not the case, the <a href="#tbl-f1agg" class="quarto-xref">Table&nbsp;3</a> F1 scores would be equal to or lower than the <a href="#tbl-f1agg4" class="quarto-xref">Table&nbsp;5</a> scores.</p>
<p>Nevertheless, in spite of these results, urban morphology remains highly heterogeneous. The differences between the country-specific models reflect the ability to use information from the analysed urban forms of several countries to infer the urban form type in an unseen country. If the results across these models were similar, it would imply that urban form is similar across countries. The large differences suggest that underlying national phenomena affect morphology. While this in itself is not a new finding, it has not been quantitatively demonstrated before, especially based on tens of morphological characteristics calculated using tens of millions of urban geometries across several countries.</p>
<p>This heterogeneity, however, varies. Austria has, on average, the most similar morphology to the other four Central European countries, whereas Czechia and Slovakia are the most different. The level of morphological detail at which the analysis is carried out also has an effect. At Level 3 of the morphological taxonomic tree the results across countries are relatively more similar than at Level 4. Furthermore, <strong>Dense Standalone Buildings</strong> , <strong>Large Interconnected Blocks</strong> , <strong>Large Utilitarian Development</strong>, are more predictable across all the country models than other classes.</p>
<p>Identifying different types of urban form also requires specific types of characteristics and data quality. The relative overall similarity between the scores in <a href="#tbl-f1aggms" class="quarto-xref">Table&nbsp;3 (a)</a> and <a href="#tbl-f1aggov" class="quarto-xref">Table&nbsp;3 (b)</a> suggests that, except in the case of <strong>Central Urban Developments</strong>, building polygon quality is not that important. Conversely, since the street network is shared, the results show the importance of the street network and how it can compensate for poor-quality building footprint data. As the required level of detail increases, however (see <a href="#tbl-f1aggms4" class="quarto-xref">Table&nbsp;5 (a)</a> and <a href="#tbl-f1aggov4" class="quarto-xref">Table&nbsp;5 (b)</a>), data quality and aspects of building morphology such as adjacency, configuration, and shape become more important.</p>
</section>
<section id="morphological-data" class="level4">
<h4 class="anchored" data-anchor-id="morphological-data">Morphological data</h4>
<p>The results also suggest that heterogeneous but more detailed data is preferable to homogeneous but coarser data for urban morphological analysis. Furthermore, the morphological pipeline developed for cadastre data can be run without modification on both the Microsoft (homogeneous, generally more detailed) and Overture maps data (heterogeneous, generally more detailed).</p>
<p>The overall higher or equivalent performance of Overture maps data shows that this data should be used when possible to identify urban morphological types for countries not in the training data. Overture maps’ schema and easy access to the OpenStreetMap street networks are additional benefits. Taken together, the results show that, overall, when cadastre data is not available, Overture maps data should be used in place of satellite-derived footprints.</p>
<p>The consistently higher performance of the spatial models also suggests using as much data as possible in model training, from any source, since it provides some local context.</p>
</section>
<section id="spatial-modelling" class="level4">
<h4 class="anchored" data-anchor-id="spatial-modelling">Spatial modelling</h4>
<p>The results from the comparisons highlight the need for complex train/testing dataset splits when training models in the presence of spatial autocorrelation. When reporting accuracy scores, many land use prediction models do not take into account spatial autocorrelation. As consistently shown in the F1 score tables in this work, this results in artificially higher scores. Even worse, in the case of more complex models, they may not be learning the weights necessary to perform inference, but rather overfitting and memorising the training data. This work further shows that, for urban morphological predictions and analysis specifically, spatial leakage is ubiquitous.</p>
<p>There are other works and papers that have highlighted the need for spatially stratified training of models. They suggest various schemes to split the data spatially - predefined grids or locally derived boundaries or other approaches all together. What this paper further highlights is the need to consider not just the specific type of spatial stratification, but the scale of stratification as well. The consistently lower scores for the spatial split and the individual countries models highlight the fact that there is spatial autocorrelation of morphological features at multiple scales - local, as defined in this work based on h3 level 7 grid cells, and national as defined by national boundaries.</p>
<p>In the specific case of urban morphology, there are also other possible scales to consider, such as regional or city-level, which could also affect predictions. We focused specifically on the national scale, since data quality from OpenStreetMap varies widely at that level. Furthermore, the most common use case for the model would be to predict morphological classes for an entire country that is not part of the training data. Nevertheless, the implications of our results are that when modelling spatial phenomena using machine learning models, train/test splits should account for the specific properties of the phenomenon under analysis. Works that do not explicitly do this risk reporting artificially high accuracies that do not reflect real model use cases.</p>
</section>
</section>
</section>
</section>
<section id="ai-based-urban-fabric-classification-using-satellite-imagery" class="level1">
<h1>AI-Based Urban Fabric Classification using Satellite Imagery</h1>
<p>Urban areas represent complex and dynamic environments, making traditional analysis challenging due to their diverse characteristics. Remote sensing technologies, particularly satellite imagery, provide powerful tools for understanding and characterising urban areas at scale. As part of the EuroFab project, we employed AI modelling techniques using Sentinel-2 satellite imagery to classify and analyse urban fabric across Great Britain. The aim was to generate detailed insights into urban spatial structures and track temporal changes spanning from 2016 to 2021.</p>
<section id="data-and-methods" class="level2">
<h2 class="anchored" data-anchor-id="data-and-methods">Data and Methods</h2>
<section id="satellite-imagery" class="level3">
<h3 class="anchored" data-anchor-id="satellite-imagery">Satellite Imagery</h3>
<p>We utilised two different sets of satellite images derived from Sentinel-2 imagery:</p>
<ol type="1">
<li><p><strong>GHS-composite-S2 R2020A dataset</strong> <span class="citation" data-cites="corbane2020global">(<a href="#ref-corbane2020global" role="doc-biblioref">Corbane et al. 2020</a>)</span>: Covering January 2017 to December 2018, this dataset offers cloud-free, consistent, high-quality RGB (red, green, blue band) composite imagery at a resolution of 10 meters per pixel. We used these images of Great Britain (GB) to train our prediction model.</p></li>
<li><p><strong>Annual Sentinel-2 composites</strong>: Created for each year from 2016 to 2021, these composites include only cloud-free RGB images from their specific year. We acquired these using the Google Earth Engine API through automated Python scripts (as described in <a href="https://github.com/urbangrammarai/gee_pipeline">GEE pipeline</a>).</p></li>
</ol>
<p>Sentinel-2 data is particularly suitable for our application due to several advantages:</p>
<ul>
<li>Consistent and openly available global coverage, ideal for cross-regional comparisons</li>
<li>Temporal flexibility through composites from multiple time points, allowing analysis of urban patterns over time</li>
<li>Resolution of 10 meters per pixel, providing sufficient detail to distinguish urban features at the neighbourhood scale</li>
<li>Compatibility with many pre-trained geospatial AI models, facilitating transfer learning</li>
</ul>
</section>
<section id="urban-fabric-classes" class="level3">
<h3 class="anchored" data-anchor-id="urban-fabric-classes">Urban Fabric Classes</h3>
<p>The urban fabric predictions from our AI model are based on labels from the Spatial Signatures Framework <span class="citation" data-cites="arribas2022spatial fleischmann2022geographical">(<a href="#ref-arribas2022spatial" role="doc-biblioref">Arribas-Bel and Fleischmann 2022</a>; <a href="#ref-fleischmann2022geographical" role="doc-biblioref">Fleischmann and Arribas-Bel 2022</a>)</span>, which provides a typology of British urban environments characterised by both form (physical structure) and function (usage). This framework captures the complexity of urban areas, offering insights into how different spaces look and operate.</p>
<p>While our primary focus is on urban fabric classification centred on form—an approach that may be simpler since form is visible in imagery—we currently use the Spatial Signatures Framework as a proxy due to its conceptual alignment with our goals for urban characterisation. This decision was influenced by the limited project duration and the fact that the morphotope-based classification only became available in Q4 2024.</p>
<p>To ensure progress in developing the AI model, we use separate input classifications for the morphological and AI components of the project. The expectation is that the two classifications are conceptually similar, allowing the model architecture developed for Spatial Signatures to later support building an equally or more precise predictive model for the morphotope-based classification.</p>
</section>
</section>
<section id="model-design" class="level2">
<h2 class="anchored" data-anchor-id="model-design">Model Design</h2>
<section id="classification-vs.-segmentation" class="level3">
<h3 class="anchored" data-anchor-id="classification-vs.-segmentation">Classification vs.&nbsp;Segmentation</h3>
<p>In satellite image analysis, classification and segmentation address spatial labelling at different levels of granularity:</p>
<ul>
<li><strong>Classification</strong>: Assigns a single urban fabric type to an image tile, offering generalised insights into dominant urban characteristics without the need for pixel-perfect alignment.</li>
<li><strong>Segmentation</strong>: Assigns urban fabric types at a pixel level, providing detailed boundary-specific mapping but facing challenges due to ambiguous class boundaries in urban environments.</li>
</ul>
<p>In our study, the label dataset does not always correspond directly to identifiable features in the imagery, making classification a potentially more suitable approach as it generalises each tile’s dominant land cover type without requiring exact pixel alignment. However, we explored both approaches to evaluate how each method performs given the scale and nature of the dataset.</p>
</section>
<section id="scale" class="level3">
<h3 class="anchored" data-anchor-id="scale">Scale</h3>
<p>We tested multiple scales for our analysis: - Segmentation at the pixel level (preprocessed into 224×224 pixel tiles for compatibility with downstream models) - Classification at scales of 56×56 pixels (560×560 meters on the ground) and 25×25 pixels (250×250 meters on the ground)</p>
</section>
<section id="sampling" class="level3">
<h3 class="anchored" data-anchor-id="sampling">Sampling</h3>
<p>We evaluated two sampling approaches to assess their impact on spatial generalisation and F1-score performance:</p>
<ol type="1">
<li><strong>Random sampling</strong>: Ensures diversity and captures localised patterns, but risks spatial leakage, potentially inflating performance metrics.</li>
<li><strong>H3 resolution 3 regional sampling</strong>: Reduces spatial leakage and offers a more realistic evaluation of generalisation but can suffer from unfair penalisation due to the heterogeneity of regions.</li>
</ol>
</section>
</section>
<section id="experimental-approaches" class="level2">
<h2 class="anchored" data-anchor-id="experimental-approaches">Experimental Approaches</h2>
<p>We structured experiments around three distinct modelling approaches:</p>
<ul>
<li><strong>Approach A</strong>: Baseline model employing SatlasPretrain embeddings coupled with an XGBoost classifier.</li>
<li><strong>Approach B</strong>: Fine-tuned three geospatial foundation models (Satlas, Clay, Prithvi) specifically for segmentation tasks.</li>
<li><strong>Approach C</strong>: Fine-tuned the Clay model for classification tasks based on its superior segmentation performance.</li>
</ul>
</section>
<section id="model-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="model-evaluation">Model Evaluation</h2>
<p>Multiple metrics were utilised to comprehensively evaluate model performance:</p>
<ul>
<li><strong>Weighted Accuracy (Macro)</strong>: Reflects overall predictive accuracy adjusted for class frequency.</li>
<li><strong>Weighted F1 Score</strong>: Balances precision and recall, particularly crucial for handling imbalanced datasets.</li>
</ul>
</section>
<section id="ai-model-results" class="level2">
<h2 class="anchored" data-anchor-id="ai-model-results">AI Model Results</h2>
<p>Our experimental results demonstrated that classification approaches outperformed segmentation methods. This was not only in terms of accuracy but also in the shapes that were predicted. While the 56×56 pixel scale (560×560m) yielded marginally better statistical performance, we determined that the 25×25 pixel scale (250×250m) offered a more appropriate resolution for policy applications and urban planning contexts. A key finding was that incorporating regional context through H3 spatial indexing significantly enhanced predictive performance across all configurations. Models combining embeddings with H3 contextual information provided the most balanced performance, substantially outperforming other approaches on all metrics. Notably, when comparing sampling strategies, we observed that H3 regional sampling showed slightly lower performance metrics than random sampling, suggesting potential spatial leakage in the random sampling approach that may artificially inflate performance metrics.</p>
<p>The results in the table below represent either pixel-level values or tile level values in brackets.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Approach</strong></th>
<th><strong>Scale</strong></th>
<th><strong>Sampling</strong></th>
<th><strong>Clas/seg</strong></th>
<th><strong>Regional info</strong></th>
<th><strong>Global Acc</strong></th>
<th><strong>Macro Acc</strong></th>
<th><strong>F1 (macro)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C (Clay)</td>
<td>1x1</td>
<td>random</td>
<td>segmentation</td>
<td></td>
<td><strong>0.73</strong></td>
<td><strong>0.31</strong></td>
<td><strong>0.30 (0.58)</strong></td>
</tr>
<tr class="even">
<td>C (Satlas)</td>
<td>1x1</td>
<td>random</td>
<td>segmentation</td>
<td></td>
<td>0.57</td>
<td></td>
<td>(0.41)</td>
</tr>
<tr class="odd">
<td>C (Prithvi)</td>
<td>1x1</td>
<td>random</td>
<td>segmentation</td>
<td></td>
<td>0.62</td>
<td></td>
<td>(0.42)</td>
</tr>
<tr class="even">
<td>A (embeddings)</td>
<td>25x25</td>
<td>random</td>
<td>classification</td>
<td></td>
<td>(0.73)</td>
<td>(0.31)</td>
<td>(0.30)</td>
</tr>
<tr class="odd">
<td>A (embeddings)</td>
<td>25x25</td>
<td>random</td>
<td>classification</td>
<td></td>
<td><strong>(0.81)</strong></td>
<td><strong>(0.46)</strong></td>
<td><strong>(0.53)</strong></td>
</tr>
<tr class="even">
<td>A (embeddings)</td>
<td>25x25</td>
<td>random</td>
<td>classification</td>
<td>lat/lon</td>
<td>(0.89)</td>
<td>(0.71)</td>
<td>(0.78)</td>
</tr>
<tr class="odd">
<td></td>
<td>25x25</td>
<td>random</td>
<td></td>
<td>lat/lon</td>
<td>(0.91)</td>
<td>(0.78)</td>
<td>(0.83)</td>
</tr>
<tr class="even">
<td>A (embeddings)</td>
<td>25x25</td>
<td>H3 res 3 (55,743)</td>
<td>classification</td>
<td>H3 res 5 (lat/lon)</td>
<td>(0.58)</td>
<td>(0.15)</td>
<td>(0.15)</td>
</tr>
<tr class="odd">
<td>A (embeddings)</td>
<td>25x25</td>
<td>H3 res 5 (2,125)</td>
<td>classification</td>
<td>H3 res 5 (lat/lon)</td>
<td>(0.65)</td>
<td>(0.20)</td>
<td>(0.21)</td>
</tr>
<tr class="even">
<td>A (embeddings)</td>
<td>25x25</td>
<td>H3 res 6 (335)</td>
<td>classification</td>
<td>H3 res 5 (lat/lon)</td>
<td><strong>(0.72)</strong></td>
<td><strong>(0.29)</strong></td>
<td><strong>(0.32)</strong></td>
</tr>
<tr class="odd">
<td>A (embeddings)</td>
<td>56x56</td>
<td>random</td>
<td>classification</td>
<td></td>
<td>0.76 (0.66)</td>
<td>0.22 (0.13)</td>
<td>0.23</td>
</tr>
<tr class="even">
<td>A (embeddings)</td>
<td>56x56</td>
<td>random</td>
<td>classification</td>
<td>H3 res 5 (cat)</td>
<td><strong>0.87 (0.82)</strong></td>
<td><strong>0.42 (0.35)</strong></td>
<td><strong>0.45</strong></td>
</tr>
<tr class="odd">
<td>A (embeddings)</td>
<td>56x56</td>
<td>random</td>
<td>classification</td>
<td>H3 res 5 (lat/lon)</td>
<td><strong>0.87 (0.81)</strong></td>
<td>0.39 (0.31)</td>
<td>0.42</td>
</tr>
<tr class="even">
<td>A (embeddings)</td>
<td>56x56</td>
<td>random</td>
<td>regression (ordinal)</td>
<td>H3 res 5 (lat/lon)</td>
<td>0.80 (0.80)</td>
<td>0.26 (0.26)</td>
<td>0.26</td>
</tr>
<tr class="odd">
<td>B (Clay)</td>
<td>56x56</td>
<td>random</td>
<td>classification</td>
<td></td>
<td>0.59 (0.68)</td>
<td>0.09</td>
<td>0.12</td>
</tr>
</tbody>
</table>
<p>Based on these insights, our final model implements a Satlas embedding architecture operating at the 25×25 pixel scale (250×250m resolution) with integrated H3 resolution 5 regional context, optimising the balance between spatial detail and classification accuracy while ensuring robust generalisation to diverse urban environments.</p>
</section>
<section id="final-model" class="level2">
<h2 class="anchored" data-anchor-id="final-model">Final Model</h2>
<section id="addressing-class-imbalance" class="level3">
<h3 class="anchored" data-anchor-id="addressing-class-imbalance">Addressing Class Imbalance</h3>
<p>Significant class imbalance, particularly for urban classes, posed a considerable challenge in our modelling. To mitigate this, we implemented a sliding-window augmentation strategy for classes comprising less than 10% of the dataset (all classes except <em>Countryside agriculture</em> and <em>Wild countryside</em>).</p>
<p>This sliding-window approach systematically shifted the sampling window horizontally and vertically by increments of 50, 100, 150, and 200 meters, significantly increasing the volume of available training data for underrepresented classes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../figures/results/img_aug.jpg" class="nostretch figure-img" height="420"></p>
<figcaption>Sliding Window Augmentation</figcaption>
</figure>
</div>
<p>The images below show class distributions before (left) and after (right) augmentation:</p>
<p><img src="../figures/results/type_clean_encode.png" class="nostretch quarto-figure quarto-figure-left" height="200" alt="Before Augmentation"> <img src="../figures/results/type_clean_encode_augmented.png" class="nostretch quarto-figure quarto-figure-right" height="200" alt="After Augmentation"></p>
<p>The following table summarises augmentation results, highlighting the substantial increase in training samples for previously underrepresented classes:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 48%">
<col style="width: 26%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Class</th>
<th>Before Augmentation</th>
<th>After Augmentation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Accessible suburbia</td>
<td>15,054</td>
<td>129,620</td>
</tr>
<tr class="even">
<td>Connected residential neighbourhoods</td>
<td>2,567</td>
<td>21,021</td>
</tr>
<tr class="odd">
<td>Countryside agriculture</td>
<td>1,367,999</td>
<td>1,367,999</td>
</tr>
<tr class="even">
<td>Dense residential neighbourhoods</td>
<td>4,299</td>
<td>34,507</td>
</tr>
<tr class="odd">
<td>Dense urban neighbourhoods</td>
<td>3,636</td>
<td>31,657</td>
</tr>
<tr class="even">
<td>Disconnected suburbia</td>
<td>2,644</td>
<td>20,113</td>
</tr>
<tr class="odd">
<td>Gridded residential quarters</td>
<td>1,518</td>
<td>12,849</td>
</tr>
<tr class="even">
<td>Open sprawl</td>
<td>33,910</td>
<td>292,884</td>
</tr>
<tr class="odd">
<td>Urban buffer</td>
<td>381,283</td>
<td>381,283</td>
</tr>
<tr class="even">
<td>Urbanity</td>
<td>2,495</td>
<td>21,929</td>
</tr>
<tr class="odd">
<td>Warehouse/Park land</td>
<td>21,282</td>
<td>195,105</td>
</tr>
<tr class="even">
<td>Wild countryside</td>
<td>1,395,048</td>
<td>1,395,048</td>
</tr>
</tbody>
</table>
</section>
<section id="classification-schemes" class="level3">
<h3 class="anchored" data-anchor-id="classification-schemes">Classification Schemes</h3>
<p>We used two versions of our dataset:</p>
<ol type="1">
<li><strong>12-class scheme</strong>: Maintained all original Spatial Signatures classes:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>class_labels <span class="op">=</span> {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Accessible suburbia'</span>: <span class="dv">0</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Connected residential neighbourhoods'</span>: <span class="dv">1</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Countryside agriculture'</span>: <span class="dv">2</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Dense residential neighbourhoods'</span>: <span class="dv">3</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Dense urban neighbourhoods'</span>: <span class="dv">4</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Disconnected suburbia'</span>: <span class="dv">5</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Gridded residential quarters'</span>: <span class="dv">6</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Open sprawl'</span>: <span class="dv">7</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Urban buffer'</span>: <span class="dv">8</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Urbanity'</span>: <span class="dv">9</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Warehouse/Park land'</span>: <span class="dv">10</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Wild countryside'</span>: <span class="dv">11</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><strong>Simplified 7-class scheme</strong>: Created by re-clustering underlying data from the Spatial Signatures Framework using K-means clustering (K=7):</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>class_labels_k7 <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Countryside agriculture'</span>: <span class="dv">0</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Open sprawl'</span>: <span class="dv">1</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Compact suburbia'</span>: <span class="dv">2</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Urban'</span>: <span class="dv">3</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Urban buffer'</span>: <span class="dv">4</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Warehouse/Park land'</span>: <span class="dv">5</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Wild countryside'</span>: <span class="dv">6</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="model-performance" class="level3">
<h3 class="anchored" data-anchor-id="model-performance">Model Performance</h3>
<p>The final XGBoost classifier was trained using the augmented dataset and evaluated using three metrics: micro accuracy, macro accuracy (where every class has the same weighting), and macro F1 score. We validated the model using 5-fold spatial cross-validation at H3 resolution 6, ensuring an 80/20 training-testing split.</p>
<p>The table below summarises classifier performance for both classification schemes (7 and 12 classes) and two spatial context scenarios (with and without H3 resolution):</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 23%">
<col style="width: 13%">
<col style="width: 22%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Classes (K)</th>
<th>Spatial Context</th>
<th>Accuracy</th>
<th>Macro Accuracy</th>
<th>Macro F1 Score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7</td>
<td>None</td>
<td>0.4924</td>
<td>0.3856</td>
<td>0.3389</td>
</tr>
<tr class="even">
<td>7</td>
<td>H3 (res 5)</td>
<td>0.6959</td>
<td>0.5713</td>
<td><strong>0.5221</strong></td>
</tr>
<tr class="odd">
<td>12</td>
<td>None</td>
<td>0.4617</td>
<td>0.2666</td>
<td>0.2127</td>
</tr>
<tr class="even">
<td>12</td>
<td>H3 (res 5)</td>
<td>0.6654</td>
<td>0.4328</td>
<td>0.3654</td>
</tr>
</tbody>
</table>
<p>Including spatial context (H3 resolution) notably improved classification accuracy and F1 scores, demonstrating the importance of spatial context in predicting urban fabric classes. As anticipated, the model with fewer classes (7) performed better compared to the one with 12 classes.</p>
</section>
</section>
<section id="temporal-analysis" class="level2">
<h2 class="anchored" data-anchor-id="temporal-analysis">Temporal Analysis</h2>
<p>We used the trained XGBoost classifier to make predictions across the years 2016 to 2021. The overall overlap between the initial year (2016) and final year (2021) remained high at 88%, confirming that Spatial Signatures classes remained relatively stable across the study period. However, minor variations may indicate either genuine change or model uncertainty.</p>
<p>Year-to-year class stability rates:</p>
<ul>
<li>2016 → 2017: 88%</li>
<li>2017 → 2018: 88%</li>
<li>2018 → 2019: 86%</li>
<li>2019 → 2020: 86%</li>
<li>2020 → 2021: 88%</li>
</ul>
<section id="diversity-analysis-shannon-index" class="level3">
<h3 class="anchored" data-anchor-id="diversity-analysis-shannon-index">Diversity Analysis (Shannon Index)</h3>
<p>We assessed changes in urban fabric diversity using the Shannon Index across the studied years. The results are summarised in the table below, indicating slight fluctuations, with the most notable increase in diversity occurring in 2019:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Year</th>
<th>Shannon Index</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2016</td>
<td>1.868</td>
</tr>
<tr class="even">
<td>2017</td>
<td>1.863</td>
</tr>
<tr class="odd">
<td>2018</td>
<td>1.868</td>
</tr>
<tr class="even">
<td>2019</td>
<td>2.007</td>
</tr>
<tr class="odd">
<td>2020</td>
<td>1.873</td>
</tr>
<tr class="even">
<td>2021</td>
<td>1.872</td>
</tr>
</tbody>
</table>
<p>The marked increase in the Shannon Index in 2019 suggests an increase in class diversity during that year, followed by a subsequent return to previous levels. This could indicate some differences in the imagery caused by weather conditions or sensor characteristics specific to 2019.</p>
</section>
<section id="spatial-patterns-of-change" class="level3">
<h3 class="anchored" data-anchor-id="spatial-patterns-of-change">Spatial Patterns of Change</h3>
<p>To make predictions across years, we used the trained model and fed in all GB tiles to get predictions for the 12 classes.</p>
<p>Spatial analysis identified areas across England with frequent class transitions (map below), particularly around major urban centres and suburban zones. These frequent transitions may either represent genuine urban transformations or result from classifier uncertainty, especially in ambiguous zones between visually similar Spatial Signatures classes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://eurofab.org/talks/figures/202502_progress_turing/frequency_map.png" class="nostretch figure-img" height="420"></p>
<figcaption>Frequency Map</figcaption>
</figure>
</div>
<p>Class-specific analysis further highlighted particular Spatial Signatures types prone to transitions. The figure below shows which classes experienced frequent transitions:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://eurofab.org/talks/figures/202502_progress_turing/class_transitions.png" class="nostretch figure-img" height="420"></p>
<figcaption>Class Transitions</figcaption>
</figure>
</div>
<p>To better interpret these transitions, we calculated transition probabilities and organised them into a structured confusion matrix. This matrix clearly shows the urban fabric classes most likely to interchange over the studied period:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://eurofab.org/talks/figures/202502_progress_turing/class_transitions_reasonable.png" class="nostretch figure-img" height="420"></p>
<figcaption>‘Reasonable’ confusion matrix</figcaption>
</figure>
</div>
<p>Lastly, we analysed the inverse-probability-based distances of urban fabric classes over time. Shorter distances represent a higher likelihood of transitioning or changing classes from year to year, whereas longer distances indicate greater stability:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://eurofab.org/talks/figures/202502_progress_turing/1d_transitions.png" class="img-fluid figure-img"></p>
<figcaption>Probability of change across classes</figcaption>
</figure>
</div>
<p>This analysis shows urban fabric classes such as <em>Urbanity</em>, <em>Warehouse/Park land</em>, <em>Dense urban neighbourhoods</em>, and <em>Connected residential neighbourhoods</em> have shorter inverse distances, indicating higher levels of dynamic change or redevelopment. Conversely, classes such as <em>Wild countryside</em> and <em>Countryside agriculture</em> have longer distances, suggesting greater temporal stability. Although these results align with expectations about urban and rural dynamics, they may also reflect the classifier’s varying uncertainty across these visually distinct environments.</p>
</section>
</section>
<section id="discussion-1" class="level2">
<h2 class="anchored" data-anchor-id="discussion-1">Discussion</h2>
</section>
<section id="key-findings" class="level2">
<h2 class="anchored" data-anchor-id="key-findings">Key Findings</h2>
<p>The analysis demonstrates that urban fabric classifications exhibit distinct temporal and spatial dynamics, reflecting varying levels of stability and diversity over time. Notably, urban classes such as <em>Dense urban neighbourhoods</em> and <em>Connected residential neighbourhoods</em> displayed higher probabilities of transition, indicating active urban transformation. Similarly, suburban classes, such as <em>Accessible suburbia</em>, <em>Disconnected suburbia</em>, and <em>Urban buffer</em>, also show a higher probability of change between these classes. Conversely, rural classes showed significant stability. It’s important to note that these observed changes may be more related to classifier uncertainty than actual environmental changes.</p>
</section>
<section id="lessons-learned" class="level2">
<h2 class="anchored" data-anchor-id="lessons-learned">Lessons Learned</h2>
<ul>
<li><p><strong>Scale</strong>: Urban fabric classes, like spatial signatures, have fuzzy boundaries. Pixel-level classifications provide the highest possible spatial resolution, which is beneficial for detailed analysis. However, pixels often lack clear visual cues indicating exact boundaries between classes, making pixel-level predictions challenging for the model. Patch-level classification, although lower in spatial resolution depending on patch size, provided clearer visual context and resulted in better overall performance.</p></li>
<li><p><strong>Embeddings vs.&nbsp;Fine-Tuned Foundation Model</strong>: Fine-tuning foundation models involves significant complexity and requires careful design decisions. In our case, the limited number of training examples was insufficient to achieve noticeable improvements through fine-tuning. The effort required for fine-tuning did not outweigh the simpler alternative of using off-the-shelf embeddings.</p></li>
<li><p><strong>Regional Trends</strong>: Including regional contextual information substantially improved the classifier’s accuracy. Nonetheless, we found it essential that embeddings themselves already capture enough visual detail for accurate classification, ensuring that predictions remain robust even without regional context (and simply do not just rely on the spatial information to make predictions).</p></li>
<li><p><strong>Data Augmentation</strong>: The sliding window augmentation approach effectively addressed class imbalances, significantly improving model performance by increasing representation of previously underrepresented urban fabric classes. This approach could boost classifier performance by an additional 10-20% in terms of accuracy.</p></li>
</ul>
</section>
<section id="potential-research-directions" class="level2">
<h2 class="anchored" data-anchor-id="potential-research-directions">Potential Research Directions</h2>
<p>There are several promising directions for future research:</p>
<ul>
<li><p><strong>Handling Misclassifications</strong>: Misclassifications typically occur between visually similar urban fabric classes, indicating inherent uncertainty in predictions. Incorporating prediction probabilities into a secondary model could help address this issue. By explicitly using probability scores from the initial classification as input for a refinement model — as previously shown by Fleischmann and Arribas-Bel<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> — we could better distinguish between ambiguous cases. This approach may “smooth” predictions, reducing noise and improving overall classification accuracy. Future work should explore how prediction confidence scores can be systematically utilised, either by employing spatial smoothing algorithms or by applying secondary machine learning models trained specifically to correct uncertain predictions.</p></li>
<li><p><strong>Generalisability Testing</strong>: Evaluating the generalisability of this methodological framework is crucial for its wider applicability. Future research should test this modelling approach in different European regions, assessing whether the chosen methods, including data preprocessing, augmentation strategies, spatial embeddings, and classifier architectures, perform consistently outside Great Britain. This would involve exploring variations in urban form and regional urban planning contexts across Europe. Understanding these factors will help identify potential adjustments needed to ensure reliable predictions when extending the model beyond the original study area.</p></li>
</ul>
</section>
</section>
<section id="stakeholder-engagement" class="level1">
<h1>Stakeholder engagement</h1>
<p>We have presented the EuroFab project and related products at various events and sessions. At Urbis 24, the project sparked interest in fulfilling unmet data requirements for energy and climate applications, leading to a potential engagement with Covenant of Mayors members via interviews or surveys. The World Urban Forum facilitated the establishment of new stakeholder relationships, including productive sessions with the SSVA (Construction Sector Development Agency of the Ministry of Environment, Lithuania). Furthermore, we held numerous sessions with the Prague Institute of Planning and Development (IPR) and 4ct.</p>
<p>We have gathered multiple insights from the sessions, related to these areas: - Data Integration - Taxonomy Description and Naming - Comparative Urban Analysis: - Expanding Data Coverage - Reducing Manual Effort in Land Use Analysis - Geographical Scale of Results - Taxonomic Tree &amp; Evaluation - Input data quality</p>
<p>A significant finding from the stakeholder engagements is the strong interest in integrating the EuroFab data with land use, geodemographic, land value and other spatial datasets. However, stakeholders differed in their technical ability to make such a merger themselves. This led to discussions about multiple potential derived data products such as classifications that incorporate both morphological and land use or other functional information.</p>
<p>The stakeholders showed significant interest in the taxonomic tree, discussing both its advantages and disadvantages. Potential use cases included, identifying the relationships between different urban forms, as well as comparisons at different scales between regions and cities. SSVA, in particular, conducted a detailed evaluation of the hierarchy within the Lithuanian context and proposed several modifications so it fits better the local context.</p>
<p>Significant time was spend discussing the issues of how to describe and name the taxonomic tree and the clusters. Different applications required different names, and even the same application (for example, for land use planning), but in different countries required different names and descriptions. One discussed approach to this was to give clusters and the taxonomy abstract names that focus only on the morphology. This would later make it easier for users to adapt and refine the classification names and descriptions according to their specific needs and application contexts.</p>
<p>A key application identified through discussions with 4ct, IPR, and SSVA is the use of EuroFab data for comparative urban analysis - stakeholders expressed a strong interest in leveraging the data to compare cities, regions, and even cross-border areas. This capability is seen as valuable for guiding planning decisions, facilitating knowledge transfer between local planning authorities and land developers, and understanding the factors that shape urban development patterns. This emphases on comparisons also underscored the need to expand the geographic coverage of the data.</p>
<p>We have already taken steps to address this requirement. Due to the new stakeholders from Lithuania, we had to process the urban fabric of the whole country. This required adjustments to the processing pipeline, which improved its scalability and performance and currently, its easier to include new countries in the analysis. We also note that even though Lithuania is excluded from the final modelling results with Microsoft and Overture Maps data, it is present in the interactive web application.</p>
<p>There were also multiple discussions with stakeholders about the geographical scale of the results. IPR expressed interest in both fine-grained units, such as morphotopes (local contiguous areas of similar urban morphology), and coarser aggregations, such as the hexagon-based aggregation featured in the web application. Conversely, 4ct and SSVA indicated a need for building-level information, as well as access to the raw data.</p>
<p>Related discussions covered input data quality and additional morphological variables to be included in the classification. The issues with the quality and inconsistencies of building footprints was raised multiple times, as well as problems with the street network. This was especially relevant for building height, which is a characteristic all stakeholders expressed interest in. However, we also discussed the unavailability of this data and the accuracy problems of existing building height data products.</p>
<p>Lastly, The Prague Institute of Planning and Development (IPR) highlighted the potential of EuroFab outputs to help with generating the official land use plan for the city. Furthermore, they expressed interest in potentially integrating the EuroFab data into their urban analytics products for Prague.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The main finding of the modelling work is that it is possible to use alternative, non-cadastre level data for the accurate prediction of urban fabric over time. These predictions are more detailed than existing large-scale urban fabric classifications and the predicted classes are tailored to urban planners, researchers, policymakers and development companies.</p>
<p>One of the main use cases identified by stakeholders was the ability to compare different areas or identify similar cities or regions across countries. The models support this by producing fine-grained, spatially consistent urban classifications that are tailored to comparative analysis at a highly local, regional or continental scale. In addition, the models can capture urban transitions over time, adding a valuable temporal dimension to the analysis. This enables comparisons not only across space, but also through time - making it possible to examine how urban areas evolve, diverge, or converge. The temporal insights unlocked by AI modelling enhance the overall utility of urban classifications for planners, researchers, and policymakers.</p>
<p>A key insight from the modelling work is that increasing the amount of training data improves predictive performance - particularly in the presence of class imbalance, where underrepresented classes can otherwise lead to biased outcomes. This makes data sampling strategies especially important for ensuring balanced model learning across diverse urban forms. The morphometric classification, based on the Overture model, performs well at the building level, and can be deployed at scale to generate detailed urban classes across Europe. These outputs can serve as a rich source of training data for the AI-based model, helping to fill gaps in underrepresented regions or classes. By leveraging morphometric results across multiple countries, the AI model’s predictive accuracy can be further improved - leading to more robust and precise time-series predictions of urban change.</p>
<p>The modelling work also highlights the importance of spatially explicit machine learning and data science. In both cases, incorporating spatial information consistently improves model performance. Additionally, spatially explicit train/test splits provide a more realistic assessment of generalisation, ensuring that models are evaluated under conditions that reflect real-world deployment across unseen geographies.</p>
<p>Lastly, the interest and various feature requests from the stakeholders confirm the need for a detailed urban classification at a granular level. Such a dataset can act as the foundation for multiple derived data products adapted to particular use cases. Examples included comparisons between countries at different scales - neighbourhoods, cities and regions; access to the building-level morphological data of the taxonomy; and the ability to figure out where newly-designed areas would fall within the taxonomy before they are built.</p>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">Limitations</h2>
<p>While the presented methods demonstrate strong potential for scalable urban classification, several limitations should be acknowledged:</p>
<ul>
<li><p>Dependence on ground truth and input data quality While alternative datasets such as Overture or satellite-derived imagery allow broad geographic coverage, they cannot fully substitute for cadastral or on-the-ground verification data. The quality and consistency of input data - particularly building footprints - remain critical to model accuracy, especially at higher classification detail. Differences in data completeness or geometric fidelity can significantly impact performance across regions and classes.</p></li>
<li><p>Uncertainty in temporal and spatial predictions Evaluating the accuracy of predictions over time is inherently challenging due to the absence of ground truth data for intermediate years. Although the classifier identifies plausible transitions, particularly in suburban areas, it is difficult to distinguish genuine urban change from model uncertainty or noise introduced by seasonal imagery variation, cloud cover, or sensor differences.</p></li>
<li><p>Transferability across geographic and morphological contexts The models demonstrate strong generalisation within Great Britain and across several Central European countries. However, their performance varies in regions with distinct urban morphologies, socio-economic conditions, or planning traditions not well represented in the training data. Expanding the training set to include more diverse examples of urban fabric will likely improve transferability and robustness across broader European or global contexts.</p></li>
</ul>
</section>
</section>
<section id="open-science" class="level1">
<h1>Open Science</h1>
<section id="software" class="level2">
<h2 class="anchored" data-anchor-id="software">Software</h2>
<section id="morphometrics" class="level3">
<h3 class="anchored" data-anchor-id="morphometrics">Morphometrics</h3>
<section id="interactive-web-application" class="level4">
<h4 class="anchored" data-anchor-id="interactive-web-application">Interactive web application</h4>
<p>We developed an interactive web app that displays the entire ground truth morphometric classification for Central Europe - <a href="https://uscuni.org/himoc/">HiMoC</a>. The web app makes possible the sharing of the Central European data with an even wider audience, than the original specified stakeholders, regardless of their technical expertise. Furthermore, it allowed stakeholders to visually explore the geospatial data, zoom in and out, pan across areas, and overlay different layers. It was the focus of multiple stakeholder consultations and enabled them to see final results, propose features, highlight mistakes. Furthermore, it allowed them to specify what format at what scale the final results would be most useful for them.</p>
</section>
<section id="morphometric-characterisation-pipeline-for-microsoft-building-footprints" class="level4">
<h4 class="anchored" data-anchor-id="morphometric-characterisation-pipeline-for-microsoft-building-footprints">Morphometric characterisation pipeline for Microsoft Building footprints</h4>
<p>The entire morphometric characterisation pipeline for the processing of Microsoft Building Footprints, including reproducible notebooks and an environment is open-sourced and available on the <a href="https://github.com/eurofab-project/morphometrics/tree/main">EuroFab GitHub</a>.</p>
</section>
<section id="morphometric-characterisation-pipeline-for-overture-maps-building-footprints" class="level4">
<h4 class="anchored" data-anchor-id="morphometric-characterisation-pipeline-for-overture-maps-building-footprints">Morphometric characterisation pipeline for Overture Maps Building footprints</h4>
<p>The above reproducible pipeline was further adapted to process Overture Maps data and is also available at the <a href="https://github.com/eurofab-project/morphometrics/tree/main">EuroFab GitHub</a>.</p>
</section>
</section>
<section id="eo" class="level3">
<h3 class="anchored" data-anchor-id="eo">EO</h3>
<p>All EO analyses presented are supported by openly accessible software hosted on <a href="https://github.com/eurofab-project/eo/tree/main">GitHub</a>. The AI prediction pipeline, including preprocessing, embedding generation, and prediction of spatial signatures, is fully documented and accessible at EO repository.</p>
</section>
<section id="software-ai-method-for-urban-fabric-classification-and-morphometric-characterisation" class="level3">
<h3 class="anchored" data-anchor-id="software-ai-method-for-urban-fabric-classification-and-morphometric-characterisation">Software: AI Method for Urban Fabric classification and morphometric characterisation</h3>
<p>All the work supporting this analysis can be found on GitHub. The main prediction pipeline, which includes data preprocessing, embedding creation, and spatial signature prediction, can be used as follows:</p>
<pre><code># Run the pipeline
pipeline.spatial_sig_prediction(
    geo_path= "../spatial_signatures/eo/data/example/london_25_25_grid_clipped.geojson", ## Vector file (geojson or parquet) of analysis area (grid).
    vrt_file= "../satellite_demoland/data/mosaic_cube/vrt_allbands/2017_combined.vrt", ## Vrt file of the satellite composite
    xgb_weights = "../spatial_signatures/classifier/k12_h5_slided_gb_xgb_model.bin", ## Model weights for XGBoost classifier
    model_weights = "../satellite_demoland/models/satlas/weights/satlas-model-v1-lowres.pth", ## Model weights for embedding model (Satlas)
    output_path= "../vjgo8416-demoland/spatial_signatures/eo/data/predictions/test_london_h6.parquet", ## Output file with predictions, prediction probabilities and geometries
    h3_resolution=5 ## h3 resolution to be added to analysis (spatial context)
)`</code></pre>
<p>More details and documentation on how to run the pipeline can be found in the example on the <a href="https://github.com/eurofab-project/eo/blob/main/notebooks/run_pipeline.ipynb">EuroFab project EO repository</a>.</p>
</section>
</section>
<section id="example-datasets" class="level2">
<h2 class="anchored" data-anchor-id="example-datasets">Example datasets</h2>
<section id="morphometric-model" class="level3">
<h3 class="anchored" data-anchor-id="morphometric-model">Morphometric model</h3>
<p>The final morphometric model is around 40GB and takes around 10 hours to train. The full script and notebooks, including a reproducible environment is available at the project <a href="https://github.com/eurofab-project/morphometrics/tree/main">GitHub</a>. A non-interactive version of the notebooks used in the pipeline is available on the <a href="https://eurofab.org/morphometrics/">EuroFab Project Website</a> .</p>
<div id="fig-examples" class="nostretch quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-examples-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../figures/results/examples.png" class="nostretch img-fluid quarto-figure quarto-figure-center figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-examples-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Example Level 4 predictions for the areas around Vienna (Austria), Munich (Germany), Wroclaw (Poland) and Brno (Czechia)
</figcaption>
</figure>
</div>
</section>
<section id="ai-model" class="level3">
<h3 class="anchored" data-anchor-id="ai-model">AI model</h3>
<p>The final data cube including predictions for the years 2016 to 2021 for 7 and 12 classes can be found on the <a href="https://github.com/eurofab-project/eo/tree/main">GitHub repository</a>.</p>
</section>
<section id="example-datasets-generated-during-verification-exercises" class="level3">
<h3 class="anchored" data-anchor-id="example-datasets-generated-during-verification-exercises">Example datasets generated during Verification Exercises</h3>
<p>Here are some example visualisations showing London and Liverpool from the dataset:</p>
<section id="london" class="level4">
<h4 class="anchored" data-anchor-id="london">London</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../figures/results/london_k7.png" class="nostretch figure-img" height="400"></p>
<figcaption>London, 7 classes</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../figures/results/london_k12.png" class="nostretch figure-img" height="400"></p>
<figcaption>London, 12 classes</figcaption>
</figure>
</div>
</section>
<section id="liverpool" class="level4">
<h4 class="anchored" data-anchor-id="liverpool">Liverpool</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../figures/results/liverpool_k7.png" class="nostretch figure-img" height="400"></p>
<figcaption>Liverpool, 7 classes</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../figures/results/liverpool_k12.png" class="nostretch figure-img" height="400"></p>
<figcaption>Liverpool, 12 classes</figcaption>
</figure>
</div>
</section>
</section>
</section>
</section>
<section id="references" class="level1 unnumbered">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-araldi:hal-04774886" class="csl-entry" role="listitem">
Araldi, Alessandro, and Giovanni Fusco. 2024. <span>“<span class="nocase">Multi-Level Street-Based Analysis of the Urban Fabric: Developments for a Nationwide Taxonomy</span>.”</span> <em><span>Geographical Analysis</span></em>, October. <a href="https://doi.org/10.1111/gean.12416">https://doi.org/10.1111/gean.12416</a>.
</div>
<div id="ref-arribas2022spatial" class="csl-entry" role="listitem">
Arribas-Bel, Daniel, and Martin Fleischmann. 2022. <span>“Spatial Signatures-Understanding (Urban) Spaces Through Form and Function.”</span> <em>Habitat International</em> 128: 102641.
</div>
<div id="ref-calafiore2023inequalities" class="csl-entry" role="listitem">
Calafiore, Alessia, Krasen Samardzhiev, Francisco Rowe, Martin Fleischmann, and Daniel Arribas-Bel. 2023. <span>“Inequalities in Experiencing Urban Functions. An Exploration of Human Digital (Geo-) Footprints.”</span> <em>Environment and Planning B: Urban Analytics and City Science</em>, 23998083231208507.
</div>
<div id="ref-corbane2020global" class="csl-entry" role="listitem">
Corbane, C., P. Politis, P. Kempeneers, D. Simonetti, P. Soille, A. Burger, M. Pesaresi, F. Sabo, V. Syrris, and T. Kemper. 2020. <span>“A Global Cloud Free Pixel- Based Image Composite from <span>Sentinel</span>-2 Data.”</span> <em>Data in Brief</em> 31 (August): 105737. <a href="https://doi.org/10.1016/j.dib.2020.105737">https://doi.org/10.1016/j.dib.2020.105737</a>.
</div>
<div id="ref-europeanenvironmentagency1990" class="csl-entry" role="listitem">
European Environment Agency. 1990. <span>“<span>CORINE Land Cover</span>,”</span> January, 1–163.
</div>
<div id="ref-fleischmann2022geographical" class="csl-entry" role="listitem">
Fleischmann, Martin, and Daniel Arribas-Bel. 2022. <span>“Geographical Characterisation of British Urban Form and Function Using the Spatial Signatures Framework.”</span> <em>Scientific Data</em> 9 (1): 546.
</div>
<div id="ref-fleischmann2022methodological" class="csl-entry" role="listitem">
Fleischmann, Martin, Alessandra Feliciotti, Ombretta Romice, and Sergio Porta. 2022. <span>“Methodological Foundation of a Numerical Taxonomy of Urban Form.”</span> <em>Environment and Planning B: Urban Analytics and City Science</em> 49 (4): 1283–99.
</div>
<div id="ref-primus" class="csl-entry" role="listitem">
Fleischmann, Martin, and Krasen Samardzhiev. Forthcoming. <span>“Numerical Taxonomy of Urban Fabric in Central Europe,”</span> Forthcoming.
</div>
<div id="ref-QIU2022104358" class="csl-entry" role="listitem">
Qiu, Waishan, Ziye Zhang, Xun Liu, Wenjing Li, Xiaojiang Li, Xiang Xu, and Xiaokai Huang. 2022. <span>“Subjective or Objective Measures of Street Environment, Which Are More Effective in Explaining Housing Prices?”</span> <em>Landscape and Urban Planning</em> 221: 104358. https://doi.org/<a href="https://doi.org/10.1016/j.landurbplan.2022.104358">https://doi.org/10.1016/j.landurbplan.2022.104358</a>.
</div>
<div id="ref-stewart2012" class="csl-entry" role="listitem">
Stewart, I D, and T R Oke. 2012. <span>“Local <span>Climate Zones</span> for <span>Urban Temperature Studies</span>.”</span> <em>Bulletin of the American Meteorological Society</em> 93 (12): 1879–1900. <a href="https://doi.org/10.1175/BAMS-D-11-00019.1">https://doi.org/10.1175/BAMS-D-11-00019.1</a>.
</div>
<div id="ref-ZHU2022104576" class="csl-entry" role="listitem">
Zhu, Sijie, Yanxia Li, Shen Wei, Chao Wang, Xinkai Zhang, Xing Jin, Xin Zhou, and Xing Shi. 2022. <span>“The Impact of Urban Vegetation Morphology on Urban Building Energy Consumption During Summer and Winter Seasons in Nanjing, China.”</span> <em>Landscape and Urban Planning</em> 228: 104576. https://doi.org/<a href="https://doi.org/10.1016/j.landurbplan.2022.104576">https://doi.org/10.1016/j.landurbplan.2022.104576</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Fleischmann and Arribas-Bel, 2024. Decoding (urban) form and function using spatially explicit deep learning. <em>Computers, Environment and Urban Systems</em>, 31, p.105737.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>